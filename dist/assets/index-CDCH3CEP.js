var XC=Object.defineProperty;var dv=t=>{throw TypeError(t)};var ZC=(t,e,n)=>e in t?XC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rt=(t,e,n)=>ZC(t,typeof e!="symbol"?e+"":e,n),eE=(t,e,n)=>e.has(t)||dv("Cannot "+n);var fv=(t,e,n)=>e.has(t)?dv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var Kr=(t,e,n)=>(eE(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function xh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tE(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var Zd={exports:{}},Qr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function nE(){if(hv)return Qr;hv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var h in o)h!=="key"&&(a[h]=o[h])}else a=o;return o=a.ref,{$$typeof:t,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Qr.Fragment=e,Qr.jsx=n,Qr.jsxs=n,Qr}var pv;function iE(){return pv||(pv=1,Zd.exports=nE()),Zd.exports}var g=iE(),ef={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function sE(){if(mv)return Pe;mv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function T(R){return R===null||typeof R!="object"?null:(R=x&&R[x]||R["@@iterator"],typeof R=="function"?R:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function N(R,K,pe){this.props=R,this.context=K,this.refs=E,this.updater=pe||w}N.prototype.isReactComponent={},N.prototype.setState=function(R,K){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,K,"setState")},N.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function I(){}I.prototype=N.prototype;function M(R,K,pe){this.props=R,this.context=K,this.refs=E,this.updater=pe||w}var D=M.prototype=new I;D.constructor=M,_(D,N.prototype),D.isPureReactComponent=!0;var j=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function ee(R,K,pe,he,ae,W){return pe=W.ref,{$$typeof:t,type:R,key:K,ref:pe!==void 0?pe:null,props:W}}function Z(R,K){return ee(R.type,K,void 0,void 0,void 0,R.props)}function re(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function ye(R){var K={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(pe){return K[pe]})}var ce=/\/+/g;function ie(R,K){return typeof R=="object"&&R!==null&&R.key!=null?ye(""+R.key):K.toString(36)}function Y(){}function de(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(Y,Y):(R.status="pending",R.then(function(K){R.status==="pending"&&(R.status="fulfilled",R.value=K)},function(K){R.status==="pending"&&(R.status="rejected",R.reason=K)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function oe(R,K,pe,he,ae){var W=typeof R;(W==="undefined"||W==="boolean")&&(R=null);var le=!1;if(R===null)le=!0;else switch(W){case"bigint":case"string":case"number":le=!0;break;case"object":switch(R.$$typeof){case t:case e:le=!0;break;case y:return le=R._init,oe(le(R._payload),K,pe,he,ae)}}if(le)return ae=ae(R),le=he===""?"."+ie(R,0):he,j(ae)?(pe="",le!=null&&(pe=le.replace(ce,"$&/")+"/"),oe(ae,K,pe,"",function(me){return me})):ae!=null&&(re(ae)&&(ae=Z(ae,pe+(ae.key==null||R&&R.key===ae.key?"":(""+ae.key).replace(ce,"$&/")+"/")+le)),K.push(ae)),1;le=0;var J=he===""?".":he+":";if(j(R))for(var B=0;B<R.length;B++)he=R[B],W=J+ie(he,B),le+=oe(he,K,pe,W,ae);else if(B=T(R),typeof B=="function")for(R=B.call(R),B=0;!(he=R.next()).done;)he=he.value,W=J+ie(he,B++),le+=oe(he,K,pe,W,ae);else if(W==="object"){if(typeof R.then=="function")return oe(de(R),K,pe,he,ae);throw K=String(R),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return le}function U(R,K,pe){if(R==null)return R;var he=[],ae=0;return oe(R,he,"","",function(W){return K.call(pe,W,ae++)}),he}function G(R){if(R._status===-1){var K=R._result;K=K(),K.then(function(pe){(R._status===0||R._status===-1)&&(R._status=1,R._result=pe)},function(pe){(R._status===0||R._status===-1)&&(R._status=2,R._result=pe)}),R._status===-1&&(R._status=0,R._result=K)}if(R._status===1)return R._result.default;throw R._result}var fe=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function ge(){}return Pe.Children={map:U,forEach:function(R,K,pe){U(R,function(){K.apply(this,arguments)},pe)},count:function(R){var K=0;return U(R,function(){K++}),K},toArray:function(R){return U(R,function(K){return K})||[]},only:function(R){if(!re(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Pe.Component=N,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=M,Pe.StrictMode=i,Pe.Suspense=p,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return P.H.useMemoCache(R)}},Pe.cache=function(R){return function(){return R.apply(null,arguments)}},Pe.cloneElement=function(R,K,pe){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var he=_({},R.props),ae=R.key,W=void 0;if(K!=null)for(le in K.ref!==void 0&&(W=void 0),K.key!==void 0&&(ae=""+K.key),K)!z.call(K,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&K.ref===void 0||(he[le]=K[le]);var le=arguments.length-2;if(le===1)he.children=pe;else if(1<le){for(var J=Array(le),B=0;B<le;B++)J[B]=arguments[B+2];he.children=J}return ee(R.type,ae,void 0,void 0,W,he)},Pe.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},Pe.createElement=function(R,K,pe){var he,ae={},W=null;if(K!=null)for(he in K.key!==void 0&&(W=""+K.key),K)z.call(K,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ae[he]=K[he]);var le=arguments.length-2;if(le===1)ae.children=pe;else if(1<le){for(var J=Array(le),B=0;B<le;B++)J[B]=arguments[B+2];ae.children=J}if(R&&R.defaultProps)for(he in le=R.defaultProps,le)ae[he]===void 0&&(ae[he]=le[he]);return ee(R,W,void 0,void 0,null,ae)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(R){return{$$typeof:h,render:R}},Pe.isValidElement=re,Pe.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:G}},Pe.memo=function(R,K){return{$$typeof:m,type:R,compare:K===void 0?null:K}},Pe.startTransition=function(R){var K=P.T,pe={};P.T=pe;try{var he=R(),ae=P.S;ae!==null&&ae(pe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ge,fe)}catch(W){fe(W)}finally{P.T=K}},Pe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Pe.use=function(R){return P.H.use(R)},Pe.useActionState=function(R,K,pe){return P.H.useActionState(R,K,pe)},Pe.useCallback=function(R,K){return P.H.useCallback(R,K)},Pe.useContext=function(R){return P.H.useContext(R)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(R,K){return P.H.useDeferredValue(R,K)},Pe.useEffect=function(R,K,pe){var he=P.H;if(typeof pe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(R,K)},Pe.useId=function(){return P.H.useId()},Pe.useImperativeHandle=function(R,K,pe){return P.H.useImperativeHandle(R,K,pe)},Pe.useInsertionEffect=function(R,K){return P.H.useInsertionEffect(R,K)},Pe.useLayoutEffect=function(R,K){return P.H.useLayoutEffect(R,K)},Pe.useMemo=function(R,K){return P.H.useMemo(R,K)},Pe.useOptimistic=function(R,K){return P.H.useOptimistic(R,K)},Pe.useReducer=function(R,K,pe){return P.H.useReducer(R,K,pe)},Pe.useRef=function(R){return P.H.useRef(R)},Pe.useState=function(R){return P.H.useState(R)},Pe.useSyncExternalStore=function(R,K,pe){return P.H.useSyncExternalStore(R,K,pe)},Pe.useTransition=function(){return P.H.useTransition()},Pe.version="19.1.1",Pe}var gv;function bh(){return gv||(gv=1,ef.exports=sE()),ef.exports}var A=bh();const Th=xh(A);var tf={exports:{}},Wr={},nf={exports:{}},sf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function oE(){return yv||(yv=1,(function(t){function e(U,G){var fe=U.length;U.push(G);e:for(;0<fe;){var ge=fe-1>>>1,R=U[ge];if(0<o(R,G))U[ge]=G,U[fe]=R,fe=ge;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var G=U[0],fe=U.pop();if(fe!==G){U[0]=fe;e:for(var ge=0,R=U.length,K=R>>>1;ge<K;){var pe=2*(ge+1)-1,he=U[pe],ae=pe+1,W=U[ae];if(0>o(he,fe))ae<R&&0>o(W,he)?(U[ge]=W,U[ae]=fe,ge=ae):(U[ge]=he,U[pe]=fe,ge=pe);else if(ae<R&&0>o(W,fe))U[ge]=W,U[ae]=fe,ge=ae;else break e}}return G}function o(U,G){var fe=U.sortIndex-G.sortIndex;return fe!==0?fe:U.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var p=[],m=[],y=1,x=null,T=3,w=!1,_=!1,E=!1,N=!1,I=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function j(U){for(var G=n(m);G!==null;){if(G.callback===null)i(m);else if(G.startTime<=U)i(m),G.sortIndex=G.expirationTime,e(p,G);else break;G=n(m)}}function P(U){if(E=!1,j(U),!_)if(n(p)!==null)_=!0,z||(z=!0,ie());else{var G=n(m);G!==null&&oe(P,G.startTime-U)}}var z=!1,ee=-1,Z=5,re=-1;function ye(){return N?!0:!(t.unstable_now()-re<Z)}function ce(){if(N=!1,z){var U=t.unstable_now();re=U;var G=!0;try{e:{_=!1,E&&(E=!1,M(ee),ee=-1),w=!0;var fe=T;try{t:{for(j(U),x=n(p);x!==null&&!(x.expirationTime>U&&ye());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,T=x.priorityLevel;var R=ge(x.expirationTime<=U);if(U=t.unstable_now(),typeof R=="function"){x.callback=R,j(U),G=!0;break t}x===n(p)&&i(p),j(U)}else i(p);x=n(p)}if(x!==null)G=!0;else{var K=n(m);K!==null&&oe(P,K.startTime-U),G=!1}}break e}finally{x=null,T=fe,w=!1}G=void 0}}finally{G?ie():z=!1}}}var ie;if(typeof D=="function")ie=function(){D(ce)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,de=Y.port2;Y.port1.onmessage=ce,ie=function(){de.postMessage(null)}}else ie=function(){I(ce,0)};function oe(U,G){ee=I(function(){U(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(U){switch(T){case 1:case 2:case 3:var G=3;break;default:G=T}var fe=T;T=G;try{return U()}finally{T=fe}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var fe=T;T=U;try{return G()}finally{T=fe}},t.unstable_scheduleCallback=function(U,G,fe){var ge=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ge+fe:ge):fe=ge,U){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=fe+R,U={id:y++,callback:G,priorityLevel:U,startTime:fe,expirationTime:R,sortIndex:-1},fe>ge?(U.sortIndex=fe,e(m,U),n(p)===null&&U===n(m)&&(E?(M(ee),ee=-1):E=!0,oe(P,fe-ge))):(U.sortIndex=R,e(p,U),_||w||(_=!0,z||(z=!0,ie()))),U},t.unstable_shouldYield=ye,t.unstable_wrapCallback=function(U){var G=T;return function(){var fe=T;T=G;try{return U.apply(this,arguments)}finally{T=fe}}}})(sf)),sf}var vv;function rE(){return vv||(vv=1,nf.exports=oE()),nf.exports}var of={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function aE(){if(xv)return $t;xv=1;var t=bh();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,m,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:p,containerInfo:m,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$t.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,y)},$t.flushSync=function(p){var m=u.T,y=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=y,i.d.f()}},$t.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},$t.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},$t.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,x=h(y,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:w}):y==="script"&&i.d.X(p,{crossOrigin:x,integrity:T,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},$t.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},$t.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,x=h(y,m.crossOrigin);i.d.L(p,y,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},$t.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=h(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},$t.requestFormReset=function(p){i.d.r(p)},$t.unstable_batchedUpdates=function(p,m){return p(m)},$t.useFormState=function(p,m,y){return u.H.useFormState(p,m,y)},$t.useFormStatus=function(){return u.H.useHostTransitionStatus()},$t.version="19.1.1",$t}var bv;function lE(){if(bv)return of.exports;bv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),of.exports=aE(),of.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function uE(){if(Tv)return Wr;Tv=1;var t=rE(),e=bh(),n=lE();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(i(188))}function p(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,f=r;;){var v=l.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===l)return h(v),s;if(b===f)return h(v),r;b=b.sibling}throw Error(i(188))}if(l.return!==f.return)l=v,f=b;else{for(var S=!1,C=v.child;C;){if(C===l){S=!0,l=v,f=b;break}if(C===f){S=!0,f=v,l=b;break}C=C.sibling}if(!S){for(C=b.child;C;){if(C===l){S=!0,l=b,f=v;break}if(C===f){S=!0,f=b,l=v;break}C=C.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==f)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function m(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=m(s),r!==null)return r;s=s.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),D=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function ie(s){return s===null||typeof s!="object"?null:(s=ce&&s[ce]||s["@@iterator"],typeof s=="function"?s:null)}var Y=Symbol.for("react.client.reference");function de(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Y?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case _:return"Fragment";case N:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case z:return"SuspenseList";case re:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case D:return(s.displayName||"Context")+".Provider";case M:return(s._context.displayName||"Context")+".Consumer";case j:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ee:return r=s.displayName||null,r!==null?r:de(s.type)||"Memo";case Z:r=s._payload,s=s._init;try{return de(s(r))}catch{}}return null}var oe=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},ge=[],R=-1;function K(s){return{current:s}}function pe(s){0>R||(s.current=ge[R],ge[R]=null,R--)}function he(s,r){R++,ge[R]=s.current,s.current=r}var ae=K(null),W=K(null),le=K(null),J=K(null);function B(s,r){switch(he(le,r),he(W,s),he(ae,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?By(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=By(r),s=Oy(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}pe(ae),he(ae,s)}function me(){pe(ae),pe(W),pe(le)}function Le(s){s.memoizedState!==null&&he(J,s);var r=ae.current,l=Oy(r,s.type);r!==l&&(he(W,s),he(ae,l))}function se(s){W.current===s&&(pe(ae),pe(W)),J.current===s&&(pe(J),Hr._currentValue=fe)}var ke=Object.prototype.hasOwnProperty,He=t.unstable_scheduleCallback,De=t.unstable_cancelCallback,ue=t.unstable_shouldYield,Te=t.unstable_requestPaint,we=t.unstable_now,F=t.unstable_getCurrentPriorityLevel,te=t.unstable_ImmediatePriority,Ce=t.unstable_UserBlockingPriority,Ee=t.unstable_NormalPriority,Se=t.unstable_LowPriority,Be=t.unstable_IdlePriority,pt=t.log,mt=t.unstable_setDisableYieldValue,ut=null,ct=null;function pn(s){if(typeof pt=="function"&&mt(s),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(ut,s)}catch{}}var zt=Math.clz32?Math.clz32:Ki,Jt=Math.log,An=Math.LN2;function Ki(s){return s>>>=0,s===0?32:31-(Jt(s)/An|0)|0}var Qi=256,La=4194304;function Wi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ua(s,r,l){var f=s.pendingLanes;if(f===0)return 0;var v=0,b=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var C=f&134217727;return C!==0?(f=C&~b,f!==0?v=Wi(f):(S&=C,S!==0?v=Wi(S):l||(l=C&~s,l!==0&&(v=Wi(l))))):(C=f&~b,C!==0?v=Wi(C):S!==0?v=Wi(S):l||(l=f&~s,l!==0&&(v=Wi(l)))),v===0?0:r!==0&&r!==v&&(r&b)===0&&(b=v&-v,l=r&-r,b>=l||b===32&&(l&4194048)!==0)?r:v}function Zo(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Bw(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sp(){var s=Qi;return Qi<<=1,(Qi&4194048)===0&&(Qi=256),s}function wp(){var s=La;return La<<=1,(La&62914560)===0&&(La=4194304),s}function zu(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function er(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ow(s,r,l,f,v,b){var S=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var C=s.entanglements,k=s.expirationTimes,q=s.hiddenUpdates;for(l=S&~l;0<l;){var Q=31-zt(l),ne=1<<Q;C[Q]=0,k[Q]=-1;var H=q[Q];if(H!==null)for(q[Q]=null,Q=0;Q<H.length;Q++){var $=H[Q];$!==null&&($.lane&=-536870913)}l&=~ne}f!==0&&_p(s,f,0),b!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=b&~(S&~r))}function _p(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var f=31-zt(r);s.entangledLanes|=r,s.entanglements[f]=s.entanglements[f]|1073741824|l&4194090}function Cp(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var f=31-zt(l),v=1<<f;v&r|s[f]&r&&(s[f]|=r),l&=~v}}function Gu(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Hu(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ep(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:ov(s.type))}function qw(s,r){var l=G.p;try{return G.p=s,r()}finally{G.p=l}}var xi=Math.random().toString(36).slice(2),Gt="__reactFiber$"+xi,Wt="__reactProps$"+xi,ks="__reactContainer$"+xi,$u="__reactEvents$"+xi,zw="__reactListeners$"+xi,Gw="__reactHandles$"+xi,Ap="__reactResources$"+xi,tr="__reactMarker$"+xi;function Fu(s){delete s[Gt],delete s[Wt],delete s[$u],delete s[zw],delete s[Gw]}function Ds(s){var r=s[Gt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[ks]||l[Gt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Hy(s);s!==null;){if(l=s[Gt])return l;s=Hy(s)}return r}s=l,l=s.parentNode}return null}function Is(s){if(s=s[Gt]||s[ks]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function nr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Ps(s){var r=s[Ap];return r||(r=s[Ap]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Rt(s){s[tr]=!0}var Np=new Set,Mp={};function Xi(s,r){Ls(s,r),Ls(s+"Capture",r)}function Ls(s,r){for(Mp[s]=r,s=0;s<r.length;s++)Np.add(r[s])}var Hw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rp={},kp={};function $w(s){return ke.call(kp,s)?!0:ke.call(Rp,s)?!1:Hw.test(s)?kp[s]=!0:(Rp[s]=!0,!1)}function Va(s,r,l){if($w(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function ja(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Jn(s,r,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+f)}}var Yu,Dp;function Us(s){if(Yu===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Yu=r&&r[1]||"",Dp=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yu+s+Dp}var Ju=!1;function Ku(s,r){if(!s||Ju)return"";Ju=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch($){var H=$}Reflect.construct(s,[],ne)}else{try{ne.call()}catch($){H=$}s.call(ne.prototype)}}else{try{throw Error()}catch($){H=$}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch($){if($&&H&&typeof $.stack=="string")return[$.stack,H.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),S=b[0],C=b[1];if(S&&C){var k=S.split(`
`),q=C.split(`
`);for(v=f=0;f<k.length&&!k[f].includes("DetermineComponentFrameRoot");)f++;for(;v<q.length&&!q[v].includes("DetermineComponentFrameRoot");)v++;if(f===k.length||v===q.length)for(f=k.length-1,v=q.length-1;1<=f&&0<=v&&k[f]!==q[v];)v--;for(;1<=f&&0<=v;f--,v--)if(k[f]!==q[v]){if(f!==1||v!==1)do if(f--,v--,0>v||k[f]!==q[v]){var Q=`
`+k[f].replace(" at new "," at ");return s.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",s.displayName)),Q}while(1<=f&&0<=v);break}}}finally{Ju=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Us(l):""}function Fw(s){switch(s.tag){case 26:case 27:case 5:return Us(s.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 15:return Ku(s.type,!1);case 11:return Ku(s.type.render,!1);case 1:return Ku(s.type,!0);case 31:return Us("Activity");default:return""}}function Ip(s){try{var r="";do r+=Fw(s),s=s.return;while(s);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function mn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Pp(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Yw(s){var r=Pp(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),f=""+s[r];if(!s.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,b=l.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return v.call(this)},set:function(S){f=""+S,b.call(this,S)}}),Object.defineProperty(s,r,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Ba(s){s._valueTracker||(s._valueTracker=Yw(s))}function Lp(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),f="";return s&&(f=Pp(s)?s.checked?"true":"false":s.value),s=f,s!==l?(r.setValue(s),!0):!1}function Oa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Jw=/[\n"\\]/g;function gn(s){return s.replace(Jw,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Qu(s,r,l,f,v,b,S,C){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),r!=null?S==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+mn(r)):s.value!==""+mn(r)&&(s.value=""+mn(r)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),r!=null?Wu(s,S,mn(r)):l!=null?Wu(s,S,mn(l)):f!=null&&s.removeAttribute("value"),v==null&&b!=null&&(s.defaultChecked=!!b),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+mn(C):s.removeAttribute("name")}function Up(s,r,l,f,v,b,S,C){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),r!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||r!=null))return;l=l!=null?""+mn(l):"",r=r!=null?""+mn(r):l,C||r===s.value||(s.value=r),s.defaultValue=r}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=C?s.checked:!!f,s.defaultChecked=!!f,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function Wu(s,r,l){r==="number"&&Oa(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Vs(s,r,l,f){if(s=s.options,r){r={};for(var v=0;v<l.length;v++)r["$"+l[v]]=!0;for(l=0;l<s.length;l++)v=r.hasOwnProperty("$"+s[l].value),s[l].selected!==v&&(s[l].selected=v),v&&f&&(s[l].defaultSelected=!0)}else{for(l=""+mn(l),r=null,v=0;v<s.length;v++){if(s[v].value===l){s[v].selected=!0,f&&(s[v].defaultSelected=!0);return}r!==null||s[v].disabled||(r=s[v])}r!==null&&(r.selected=!0)}}function Vp(s,r,l){if(r!=null&&(r=""+mn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+mn(l):""}function jp(s,r,l,f){if(r==null){if(f!=null){if(l!=null)throw Error(i(92));if(oe(f)){if(1<f.length)throw Error(i(93));f=f[0]}l=f}l==null&&(l=""),r=l}l=mn(r),s.defaultValue=l,f=s.textContent,f===l&&f!==""&&f!==null&&(s.value=f)}function js(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Kw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bp(s,r,l){var f=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":f?s.setProperty(r,l):typeof l!="number"||l===0||Kw.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Op(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var v in r)f=r[v],r.hasOwnProperty(v)&&l[v]!==f&&Bp(s,v,f)}else for(var b in r)r.hasOwnProperty(b)&&Bp(s,b,r[b])}function Xu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ww=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qa(s){return Ww.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Zu=null;function ec(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Bs=null,Os=null;function qp(s){var r=Is(s);if(r&&(s=r.stateNode)){var l=s[Wt]||null;e:switch(s=r.stateNode,r.type){case"input":if(Qu(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+gn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var f=l[r];if(f!==s&&f.form===s.form){var v=f[Wt]||null;if(!v)throw Error(i(90));Qu(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<l.length;r++)f=l[r],f.form===s.form&&Lp(f)}break e;case"textarea":Vp(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Vs(s,!!l.multiple,r,!1)}}}var tc=!1;function zp(s,r,l){if(tc)return s(r,l);tc=!0;try{var f=s(r);return f}finally{if(tc=!1,(Bs!==null||Os!==null)&&(El(),Bs&&(r=Bs,s=Os,Os=Bs=null,qp(r),s)))for(r=0;r<s.length;r++)qp(s[r])}}function ir(s,r){var l=s.stateNode;if(l===null)return null;var f=l[Wt]||null;if(f===null)return null;l=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nc=!1;if(Kn)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){nc=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{nc=!1}var bi=null,ic=null,za=null;function Gp(){if(za)return za;var s,r=ic,l=r.length,f,v="value"in bi?bi.value:bi.textContent,b=v.length;for(s=0;s<l&&r[s]===v[s];s++);var S=l-s;for(f=1;f<=S&&r[l-f]===v[b-f];f++);return za=v.slice(s,1<f?1-f:void 0)}function Ga(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Ha(){return!0}function Hp(){return!1}function Xt(s){function r(l,f,v,b,S){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(l=s[C],this[C]=l?l(b):b[C]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ha:Hp,this.isPropagationStopped=Hp,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),r}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$a=Xt(Zi),or=y({},Zi,{view:0,detail:0}),Xw=Xt(or),sc,oc,rr,Fa=y({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ac,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==rr&&(rr&&s.type==="mousemove"?(sc=s.screenX-rr.screenX,oc=s.screenY-rr.screenY):oc=sc=0,rr=s),sc)},movementY:function(s){return"movementY"in s?s.movementY:oc}}),$p=Xt(Fa),Zw=y({},Fa,{dataTransfer:0}),e_=Xt(Zw),t_=y({},or,{relatedTarget:0}),rc=Xt(t_),n_=y({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),i_=Xt(n_),s_=y({},Zi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),o_=Xt(s_),r_=y({},Zi,{data:0}),Fp=Xt(r_),a_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c_(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=u_[s])?!!r[s]:!1}function ac(){return c_}var d_=y({},or,{key:function(s){if(s.key){var r=a_[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ga(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?l_[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ac,charCode:function(s){return s.type==="keypress"?Ga(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ga(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),f_=Xt(d_),h_=y({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=Xt(h_),p_=y({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ac}),m_=Xt(p_),g_=y({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),y_=Xt(g_),v_=y({},Fa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),x_=Xt(v_),b_=y({},Zi,{newState:0,oldState:0}),T_=Xt(b_),S_=[9,13,27,32],lc=Kn&&"CompositionEvent"in window,ar=null;Kn&&"documentMode"in document&&(ar=document.documentMode);var w_=Kn&&"TextEvent"in window&&!ar,Jp=Kn&&(!lc||ar&&8<ar&&11>=ar),Kp=" ",Qp=!1;function Wp(s,r){switch(s){case"keyup":return S_.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qs=!1;function __(s,r){switch(s){case"compositionend":return Xp(r);case"keypress":return r.which!==32?null:(Qp=!0,Kp);case"textInput":return s=r.data,s===Kp&&Qp?null:s;default:return null}}function C_(s,r){if(qs)return s==="compositionend"||!lc&&Wp(s,r)?(s=Gp(),za=ic=bi=null,qs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Jp&&r.locale!=="ko"?null:r.data;default:return null}}var E_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zp(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!E_[s.type]:r==="textarea"}function em(s,r,l,f){Bs?Os?Os.push(f):Os=[f]:Bs=f,r=Dl(r,"onChange"),0<r.length&&(l=new $a("onChange","change",null,l,f),s.push({event:l,listeners:r}))}var lr=null,ur=null;function A_(s){Py(s,0)}function Ya(s){var r=nr(s);if(Lp(r))return s}function tm(s,r){if(s==="change")return r}var nm=!1;if(Kn){var uc;if(Kn){var cc="oninput"in document;if(!cc){var im=document.createElement("div");im.setAttribute("oninput","return;"),cc=typeof im.oninput=="function"}uc=cc}else uc=!1;nm=uc&&(!document.documentMode||9<document.documentMode)}function sm(){lr&&(lr.detachEvent("onpropertychange",om),ur=lr=null)}function om(s){if(s.propertyName==="value"&&Ya(ur)){var r=[];em(r,ur,s,ec(s)),zp(A_,r)}}function N_(s,r,l){s==="focusin"?(sm(),lr=r,ur=l,lr.attachEvent("onpropertychange",om)):s==="focusout"&&sm()}function M_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ya(ur)}function R_(s,r){if(s==="click")return Ya(r)}function k_(s,r){if(s==="input"||s==="change")return Ya(r)}function D_(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var nn=typeof Object.is=="function"?Object.is:D_;function cr(s,r){if(nn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),f=Object.keys(r);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!ke.call(r,v)||!nn(s[v],r[v]))return!1}return!0}function rm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function am(s,r){var l=rm(s);s=0;for(var f;l;){if(l.nodeType===3){if(f=s+l.textContent.length,s<=r&&f>=r)return{node:l,offset:r-s};s=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rm(l)}}function lm(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?lm(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function um(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Oa(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Oa(s.document)}return r}function dc(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var I_=Kn&&"documentMode"in document&&11>=document.documentMode,zs=null,fc=null,dr=null,hc=!1;function cm(s,r,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hc||zs==null||zs!==Oa(f)||(f=zs,"selectionStart"in f&&dc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),dr&&cr(dr,f)||(dr=f,f=Dl(fc,"onSelect"),0<f.length&&(r=new $a("onSelect","select",null,r,l),s.push({event:r,listeners:f}),r.target=zs)))}function es(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Gs={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},pc={},dm={};Kn&&(dm=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function ts(s){if(pc[s])return pc[s];if(!Gs[s])return s;var r=Gs[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in dm)return pc[s]=r[l];return s}var fm=ts("animationend"),hm=ts("animationiteration"),pm=ts("animationstart"),P_=ts("transitionrun"),L_=ts("transitionstart"),U_=ts("transitioncancel"),mm=ts("transitionend"),gm=new Map,mc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mc.push("scrollEnd");function Nn(s,r){gm.set(s,r),Xi(r,[s])}var ym=new WeakMap;function yn(s,r){if(typeof s=="object"&&s!==null){var l=ym.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Ip(r)},ym.set(s,r),r)}return{value:s,source:r,stack:Ip(r)}}var vn=[],Hs=0,gc=0;function Ja(){for(var s=Hs,r=gc=Hs=0;r<s;){var l=vn[r];vn[r++]=null;var f=vn[r];vn[r++]=null;var v=vn[r];vn[r++]=null;var b=vn[r];if(vn[r++]=null,f!==null&&v!==null){var S=f.pending;S===null?v.next=v:(v.next=S.next,S.next=v),f.pending=v}b!==0&&vm(l,v,b)}}function Ka(s,r,l,f){vn[Hs++]=s,vn[Hs++]=r,vn[Hs++]=l,vn[Hs++]=f,gc|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function yc(s,r,l,f){return Ka(s,r,l,f),Qa(s)}function $s(s,r){return Ka(s,null,null,r),Qa(s)}function vm(s,r,l){s.lanes|=l;var f=s.alternate;f!==null&&(f.lanes|=l);for(var v=!1,b=s.return;b!==null;)b.childLanes|=l,f=b.alternate,f!==null&&(f.childLanes|=l),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(v=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,v&&r!==null&&(v=31-zt(l),s=b.hiddenUpdates,f=s[v],f===null?s[v]=[r]:f.push(r),r.lane=l|536870912),b):null}function Qa(s){if(50<Ur)throw Ur=0,wd=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Fs={};function V_(s,r,l,f){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(s,r,l,f){return new V_(s,r,l,f)}function vc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qn(s,r){var l=s.alternate;return l===null?(l=sn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function xm(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Wa(s,r,l,f,v,b){var S=0;if(f=s,typeof s=="function")vc(s)&&(S=1);else if(typeof s=="string")S=BC(s,l,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case re:return s=sn(31,l,r,v),s.elementType=re,s.lanes=b,s;case _:return ns(l.children,v,b,r);case E:S=8,v|=24;break;case N:return s=sn(12,l,r,v|2),s.elementType=N,s.lanes=b,s;case P:return s=sn(13,l,r,v),s.elementType=P,s.lanes=b,s;case z:return s=sn(19,l,r,v),s.elementType=z,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:case D:S=10;break e;case M:S=9;break e;case j:S=11;break e;case ee:S=14;break e;case Z:S=16,f=null;break e}S=29,l=Error(i(130,s===null?"null":typeof s,"")),f=null}return r=sn(S,l,r,v),r.elementType=s,r.type=f,r.lanes=b,r}function ns(s,r,l,f){return s=sn(7,s,f,r),s.lanes=l,s}function xc(s,r,l){return s=sn(6,s,null,r),s.lanes=l,s}function bc(s,r,l){return r=sn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Ys=[],Js=0,Xa=null,Za=0,xn=[],bn=0,is=null,Wn=1,Xn="";function ss(s,r){Ys[Js++]=Za,Ys[Js++]=Xa,Xa=s,Za=r}function bm(s,r,l){xn[bn++]=Wn,xn[bn++]=Xn,xn[bn++]=is,is=s;var f=Wn;s=Xn;var v=32-zt(f)-1;f&=~(1<<v),l+=1;var b=32-zt(r)+v;if(30<b){var S=v-v%5;b=(f&(1<<S)-1).toString(32),f>>=S,v-=S,Wn=1<<32-zt(r)+v|l<<v|f,Xn=b+s}else Wn=1<<b|l<<v|f,Xn=s}function Tc(s){s.return!==null&&(ss(s,1),bm(s,1,0))}function Sc(s){for(;s===Xa;)Xa=Ys[--Js],Ys[Js]=null,Za=Ys[--Js],Ys[Js]=null;for(;s===is;)is=xn[--bn],xn[bn]=null,Xn=xn[--bn],xn[bn]=null,Wn=xn[--bn],xn[bn]=null}var Kt=null,gt=null,Ye=!1,os=null,Ln=!1,wc=Error(i(519));function rs(s){var r=Error(i(418,""));throw pr(yn(r,s)),wc}function Tm(s){var r=s.stateNode,l=s.type,f=s.memoizedProps;switch(r[Gt]=s,r[Wt]=f,l){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(l=0;l<jr.length;l++)qe(jr[l],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":qe("invalid",r),Up(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Ba(r);break;case"select":qe("invalid",r);break;case"textarea":qe("invalid",r),jp(r,f.value,f.defaultValue,f.children),Ba(r)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||f.suppressHydrationWarning===!0||jy(r.textContent,l)?(f.popover!=null&&(qe("beforetoggle",r),qe("toggle",r)),f.onScroll!=null&&qe("scroll",r),f.onScrollEnd!=null&&qe("scrollend",r),f.onClick!=null&&(r.onclick=Il),r=!0):r=!1,r||rs(s)}function Sm(s){for(Kt=s.return;Kt;)switch(Kt.tag){case 5:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Kt=Kt.return}}function fr(s){if(s!==Kt)return!1;if(!Ye)return Sm(s),Ye=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Bd(s.type,s.memoizedProps)),l=!l),l&&gt&&rs(s),Sm(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(r===0){gt=Rn(s.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;s=s.nextSibling}gt=null}}else r===27?(r=gt,Ui(s.type)?(s=Gd,Gd=null,gt=s):gt=r):gt=Kt?Rn(s.stateNode.nextSibling):null;return!0}function hr(){gt=Kt=null,Ye=!1}function wm(){var s=os;return s!==null&&(tn===null?tn=s:tn.push.apply(tn,s),os=null),s}function pr(s){os===null?os=[s]:os.push(s)}var _c=K(null),as=null,Zn=null;function Ti(s,r,l){he(_c,r._currentValue),r._currentValue=l}function ei(s){s._currentValue=_c.current,pe(_c)}function Cc(s,r,l){for(;s!==null;){var f=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),s===l)break;s=s.return}}function Ec(s,r,l,f){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var b=v.dependencies;if(b!==null){var S=v.child;b=b.firstContext;e:for(;b!==null;){var C=b;b=v;for(var k=0;k<r.length;k++)if(C.context===r[k]){b.lanes|=l,C=b.alternate,C!==null&&(C.lanes|=l),Cc(b.return,l,s),f||(S=null);break e}b=C.next}}else if(v.tag===18){if(S=v.return,S===null)throw Error(i(341));S.lanes|=l,b=S.alternate,b!==null&&(b.lanes|=l),Cc(S,l,s),S=null}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}}function mr(s,r,l,f){s=null;for(var v=r,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var S=v.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var C=v.type;nn(v.pendingProps.value,S.value)||(s!==null?s.push(C):s=[C])}}else if(v===J.current){if(S=v.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Hr):s=[Hr])}v=v.return}s!==null&&Ec(r,s,l,f),r.flags|=262144}function el(s){for(s=s.firstContext;s!==null;){if(!nn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ls(s){as=s,Zn=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ht(s){return _m(as,s)}function tl(s,r){return as===null&&ls(s),_m(s,r)}function _m(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Zn===null){if(s===null)throw Error(i(308));Zn=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Zn=Zn.next=r;return l}var j_=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,f){s.push(f)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},B_=t.unstable_scheduleCallback,O_=t.unstable_NormalPriority,Ct={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ac(){return{controller:new j_,data:new Map,refCount:0}}function gr(s){s.refCount--,s.refCount===0&&B_(O_,function(){s.controller.abort()})}var yr=null,Nc=0,Ks=0,Qs=null;function q_(s,r){if(yr===null){var l=yr=[];Nc=0,Ks=Rd(),Qs={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Nc++,r.then(Cm,Cm),r}function Cm(){if(--Nc===0&&yr!==null){Qs!==null&&(Qs.status="fulfilled");var s=yr;yr=null,Ks=0,Qs=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function z_(s,r){var l=[],f={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return s.then(function(){f.status="fulfilled",f.value=r;for(var v=0;v<l.length;v++)(0,l[v])(r)},function(v){for(f.status="rejected",f.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),f}var Em=U.S;U.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&q_(s,r),Em!==null&&Em(s,r)};var us=K(null);function Mc(){var s=us.current;return s!==null?s:ot.pooledCache}function nl(s,r){r===null?he(us,us.current):he(us,r.pool)}function Am(){var s=Mc();return s===null?null:{parent:Ct._currentValue,pool:s}}var vr=Error(i(460)),Nm=Error(i(474)),il=Error(i(542)),Rc={then:function(){}};function Mm(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sl(){}function Rm(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(sl,sl),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Dm(s),s;default:if(typeof r.status=="string")r.then(sl,sl);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(f){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=f}},function(f){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Dm(s),s}throw xr=r,vr}}var xr=null;function km(){if(xr===null)throw Error(i(459));var s=xr;return xr=null,s}function Dm(s){if(s===vr||s===il)throw Error(i(483))}var Si=!1;function kc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dc(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function wi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function _i(s,r,l){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Qe&2)!==0){var v=f.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),f.pending=r,r=Qa(s),vm(s,null,l),r}return Ka(s,f,r,l),Qa(s)}function br(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var f=r.lanes;f&=s.pendingLanes,l|=f,r.lanes=l,Cp(s,l)}}function Ic(s,r){var l=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?v=b=S:b=b.next=S,l=l.next}while(l!==null);b===null?v=b=r:b=b.next=r}else v=b=r;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Pc=!1;function Tr(){if(Pc){var s=Qs;if(s!==null)throw s}}function Sr(s,r,l,f){Pc=!1;var v=s.updateQueue;Si=!1;var b=v.firstBaseUpdate,S=v.lastBaseUpdate,C=v.shared.pending;if(C!==null){v.shared.pending=null;var k=C,q=k.next;k.next=null,S===null?b=q:S.next=q,S=k;var Q=s.alternate;Q!==null&&(Q=Q.updateQueue,C=Q.lastBaseUpdate,C!==S&&(C===null?Q.firstBaseUpdate=q:C.next=q,Q.lastBaseUpdate=k))}if(b!==null){var ne=v.baseState;S=0,Q=q=k=null,C=b;do{var H=C.lane&-536870913,$=H!==C.lane;if($?(Ge&H)===H:(f&H)===H){H!==0&&H===Ks&&(Pc=!0),Q!==null&&(Q=Q.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Re=s,Ae=C;H=r;var tt=l;switch(Ae.tag){case 1:if(Re=Ae.payload,typeof Re=="function"){ne=Re.call(tt,ne,H);break e}ne=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ae.payload,H=typeof Re=="function"?Re.call(tt,ne,H):Re,H==null)break e;ne=y({},ne,H);break e;case 2:Si=!0}}H=C.callback,H!==null&&(s.flags|=64,$&&(s.flags|=8192),$=v.callbacks,$===null?v.callbacks=[H]:$.push(H))}else $={lane:H,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Q===null?(q=Q=$,k=ne):Q=Q.next=$,S|=H;if(C=C.next,C===null){if(C=v.shared.pending,C===null)break;$=C,C=$.next,$.next=null,v.lastBaseUpdate=$,v.shared.pending=null}}while(!0);Q===null&&(k=ne),v.baseState=k,v.firstBaseUpdate=q,v.lastBaseUpdate=Q,b===null&&(v.shared.lanes=0),Di|=S,s.lanes=S,s.memoizedState=ne}}function Im(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Pm(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Im(l[s],r)}var Ws=K(null),ol=K(0);function Lm(s,r){s=ai,he(ol,s),he(Ws,r),ai=s|r.baseLanes}function Lc(){he(ol,ai),he(Ws,Ws.current)}function Uc(){ai=ol.current,pe(Ws),pe(ol)}var Ci=0,Ue=null,Ze=null,St=null,rl=!1,Xs=!1,cs=!1,al=0,wr=0,Zs=null,G_=0;function xt(){throw Error(i(321))}function Vc(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!nn(s[l],r[l]))return!1;return!0}function jc(s,r,l,f,v,b){return Ci=b,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,U.H=s===null||s.memoizedState===null?vg:xg,cs=!1,b=l(f,v),cs=!1,Xs&&(b=Vm(r,l,f,v)),Um(s),b}function Um(s){U.H=hl;var r=Ze!==null&&Ze.next!==null;if(Ci=0,St=Ze=Ue=null,rl=!1,wr=0,Zs=null,r)throw Error(i(300));s===null||kt||(s=s.dependencies,s!==null&&el(s)&&(kt=!0))}function Vm(s,r,l,f){Ue=s;var v=0;do{if(Xs&&(Zs=null),wr=0,Xs=!1,25<=v)throw Error(i(301));if(v+=1,St=Ze=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}U.H=Q_,b=r(l,f)}while(Xs);return b}function H_(){var s=U.H,r=s.useState()[0];return r=typeof r.then=="function"?_r(r):r,s=s.useState()[0],(Ze!==null?Ze.memoizedState:null)!==s&&(Ue.flags|=1024),r}function Bc(){var s=al!==0;return al=0,s}function Oc(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function qc(s){if(rl){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}rl=!1}Ci=0,St=Ze=Ue=null,Xs=!1,wr=al=0,Zs=null}function Zt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ue.memoizedState=St=s:St=St.next=s,St}function wt(){if(Ze===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=Ze.next;var r=St===null?Ue.memoizedState:St.next;if(r!==null)St=r,Ze=s;else{if(s===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));Ze=s,s={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},St===null?Ue.memoizedState=St=s:St=St.next=s}return St}function zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _r(s){var r=wr;return wr+=1,Zs===null&&(Zs=[]),s=Rm(Zs,s,r),r=Ue,(St===null?r.memoizedState:St.next)===null&&(r=r.alternate,U.H=r===null||r.memoizedState===null?vg:xg),s}function ll(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return _r(s);if(s.$$typeof===D)return Ht(s)}throw Error(i(438,String(s)))}function Gc(s){var r=null,l=Ue.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var f=Ue.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=zc(),Ue.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),f=0;f<s;f++)l[f]=ye;return r.index++,l}function ti(s,r){return typeof r=="function"?r(s):r}function ul(s){var r=wt();return Hc(r,Ze,s)}function Hc(s,r,l){var f=s.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=l;var v=s.baseQueue,b=f.pending;if(b!==null){if(v!==null){var S=v.next;v.next=b.next,b.next=S}r.baseQueue=v=b,f.pending=null}if(b=s.baseState,v===null)s.memoizedState=b;else{r=v.next;var C=S=null,k=null,q=r,Q=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(Ge&ne)===ne:(Ci&ne)===ne){var H=q.revertLane;if(H===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===Ks&&(Q=!0);else if((Ci&H)===H){q=q.next,H===Ks&&(Q=!0);continue}else ne={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(C=k=ne,S=b):k=k.next=ne,Ue.lanes|=H,Di|=H;ne=q.action,cs&&l(b,ne),b=q.hasEagerState?q.eagerState:l(b,ne)}else H={lane:ne,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(C=k=H,S=b):k=k.next=H,Ue.lanes|=ne,Di|=ne;q=q.next}while(q!==null&&q!==r);if(k===null?S=b:k.next=C,!nn(b,s.memoizedState)&&(kt=!0,Q&&(l=Qs,l!==null)))throw l;s.memoizedState=b,s.baseState=S,s.baseQueue=k,f.lastRenderedState=b}return v===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function $c(s){var r=wt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var f=l.dispatch,v=l.pending,b=r.memoizedState;if(v!==null){l.pending=null;var S=v=v.next;do b=s(b,S.action),S=S.next;while(S!==v);nn(b,r.memoizedState)||(kt=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),l.lastRenderedState=b}return[b,f]}function jm(s,r,l){var f=Ue,v=wt(),b=Ye;if(b){if(l===void 0)throw Error(i(407));l=l()}else l=r();var S=!nn((Ze||v).memoizedState,l);S&&(v.memoizedState=l,kt=!0),v=v.queue;var C=qm.bind(null,f,v,s);if(Cr(2048,8,C,[s]),v.getSnapshot!==r||S||St!==null&&St.memoizedState.tag&1){if(f.flags|=2048,eo(9,cl(),Om.bind(null,f,v,l,r),null),ot===null)throw Error(i(349));b||(Ci&124)!==0||Bm(f,r,l)}return l}function Bm(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Ue.updateQueue,r===null?(r=zc(),Ue.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function Om(s,r,l,f){r.value=l,r.getSnapshot=f,zm(r)&&Gm(s)}function qm(s,r,l){return l(function(){zm(r)&&Gm(s)})}function zm(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!nn(s,l)}catch{return!0}}function Gm(s){var r=$s(s,2);r!==null&&un(r,s,2)}function Fc(s){var r=Zt();if(typeof s=="function"){var l=s;if(s=l(),cs){pn(!0);try{l()}finally{pn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:s},r}function Hm(s,r,l,f){return s.baseState=l,Hc(s,Ze,typeof f=="function"?f:ti)}function $_(s,r,l,f,v){if(fl(s))throw Error(i(485));if(s=r.action,s!==null){var b={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};U.T!==null?l(!0):b.isTransition=!1,f(b),l=r.pending,l===null?(b.next=r.pending=b,$m(r,b)):(b.next=l.next,r.pending=l.next=b)}}function $m(s,r){var l=r.action,f=r.payload,v=s.state;if(r.isTransition){var b=U.T,S={};U.T=S;try{var C=l(v,f),k=U.S;k!==null&&k(S,C),Fm(s,r,C)}catch(q){Yc(s,r,q)}finally{U.T=b}}else try{b=l(v,f),Fm(s,r,b)}catch(q){Yc(s,r,q)}}function Fm(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){Ym(s,r,f)},function(f){return Yc(s,r,f)}):Ym(s,r,l)}function Ym(s,r,l){r.status="fulfilled",r.value=l,Jm(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,$m(s,l)))}function Yc(s,r,l){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=l,Jm(r),r=r.next;while(r!==f)}s.action=null}function Jm(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Km(s,r){return r}function Qm(s,r){if(Ye){var l=ot.formState;if(l!==null){e:{var f=Ue;if(Ye){if(gt){t:{for(var v=gt,b=Ln;v.nodeType!==8;){if(!b){v=null;break t}if(v=Rn(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){gt=Rn(v.nextSibling),f=v.data==="F!";break e}}rs(f)}f=!1}f&&(r=l[0])}}return l=Zt(),l.memoizedState=l.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Km,lastRenderedState:r},l.queue=f,l=mg.bind(null,Ue,f),f.dispatch=l,f=Fc(!1),b=Xc.bind(null,Ue,!1,f.queue),f=Zt(),v={state:r,dispatch:null,action:s,pending:null},f.queue=v,l=$_.bind(null,Ue,v,b,l),v.dispatch=l,f.memoizedState=s,[r,l,!1]}function Wm(s){var r=wt();return Xm(r,Ze,s)}function Xm(s,r,l){if(r=Hc(s,r,Km)[0],s=ul(ti)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=_r(r)}catch(S){throw S===vr?il:S}else f=r;r=wt();var v=r.queue,b=v.dispatch;return l!==r.memoizedState&&(Ue.flags|=2048,eo(9,cl(),F_.bind(null,v,l),null)),[f,b,s]}function F_(s,r){s.action=r}function Zm(s){var r=wt(),l=Ze;if(l!==null)return Xm(r,l,s);wt(),r=r.memoizedState,l=wt();var f=l.queue.dispatch;return l.memoizedState=s,[r,f,!1]}function eo(s,r,l,f){return s={tag:s,create:l,deps:f,inst:r,next:null},r=Ue.updateQueue,r===null&&(r=zc(),Ue.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(f=l.next,l.next=s,s.next=f,r.lastEffect=s),s}function cl(){return{destroy:void 0,resource:void 0}}function eg(){return wt().memoizedState}function dl(s,r,l,f){var v=Zt();f=f===void 0?null:f,Ue.flags|=s,v.memoizedState=eo(1|r,cl(),l,f)}function Cr(s,r,l,f){var v=wt();f=f===void 0?null:f;var b=v.memoizedState.inst;Ze!==null&&f!==null&&Vc(f,Ze.memoizedState.deps)?v.memoizedState=eo(r,b,l,f):(Ue.flags|=s,v.memoizedState=eo(1|r,b,l,f))}function tg(s,r){dl(8390656,8,s,r)}function ng(s,r){Cr(2048,8,s,r)}function ig(s,r){return Cr(4,2,s,r)}function sg(s,r){return Cr(4,4,s,r)}function og(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function rg(s,r,l){l=l!=null?l.concat([s]):null,Cr(4,4,og.bind(null,r,s),l)}function Jc(){}function ag(s,r){var l=wt();r=r===void 0?null:r;var f=l.memoizedState;return r!==null&&Vc(r,f[1])?f[0]:(l.memoizedState=[s,r],s)}function lg(s,r){var l=wt();r=r===void 0?null:r;var f=l.memoizedState;if(r!==null&&Vc(r,f[1]))return f[0];if(f=s(),cs){pn(!0);try{s()}finally{pn(!1)}}return l.memoizedState=[f,r],f}function Kc(s,r,l){return l===void 0||(Ci&1073741824)!==0?s.memoizedState=r:(s.memoizedState=l,s=dy(),Ue.lanes|=s,Di|=s,l)}function ug(s,r,l,f){return nn(l,r)?l:Ws.current!==null?(s=Kc(s,l,f),nn(s,r)||(kt=!0),s):(Ci&42)===0?(kt=!0,s.memoizedState=l):(s=dy(),Ue.lanes|=s,Di|=s,r)}function cg(s,r,l,f,v){var b=G.p;G.p=b!==0&&8>b?b:8;var S=U.T,C={};U.T=C,Xc(s,!1,r,l);try{var k=v(),q=U.S;if(q!==null&&q(C,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Q=z_(k,f);Er(s,r,Q,ln(s))}else Er(s,r,f,ln(s))}catch(ne){Er(s,r,{then:function(){},status:"rejected",reason:ne},ln())}finally{G.p=b,U.T=S}}function Y_(){}function Qc(s,r,l,f){if(s.tag!==5)throw Error(i(476));var v=dg(s).queue;cg(s,v,r,fe,l===null?Y_:function(){return fg(s),l(f)})}function dg(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:fe},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function fg(s){var r=dg(s).next.queue;Er(s,r,{},ln())}function Wc(){return Ht(Hr)}function hg(){return wt().memoizedState}function pg(){return wt().memoizedState}function J_(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=ln();s=wi(l);var f=_i(r,s,l);f!==null&&(un(f,r,l),br(f,r,l)),r={cache:Ac()},s.payload=r;return}r=r.return}}function K_(s,r,l){var f=ln();l={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},fl(s)?gg(r,l):(l=yc(s,r,l,f),l!==null&&(un(l,s,f),yg(l,r,f)))}function mg(s,r,l){var f=ln();Er(s,r,l,f)}function Er(s,r,l,f){var v={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(fl(s))gg(r,v);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var S=r.lastRenderedState,C=b(S,l);if(v.hasEagerState=!0,v.eagerState=C,nn(C,S))return Ka(s,r,v,0),ot===null&&Ja(),!1}catch{}finally{}if(l=yc(s,r,v,f),l!==null)return un(l,s,f),yg(l,r,f),!0}return!1}function Xc(s,r,l,f){if(f={lane:2,revertLane:Rd(),action:f,hasEagerState:!1,eagerState:null,next:null},fl(s)){if(r)throw Error(i(479))}else r=yc(s,l,f,2),r!==null&&un(r,s,2)}function fl(s){var r=s.alternate;return s===Ue||r!==null&&r===Ue}function gg(s,r){Xs=rl=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function yg(s,r,l){if((l&4194048)!==0){var f=r.lanes;f&=s.pendingLanes,l|=f,r.lanes=l,Cp(s,l)}}var hl={readContext:Ht,use:ll,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},vg={readContext:Ht,use:ll,useCallback:function(s,r){return Zt().memoizedState=[s,r===void 0?null:r],s},useContext:Ht,useEffect:tg,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,dl(4194308,4,og.bind(null,r,s),l)},useLayoutEffect:function(s,r){return dl(4194308,4,s,r)},useInsertionEffect:function(s,r){dl(4,2,s,r)},useMemo:function(s,r){var l=Zt();r=r===void 0?null:r;var f=s();if(cs){pn(!0);try{s()}finally{pn(!1)}}return l.memoizedState=[f,r],f},useReducer:function(s,r,l){var f=Zt();if(l!==void 0){var v=l(r);if(cs){pn(!0);try{l(r)}finally{pn(!1)}}}else v=r;return f.memoizedState=f.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},f.queue=s,s=s.dispatch=K_.bind(null,Ue,s),[f.memoizedState,s]},useRef:function(s){var r=Zt();return s={current:s},r.memoizedState=s},useState:function(s){s=Fc(s);var r=s.queue,l=mg.bind(null,Ue,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Jc,useDeferredValue:function(s,r){var l=Zt();return Kc(l,s,r)},useTransition:function(){var s=Fc(!1);return s=cg.bind(null,Ue,s.queue,!0,!1),Zt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var f=Ue,v=Zt();if(Ye){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ot===null)throw Error(i(349));(Ge&124)!==0||Bm(f,r,l)}v.memoizedState=l;var b={value:l,getSnapshot:r};return v.queue=b,tg(qm.bind(null,f,b,s),[s]),f.flags|=2048,eo(9,cl(),Om.bind(null,f,b,l,r),null),l},useId:function(){var s=Zt(),r=ot.identifierPrefix;if(Ye){var l=Xn,f=Wn;l=(f&~(1<<32-zt(f)-1)).toString(32)+l,r="«"+r+"R"+l,l=al++,0<l&&(r+="H"+l.toString(32)),r+="»"}else l=G_++,r="«"+r+"r"+l.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:Wc,useFormState:Qm,useActionState:Qm,useOptimistic:function(s){var r=Zt();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Xc.bind(null,Ue,!0,l),l.dispatch=r,[s,r]},useMemoCache:Gc,useCacheRefresh:function(){return Zt().memoizedState=J_.bind(null,Ue)}},xg={readContext:Ht,use:ll,useCallback:ag,useContext:Ht,useEffect:ng,useImperativeHandle:rg,useInsertionEffect:ig,useLayoutEffect:sg,useMemo:lg,useReducer:ul,useRef:eg,useState:function(){return ul(ti)},useDebugValue:Jc,useDeferredValue:function(s,r){var l=wt();return ug(l,Ze.memoizedState,s,r)},useTransition:function(){var s=ul(ti)[0],r=wt().memoizedState;return[typeof s=="boolean"?s:_r(s),r]},useSyncExternalStore:jm,useId:hg,useHostTransitionStatus:Wc,useFormState:Wm,useActionState:Wm,useOptimistic:function(s,r){var l=wt();return Hm(l,Ze,s,r)},useMemoCache:Gc,useCacheRefresh:pg},Q_={readContext:Ht,use:ll,useCallback:ag,useContext:Ht,useEffect:ng,useImperativeHandle:rg,useInsertionEffect:ig,useLayoutEffect:sg,useMemo:lg,useReducer:$c,useRef:eg,useState:function(){return $c(ti)},useDebugValue:Jc,useDeferredValue:function(s,r){var l=wt();return Ze===null?Kc(l,s,r):ug(l,Ze.memoizedState,s,r)},useTransition:function(){var s=$c(ti)[0],r=wt().memoizedState;return[typeof s=="boolean"?s:_r(s),r]},useSyncExternalStore:jm,useId:hg,useHostTransitionStatus:Wc,useFormState:Zm,useActionState:Zm,useOptimistic:function(s,r){var l=wt();return Ze!==null?Hm(l,Ze,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Gc,useCacheRefresh:pg},to=null,Ar=0;function pl(s){var r=Ar;return Ar+=1,to===null&&(to=[]),Rm(to,s,r)}function Nr(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function ml(s,r){throw r.$$typeof===x?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function bg(s){var r=s._init;return r(s._payload)}function Tg(s){function r(V,L){if(s){var O=V.deletions;O===null?(V.deletions=[L],V.flags|=16):O.push(L)}}function l(V,L){if(!s)return null;for(;L!==null;)r(V,L),L=L.sibling;return null}function f(V){for(var L=new Map;V!==null;)V.key!==null?L.set(V.key,V):L.set(V.index,V),V=V.sibling;return L}function v(V,L){return V=Qn(V,L),V.index=0,V.sibling=null,V}function b(V,L,O){return V.index=O,s?(O=V.alternate,O!==null?(O=O.index,O<L?(V.flags|=67108866,L):O):(V.flags|=67108866,L)):(V.flags|=1048576,L)}function S(V){return s&&V.alternate===null&&(V.flags|=67108866),V}function C(V,L,O,X){return L===null||L.tag!==6?(L=xc(O,V.mode,X),L.return=V,L):(L=v(L,O),L.return=V,L)}function k(V,L,O,X){var ve=O.type;return ve===_?Q(V,L,O.props.children,X,O.key):L!==null&&(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Z&&bg(ve)===L.type)?(L=v(L,O.props),Nr(L,O),L.return=V,L):(L=Wa(O.type,O.key,O.props,null,V.mode,X),Nr(L,O),L.return=V,L)}function q(V,L,O,X){return L===null||L.tag!==4||L.stateNode.containerInfo!==O.containerInfo||L.stateNode.implementation!==O.implementation?(L=bc(O,V.mode,X),L.return=V,L):(L=v(L,O.children||[]),L.return=V,L)}function Q(V,L,O,X,ve){return L===null||L.tag!==7?(L=ns(O,V.mode,X,ve),L.return=V,L):(L=v(L,O),L.return=V,L)}function ne(V,L,O){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=xc(""+L,V.mode,O),L.return=V,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case T:return O=Wa(L.type,L.key,L.props,null,V.mode,O),Nr(O,L),O.return=V,O;case w:return L=bc(L,V.mode,O),L.return=V,L;case Z:var X=L._init;return L=X(L._payload),ne(V,L,O)}if(oe(L)||ie(L))return L=ns(L,V.mode,O,null),L.return=V,L;if(typeof L.then=="function")return ne(V,pl(L),O);if(L.$$typeof===D)return ne(V,tl(V,L),O);ml(V,L)}return null}function H(V,L,O,X){var ve=L!==null?L.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return ve!==null?null:C(V,L,""+O,X);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case T:return O.key===ve?k(V,L,O,X):null;case w:return O.key===ve?q(V,L,O,X):null;case Z:return ve=O._init,O=ve(O._payload),H(V,L,O,X)}if(oe(O)||ie(O))return ve!==null?null:Q(V,L,O,X,null);if(typeof O.then=="function")return H(V,L,pl(O),X);if(O.$$typeof===D)return H(V,L,tl(V,O),X);ml(V,O)}return null}function $(V,L,O,X,ve){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return V=V.get(O)||null,C(L,V,""+X,ve);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case T:return V=V.get(X.key===null?O:X.key)||null,k(L,V,X,ve);case w:return V=V.get(X.key===null?O:X.key)||null,q(L,V,X,ve);case Z:var Ve=X._init;return X=Ve(X._payload),$(V,L,O,X,ve)}if(oe(X)||ie(X))return V=V.get(O)||null,Q(L,V,X,ve,null);if(typeof X.then=="function")return $(V,L,O,pl(X),ve);if(X.$$typeof===D)return $(V,L,O,tl(L,X),ve);ml(L,X)}return null}function Re(V,L,O,X){for(var ve=null,Ve=null,_e=L,Ne=L=0,It=null;_e!==null&&Ne<O.length;Ne++){_e.index>Ne?(It=_e,_e=null):It=_e.sibling;var $e=H(V,_e,O[Ne],X);if($e===null){_e===null&&(_e=It);break}s&&_e&&$e.alternate===null&&r(V,_e),L=b($e,L,Ne),Ve===null?ve=$e:Ve.sibling=$e,Ve=$e,_e=It}if(Ne===O.length)return l(V,_e),Ye&&ss(V,Ne),ve;if(_e===null){for(;Ne<O.length;Ne++)_e=ne(V,O[Ne],X),_e!==null&&(L=b(_e,L,Ne),Ve===null?ve=_e:Ve.sibling=_e,Ve=_e);return Ye&&ss(V,Ne),ve}for(_e=f(_e);Ne<O.length;Ne++)It=$(_e,V,Ne,O[Ne],X),It!==null&&(s&&It.alternate!==null&&_e.delete(It.key===null?Ne:It.key),L=b(It,L,Ne),Ve===null?ve=It:Ve.sibling=It,Ve=It);return s&&_e.forEach(function(qi){return r(V,qi)}),Ye&&ss(V,Ne),ve}function Ae(V,L,O,X){if(O==null)throw Error(i(151));for(var ve=null,Ve=null,_e=L,Ne=L=0,It=null,$e=O.next();_e!==null&&!$e.done;Ne++,$e=O.next()){_e.index>Ne?(It=_e,_e=null):It=_e.sibling;var qi=H(V,_e,$e.value,X);if(qi===null){_e===null&&(_e=It);break}s&&_e&&qi.alternate===null&&r(V,_e),L=b(qi,L,Ne),Ve===null?ve=qi:Ve.sibling=qi,Ve=qi,_e=It}if($e.done)return l(V,_e),Ye&&ss(V,Ne),ve;if(_e===null){for(;!$e.done;Ne++,$e=O.next())$e=ne(V,$e.value,X),$e!==null&&(L=b($e,L,Ne),Ve===null?ve=$e:Ve.sibling=$e,Ve=$e);return Ye&&ss(V,Ne),ve}for(_e=f(_e);!$e.done;Ne++,$e=O.next())$e=$(_e,V,Ne,$e.value,X),$e!==null&&(s&&$e.alternate!==null&&_e.delete($e.key===null?Ne:$e.key),L=b($e,L,Ne),Ve===null?ve=$e:Ve.sibling=$e,Ve=$e);return s&&_e.forEach(function(WC){return r(V,WC)}),Ye&&ss(V,Ne),ve}function tt(V,L,O,X){if(typeof O=="object"&&O!==null&&O.type===_&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case T:e:{for(var ve=O.key;L!==null;){if(L.key===ve){if(ve=O.type,ve===_){if(L.tag===7){l(V,L.sibling),X=v(L,O.props.children),X.return=V,V=X;break e}}else if(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Z&&bg(ve)===L.type){l(V,L.sibling),X=v(L,O.props),Nr(X,O),X.return=V,V=X;break e}l(V,L);break}else r(V,L);L=L.sibling}O.type===_?(X=ns(O.props.children,V.mode,X,O.key),X.return=V,V=X):(X=Wa(O.type,O.key,O.props,null,V.mode,X),Nr(X,O),X.return=V,V=X)}return S(V);case w:e:{for(ve=O.key;L!==null;){if(L.key===ve)if(L.tag===4&&L.stateNode.containerInfo===O.containerInfo&&L.stateNode.implementation===O.implementation){l(V,L.sibling),X=v(L,O.children||[]),X.return=V,V=X;break e}else{l(V,L);break}else r(V,L);L=L.sibling}X=bc(O,V.mode,X),X.return=V,V=X}return S(V);case Z:return ve=O._init,O=ve(O._payload),tt(V,L,O,X)}if(oe(O))return Re(V,L,O,X);if(ie(O)){if(ve=ie(O),typeof ve!="function")throw Error(i(150));return O=ve.call(O),Ae(V,L,O,X)}if(typeof O.then=="function")return tt(V,L,pl(O),X);if(O.$$typeof===D)return tt(V,L,tl(V,O),X);ml(V,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,L!==null&&L.tag===6?(l(V,L.sibling),X=v(L,O),X.return=V,V=X):(l(V,L),X=xc(O,V.mode,X),X.return=V,V=X),S(V)):l(V,L)}return function(V,L,O,X){try{Ar=0;var ve=tt(V,L,O,X);return to=null,ve}catch(_e){if(_e===vr||_e===il)throw _e;var Ve=sn(29,_e,null,V.mode);return Ve.lanes=X,Ve.return=V,Ve}finally{}}}var no=Tg(!0),Sg=Tg(!1),Tn=K(null),Un=null;function Ei(s){var r=s.alternate;he(Et,Et.current&1),he(Tn,s),Un===null&&(r===null||Ws.current!==null||r.memoizedState!==null)&&(Un=s)}function wg(s){if(s.tag===22){if(he(Et,Et.current),he(Tn,s),Un===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(Un=s)}}else Ai()}function Ai(){he(Et,Et.current),he(Tn,Tn.current)}function ni(s){pe(Tn),Un===s&&(Un=null),pe(Et)}var Et=K(0);function gl(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||zd(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Zc(s,r,l,f){r=s.memoizedState,l=l(f,r),l=l==null?r:y({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var ed={enqueueSetState:function(s,r,l){s=s._reactInternals;var f=ln(),v=wi(f);v.payload=r,l!=null&&(v.callback=l),r=_i(s,v,f),r!==null&&(un(r,s,f),br(r,s,f))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var f=ln(),v=wi(f);v.tag=1,v.payload=r,l!=null&&(v.callback=l),r=_i(s,v,f),r!==null&&(un(r,s,f),br(r,s,f))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=ln(),f=wi(l);f.tag=2,r!=null&&(f.callback=r),r=_i(s,f,l),r!==null&&(un(r,s,l),br(r,s,l))}};function _g(s,r,l,f,v,b,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,b,S):r.prototype&&r.prototype.isPureReactComponent?!cr(l,f)||!cr(v,b):!0}function Cg(s,r,l,f){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,f),r.state!==s&&ed.enqueueReplaceState(r,r.state,null)}function ds(s,r){var l=r;if("ref"in r){l={};for(var f in r)f!=="ref"&&(l[f]=r[f])}if(s=s.defaultProps){l===r&&(l=y({},l));for(var v in s)l[v]===void 0&&(l[v]=s[v])}return l}var yl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Eg(s){yl(s)}function Ag(s){console.error(s)}function Ng(s){yl(s)}function vl(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function Mg(s,r,l){try{var f=s.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function td(s,r,l){return l=wi(l),l.tag=3,l.payload={element:null},l.callback=function(){vl(s,r)},l}function Rg(s){return s=wi(s),s.tag=3,s}function kg(s,r,l,f){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var b=f.value;s.payload=function(){return v(b)},s.callback=function(){Mg(r,l,f)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Mg(r,l,f),typeof v!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var C=f.stack;this.componentDidCatch(f.value,{componentStack:C!==null?C:""})})}function W_(s,r,l,f,v){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=l.alternate,r!==null&&mr(r,l,v,!0),l=Tn.current,l!==null){switch(l.tag){case 13:return Un===null?Cd():l.alternate===null&&yt===0&&(yt=3),l.flags&=-257,l.flags|=65536,l.lanes=v,f===Rc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([f]):r.add(f),Ad(s,f,v)),!1;case 22:return l.flags|=65536,f===Rc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([f]):l.add(f)),Ad(s,f,v)),!1}throw Error(i(435,l.tag))}return Ad(s,f,v),Cd(),!1}if(Ye)return r=Tn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,f!==wc&&(s=Error(i(422),{cause:f}),pr(yn(s,l)))):(f!==wc&&(r=Error(i(423),{cause:f}),pr(yn(r,l))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,f=yn(f,l),v=td(s.stateNode,f,v),Ic(s,v),yt!==4&&(yt=2)),!1;var b=Error(i(520),{cause:f});if(b=yn(b,l),Lr===null?Lr=[b]:Lr.push(b),yt!==4&&(yt=2),r===null)return!0;f=yn(f,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=v&-v,l.lanes|=s,s=td(l.stateNode,f,s),Ic(l,s),!1;case 1:if(r=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ii===null||!Ii.has(b))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Rg(v),kg(v,s,l,f),Ic(l,v),!1}l=l.return}while(l!==null);return!1}var Dg=Error(i(461)),kt=!1;function Vt(s,r,l,f){r.child=s===null?Sg(r,null,l,f):no(r,s.child,l,f)}function Ig(s,r,l,f,v){l=l.render;var b=r.ref;if("ref"in f){var S={};for(var C in f)C!=="ref"&&(S[C]=f[C])}else S=f;return ls(r),f=jc(s,r,l,S,b,v),C=Bc(),s!==null&&!kt?(Oc(s,r,v),ii(s,r,v)):(Ye&&C&&Tc(r),r.flags|=1,Vt(s,r,f,v),r.child)}function Pg(s,r,l,f,v){if(s===null){var b=l.type;return typeof b=="function"&&!vc(b)&&b.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=b,Lg(s,r,b,f,v)):(s=Wa(l.type,null,f,r,r.mode,v),s.ref=r.ref,s.return=r,r.child=s)}if(b=s.child,!ud(s,v)){var S=b.memoizedProps;if(l=l.compare,l=l!==null?l:cr,l(S,f)&&s.ref===r.ref)return ii(s,r,v)}return r.flags|=1,s=Qn(b,f),s.ref=r.ref,s.return=r,r.child=s}function Lg(s,r,l,f,v){if(s!==null){var b=s.memoizedProps;if(cr(b,f)&&s.ref===r.ref)if(kt=!1,r.pendingProps=f=b,ud(s,v))(s.flags&131072)!==0&&(kt=!0);else return r.lanes=s.lanes,ii(s,r,v)}return nd(s,r,l,f,v)}function Ug(s,r,l){var f=r.pendingProps,v=f.children,b=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((r.flags&128)!==0){if(f=b!==null?b.baseLanes|l:l,s!==null){for(v=r.child=s.child,b=0;v!==null;)b=b|v.lanes|v.childLanes,v=v.sibling;r.childLanes=b&~f}else r.childLanes=0,r.child=null;return Vg(s,r,f,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&nl(r,b!==null?b.cachePool:null),b!==null?Lm(r,b):Lc(),wg(r);else return r.lanes=r.childLanes=536870912,Vg(s,r,b!==null?b.baseLanes|l:l,l)}else b!==null?(nl(r,b.cachePool),Lm(r,b),Ai(),r.memoizedState=null):(s!==null&&nl(r,null),Lc(),Ai());return Vt(s,r,v,l),r.child}function Vg(s,r,l,f){var v=Mc();return v=v===null?null:{parent:Ct._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},s!==null&&nl(r,null),Lc(),wg(r),s!==null&&mr(s,r,f,!0),null}function xl(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function nd(s,r,l,f,v){return ls(r),l=jc(s,r,l,f,void 0,v),f=Bc(),s!==null&&!kt?(Oc(s,r,v),ii(s,r,v)):(Ye&&f&&Tc(r),r.flags|=1,Vt(s,r,l,v),r.child)}function jg(s,r,l,f,v,b){return ls(r),r.updateQueue=null,l=Vm(r,f,l,v),Um(s),f=Bc(),s!==null&&!kt?(Oc(s,r,b),ii(s,r,b)):(Ye&&f&&Tc(r),r.flags|=1,Vt(s,r,l,b),r.child)}function Bg(s,r,l,f,v){if(ls(r),r.stateNode===null){var b=Fs,S=l.contextType;typeof S=="object"&&S!==null&&(b=Ht(S)),b=new l(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=ed,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},kc(r),S=l.contextType,b.context=typeof S=="object"&&S!==null?Ht(S):Fs,b.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Zc(r,l,S,f),b.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&ed.enqueueReplaceState(b,b.state,null),Sr(r,f,b,v),Tr(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(s===null){b=r.stateNode;var C=r.memoizedProps,k=ds(l,C);b.props=k;var q=b.context,Q=l.contextType;S=Fs,typeof Q=="object"&&Q!==null&&(S=Ht(Q));var ne=l.getDerivedStateFromProps;Q=typeof ne=="function"||typeof b.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,Q||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C||q!==S)&&Cg(r,b,f,S),Si=!1;var H=r.memoizedState;b.state=H,Sr(r,f,b,v),Tr(),q=r.memoizedState,C||H!==q||Si?(typeof ne=="function"&&(Zc(r,l,ne,f),q=r.memoizedState),(k=Si||_g(r,l,k,f,H,q,S))?(Q||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=q),b.props=f,b.state=q,b.context=S,f=k):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,Dc(s,r),S=r.memoizedProps,Q=ds(l,S),b.props=Q,ne=r.pendingProps,H=b.context,q=l.contextType,k=Fs,typeof q=="object"&&q!==null&&(k=Ht(q)),C=l.getDerivedStateFromProps,(q=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==ne||H!==k)&&Cg(r,b,f,k),Si=!1,H=r.memoizedState,b.state=H,Sr(r,f,b,v),Tr();var $=r.memoizedState;S!==ne||H!==$||Si||s!==null&&s.dependencies!==null&&el(s.dependencies)?(typeof C=="function"&&(Zc(r,l,C,f),$=r.memoizedState),(Q=Si||_g(r,l,Q,f,H,$,k)||s!==null&&s.dependencies!==null&&el(s.dependencies))?(q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,$,k),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,$,k)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===s.memoizedProps&&H===s.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&H===s.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=$),b.props=f,b.state=$,b.context=k,f=Q):(typeof b.componentDidUpdate!="function"||S===s.memoizedProps&&H===s.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&H===s.memoizedState||(r.flags|=1024),f=!1)}return b=f,xl(s,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,s!==null&&f?(r.child=no(r,s.child,null,v),r.child=no(r,null,l,v)):Vt(s,r,l,v),r.memoizedState=b.state,s=r.child):s=ii(s,r,v),s}function Og(s,r,l,f){return hr(),r.flags|=256,Vt(s,r,l,f),r.child}var id={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sd(s){return{baseLanes:s,cachePool:Am()}}function od(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Sn),s}function qg(s,r,l){var f=r.pendingProps,v=!1,b=(r.flags&128)!==0,S;if((S=b)||(S=s!==null&&s.memoizedState===null?!1:(Et.current&2)!==0),S&&(v=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ye){if(v?Ei(r):Ai(),Ye){var C=gt,k;if(k=C){e:{for(k=C,C=Ln;k.nodeType!==8;){if(!C){C=null;break e}if(k=Rn(k.nextSibling),k===null){C=null;break e}}C=k}C!==null?(r.memoizedState={dehydrated:C,treeContext:is!==null?{id:Wn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},k=sn(18,null,null,0),k.stateNode=C,k.return=r,r.child=k,Kt=r,gt=null,k=!0):k=!1}k||rs(r)}if(C=r.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return zd(C)?r.lanes=32:r.lanes=536870912,null;ni(r)}return C=f.children,f=f.fallback,v?(Ai(),v=r.mode,C=bl({mode:"hidden",children:C},v),f=ns(f,v,l,null),C.return=r,f.return=r,C.sibling=f,r.child=C,v=r.child,v.memoizedState=sd(l),v.childLanes=od(s,S,l),r.memoizedState=id,f):(Ei(r),rd(r,C))}if(k=s.memoizedState,k!==null&&(C=k.dehydrated,C!==null)){if(b)r.flags&256?(Ei(r),r.flags&=-257,r=ad(s,r,l)):r.memoizedState!==null?(Ai(),r.child=s.child,r.flags|=128,r=null):(Ai(),v=f.fallback,C=r.mode,f=bl({mode:"visible",children:f.children},C),v=ns(v,C,l,null),v.flags|=2,f.return=r,v.return=r,f.sibling=v,r.child=f,no(r,s.child,null,l),f=r.child,f.memoizedState=sd(l),f.childLanes=od(s,S,l),r.memoizedState=id,r=v);else if(Ei(r),zd(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var q=S.dgst;S=q,f=Error(i(419)),f.stack="",f.digest=S,pr({value:f,source:null,stack:null}),r=ad(s,r,l)}else if(kt||mr(s,r,l,!1),S=(l&s.childLanes)!==0,kt||S){if(S=ot,S!==null&&(f=l&-l,f=(f&42)!==0?1:Gu(f),f=(f&(S.suspendedLanes|l))!==0?0:f,f!==0&&f!==k.retryLane))throw k.retryLane=f,$s(s,f),un(S,s,f),Dg;C.data==="$?"||Cd(),r=ad(s,r,l)}else C.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,gt=Rn(C.nextSibling),Kt=r,Ye=!0,os=null,Ln=!1,s!==null&&(xn[bn++]=Wn,xn[bn++]=Xn,xn[bn++]=is,Wn=s.id,Xn=s.overflow,is=r),r=rd(r,f.children),r.flags|=4096);return r}return v?(Ai(),v=f.fallback,C=r.mode,k=s.child,q=k.sibling,f=Qn(k,{mode:"hidden",children:f.children}),f.subtreeFlags=k.subtreeFlags&65011712,q!==null?v=Qn(q,v):(v=ns(v,C,l,null),v.flags|=2),v.return=r,f.return=r,f.sibling=v,r.child=f,f=v,v=r.child,C=s.child.memoizedState,C===null?C=sd(l):(k=C.cachePool,k!==null?(q=Ct._currentValue,k=k.parent!==q?{parent:q,pool:q}:k):k=Am(),C={baseLanes:C.baseLanes|l,cachePool:k}),v.memoizedState=C,v.childLanes=od(s,S,l),r.memoizedState=id,f):(Ei(r),l=s.child,s=l.sibling,l=Qn(l,{mode:"visible",children:f.children}),l.return=r,l.sibling=null,s!==null&&(S=r.deletions,S===null?(r.deletions=[s],r.flags|=16):S.push(s)),r.child=l,r.memoizedState=null,l)}function rd(s,r){return r=bl({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function bl(s,r){return s=sn(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function ad(s,r,l){return no(r,s.child,null,l),s=rd(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function zg(s,r,l){s.lanes|=r;var f=s.alternate;f!==null&&(f.lanes|=r),Cc(s.return,r,l)}function ld(s,r,l,f,v){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=l,b.tailMode=v)}function Gg(s,r,l){var f=r.pendingProps,v=f.revealOrder,b=f.tail;if(Vt(s,r,f.children,l),f=Et.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&zg(s,l,r);else if(s.tag===19)zg(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(he(Et,f),v){case"forwards":for(l=r.child,v=null;l!==null;)s=l.alternate,s!==null&&gl(s)===null&&(v=l),l=l.sibling;l=v,l===null?(v=r.child,r.child=null):(v=l.sibling,l.sibling=null),ld(r,!1,v,l,b);break;case"backwards":for(l=null,v=r.child,r.child=null;v!==null;){if(s=v.alternate,s!==null&&gl(s)===null){r.child=v;break}s=v.sibling,v.sibling=l,l=v,v=s}ld(r,!0,l,null,b);break;case"together":ld(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ii(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Di|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(mr(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Qn(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Qn(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function ud(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&el(s)))}function X_(s,r,l){switch(r.tag){case 3:B(r,r.stateNode.containerInfo),Ti(r,Ct,s.memoizedState.cache),hr();break;case 27:case 5:Le(r);break;case 4:B(r,r.stateNode.containerInfo);break;case 10:Ti(r,r.type,r.memoizedProps.value);break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(Ei(r),r.flags|=128,null):(l&r.child.childLanes)!==0?qg(s,r,l):(Ei(r),s=ii(s,r,l),s!==null?s.sibling:null);Ei(r);break;case 19:var v=(s.flags&128)!==0;if(f=(l&r.childLanes)!==0,f||(mr(s,r,l,!1),f=(l&r.childLanes)!==0),v){if(f)return Gg(s,r,l);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),he(Et,Et.current),f)break;return null;case 22:case 23:return r.lanes=0,Ug(s,r,l);case 24:Ti(r,Ct,s.memoizedState.cache)}return ii(s,r,l)}function Hg(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)kt=!0;else{if(!ud(s,l)&&(r.flags&128)===0)return kt=!1,X_(s,r,l);kt=(s.flags&131072)!==0}else kt=!1,Ye&&(r.flags&1048576)!==0&&bm(r,Za,r.index);switch(r.lanes=0,r.tag){case 16:e:{s=r.pendingProps;var f=r.elementType,v=f._init;if(f=v(f._payload),r.type=f,typeof f=="function")vc(f)?(s=ds(f,s),r.tag=1,r=Bg(null,r,f,s,l)):(r.tag=0,r=nd(null,r,f,s,l));else{if(f!=null){if(v=f.$$typeof,v===j){r.tag=11,r=Ig(null,r,f,s,l);break e}else if(v===ee){r.tag=14,r=Pg(null,r,f,s,l);break e}}throw r=de(f)||f,Error(i(306,r,""))}}return r;case 0:return nd(s,r,r.type,r.pendingProps,l);case 1:return f=r.type,v=ds(f,r.pendingProps),Bg(s,r,f,v,l);case 3:e:{if(B(r,r.stateNode.containerInfo),s===null)throw Error(i(387));f=r.pendingProps;var b=r.memoizedState;v=b.element,Dc(s,r),Sr(r,f,null,l);var S=r.memoizedState;if(f=S.cache,Ti(r,Ct,f),f!==b.cache&&Ec(r,[Ct],l,!0),Tr(),f=S.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=Og(s,r,f,l);break e}else if(f!==v){v=yn(Error(i(424)),r),pr(v),r=Og(s,r,f,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(gt=Rn(s.firstChild),Kt=r,Ye=!0,os=null,Ln=!0,l=Sg(r,null,f,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(hr(),f===v){r=ii(s,r,l);break e}Vt(s,r,f,l)}r=r.child}return r;case 26:return xl(s,r),s===null?(l=Jy(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ye||(l=r.type,s=r.pendingProps,f=Pl(le.current).createElement(l),f[Gt]=r,f[Wt]=s,Bt(f,l,s),Rt(f),r.stateNode=f):r.memoizedState=Jy(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Le(r),s===null&&Ye&&(f=r.stateNode=$y(r.type,r.pendingProps,le.current),Kt=r,Ln=!0,v=gt,Ui(r.type)?(Gd=v,gt=Rn(f.firstChild)):gt=v),Vt(s,r,r.pendingProps.children,l),xl(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ye&&((v=f=gt)&&(f=EC(f,r.type,r.pendingProps,Ln),f!==null?(r.stateNode=f,Kt=r,gt=Rn(f.firstChild),Ln=!1,v=!0):v=!1),v||rs(r)),Le(r),v=r.type,b=r.pendingProps,S=s!==null?s.memoizedProps:null,f=b.children,Bd(v,b)?f=null:S!==null&&Bd(v,S)&&(r.flags|=32),r.memoizedState!==null&&(v=jc(s,r,H_,null,null,l),Hr._currentValue=v),xl(s,r),Vt(s,r,f,l),r.child;case 6:return s===null&&Ye&&((s=l=gt)&&(l=AC(l,r.pendingProps,Ln),l!==null?(r.stateNode=l,Kt=r,gt=null,s=!0):s=!1),s||rs(r)),null;case 13:return qg(s,r,l);case 4:return B(r,r.stateNode.containerInfo),f=r.pendingProps,s===null?r.child=no(r,null,f,l):Vt(s,r,f,l),r.child;case 11:return Ig(s,r,r.type,r.pendingProps,l);case 7:return Vt(s,r,r.pendingProps,l),r.child;case 8:return Vt(s,r,r.pendingProps.children,l),r.child;case 12:return Vt(s,r,r.pendingProps.children,l),r.child;case 10:return f=r.pendingProps,Ti(r,r.type,f.value),Vt(s,r,f.children,l),r.child;case 9:return v=r.type._context,f=r.pendingProps.children,ls(r),v=Ht(v),f=f(v),r.flags|=1,Vt(s,r,f,l),r.child;case 14:return Pg(s,r,r.type,r.pendingProps,l);case 15:return Lg(s,r,r.type,r.pendingProps,l);case 19:return Gg(s,r,l);case 31:return f=r.pendingProps,l=r.mode,f={mode:f.mode,children:f.children},s===null?(l=bl(f,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=Qn(s.child,f),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return Ug(s,r,l);case 24:return ls(r),f=Ht(Ct),s===null?(v=Mc(),v===null&&(v=ot,b=Ac(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=l),v=b),r.memoizedState={parent:f,cache:v},kc(r),Ti(r,Ct,v)):((s.lanes&l)!==0&&(Dc(s,r),Sr(r,null,null,l),Tr()),v=s.memoizedState,b=r.memoizedState,v.parent!==f?(v={parent:f,cache:f},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Ti(r,Ct,f)):(f=b.cache,Ti(r,Ct,f),f!==v.cache&&Ec(r,[Ct],l,!0))),Vt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function si(s){s.flags|=4}function $g(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Zy(r)){if(r=Tn.current,r!==null&&((Ge&4194048)===Ge?Un!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==Un))throw xr=Rc,Nm;s.flags|=8192}}function Tl(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?wp():536870912,s.lanes|=r,ro|=r)}function Mr(s,r){if(!Ye)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function ft(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,f=0;if(r)for(var v=s.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=f,s.childLanes=l,r}function Z_(s,r,l){var f=r.pendingProps;switch(Sc(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return l=r.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),ei(Ct),me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(fr(r)?si(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,wm())),ft(r),null;case 26:return l=r.memoizedState,s===null?(si(r),l!==null?(ft(r),$g(r,l)):(ft(r),r.flags&=-16777217)):l?l!==s.memoizedState?(si(r),ft(r),$g(r,l)):(ft(r),r.flags&=-16777217):(s.memoizedProps!==f&&si(r),ft(r),r.flags&=-16777217),null;case 27:se(r),l=le.current;var v=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==f&&si(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return ft(r),null}s=ae.current,fr(r)?Tm(r):(s=$y(v,f,l),r.stateNode=s,si(r))}return ft(r),null;case 5:if(se(r),l=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==f&&si(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return ft(r),null}if(s=ae.current,fr(r))Tm(r);else{switch(v=Pl(le.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?v.createElement(l,{is:f.is}):v.createElement(l)}}s[Gt]=r,s[Wt]=f;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=s;e:switch(Bt(s,l,f),l){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&si(r)}}return ft(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==f&&si(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(i(166));if(s=le.current,fr(r)){if(s=r.stateNode,l=r.memoizedProps,f=null,v=Kt,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}s[Gt]=r,s=!!(s.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||jy(s.nodeValue,l)),s||rs(r)}else s=Pl(s).createTextNode(f),s[Gt]=r,r.stateNode=s}return ft(r),null;case 13:if(f=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=fr(r),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Gt]=r}else hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),v=!1}else v=wm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(ni(r),r):(ni(r),null)}if(ni(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=f!==null,s=s!==null&&s.memoizedState!==null,l){f=r.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048)}return l!==s&&l&&(r.child.flags|=8192),Tl(r,r.updateQueue),ft(r),null;case 4:return me(),s===null&&Pd(r.stateNode.containerInfo),ft(r),null;case 10:return ei(r.type),ft(r),null;case 19:if(pe(Et),v=r.memoizedState,v===null)return ft(r),null;if(f=(r.flags&128)!==0,b=v.rendering,b===null)if(f)Mr(v,!1);else{if(yt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(b=gl(s),b!==null){for(r.flags|=128,Mr(v,!1),s=b.updateQueue,r.updateQueue=s,Tl(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)xm(l,s),l=l.sibling;return he(Et,Et.current&1|2),r.child}s=s.sibling}v.tail!==null&&we()>_l&&(r.flags|=128,f=!0,Mr(v,!1),r.lanes=4194304)}else{if(!f)if(s=gl(b),s!==null){if(r.flags|=128,f=!0,s=s.updateQueue,r.updateQueue=s,Tl(r,s),Mr(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!Ye)return ft(r),null}else 2*we()-v.renderingStartTime>_l&&l!==536870912&&(r.flags|=128,f=!0,Mr(v,!1),r.lanes=4194304);v.isBackwards?(b.sibling=r.child,r.child=b):(s=v.last,s!==null?s.sibling=b:r.child=b,v.last=b)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=we(),r.sibling=null,s=Et.current,he(Et,f?s&1|2:s&1),r):(ft(r),null);case 22:case 23:return ni(r),Uc(),f=r.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(l&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),l=r.updateQueue,l!==null&&Tl(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==l&&(r.flags|=2048),s!==null&&pe(us),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ei(Ct),ft(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function eC(s,r){switch(Sc(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return ei(Ct),me(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return se(r),null;case 13:if(ni(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));hr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return pe(Et),null;case 4:return me(),null;case 10:return ei(r.type),null;case 22:case 23:return ni(r),Uc(),s!==null&&pe(us),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return ei(Ct),null;case 25:return null;default:return null}}function Fg(s,r){switch(Sc(r),r.tag){case 3:ei(Ct),me();break;case 26:case 27:case 5:se(r);break;case 4:me();break;case 13:ni(r);break;case 19:pe(Et);break;case 10:ei(r.type);break;case 22:case 23:ni(r),Uc(),s!==null&&pe(us);break;case 24:ei(Ct)}}function Rr(s,r){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&s)===s){f=void 0;var b=l.create,S=l.inst;f=b(),S.destroy=f}l=l.next}while(l!==v)}}catch(C){it(r,r.return,C)}}function Ni(s,r,l){try{var f=r.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var b=v.next;f=b;do{if((f.tag&s)===s){var S=f.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,v=r;var k=l,q=C;try{q()}catch(Q){it(v,k,Q)}}}f=f.next}while(f!==b)}}catch(Q){it(r,r.return,Q)}}function Yg(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{Pm(r,l)}catch(f){it(s,s.return,f)}}}function Jg(s,r,l){l.props=ds(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(f){it(s,r,f)}}function kr(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof l=="function"?s.refCleanup=l(f):l.current=f}}catch(v){it(s,r,v)}}function Vn(s,r){var l=s.ref,f=s.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(v){it(s,r,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){it(s,r,v)}else l.current=null}function Kg(s){var r=s.type,l=s.memoizedProps,f=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(v){it(s,s.return,v)}}function cd(s,r,l){try{var f=s.stateNode;TC(f,s.type,l,r),f[Wt]=r}catch(v){it(s,s.return,v)}}function Qg(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ui(s.type)||s.tag===4}function dd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Qg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ui(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function fd(s,r,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Il));else if(f!==4&&(f===27&&Ui(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(fd(s,r,l),s=s.sibling;s!==null;)fd(s,r,l),s=s.sibling}function Sl(s,r,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(f!==4&&(f===27&&Ui(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Sl(s,r,l),s=s.sibling;s!==null;)Sl(s,r,l),s=s.sibling}function Wg(s){var r=s.stateNode,l=s.memoizedProps;try{for(var f=s.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Bt(r,f,l),r[Gt]=s,r[Wt]=l}catch(b){it(s,s.return,b)}}var oi=!1,bt=!1,hd=!1,Xg=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function tC(s,r){if(s=s.containerInfo,Vd=Ol,s=um(s),dc(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var S=0,C=-1,k=-1,q=0,Q=0,ne=s,H=null;t:for(;;){for(var $;ne!==l||v!==0&&ne.nodeType!==3||(C=S+v),ne!==b||f!==0&&ne.nodeType!==3||(k=S+f),ne.nodeType===3&&(S+=ne.nodeValue.length),($=ne.firstChild)!==null;)H=ne,ne=$;for(;;){if(ne===s)break t;if(H===l&&++q===v&&(C=S),H===b&&++Q===f&&(k=S),($=ne.nextSibling)!==null)break;ne=H,H=ne.parentNode}ne=$}l=C===-1||k===-1?null:{start:C,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(jd={focusedElem:s,selectionRange:l},Ol=!1,Dt=r;Dt!==null;)if(r=Dt,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Dt=s;else for(;Dt!==null;){switch(r=Dt,b=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,l=r,v=b.memoizedProps,b=b.memoizedState,f=l.stateNode;try{var Re=ds(l.type,v,l.elementType===l.type);s=f.getSnapshotBeforeUpdate(Re,b),f.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){it(l,l.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)qd(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":qd(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Dt=s;break}Dt=r.return}}function Zg(s,r,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Mi(s,l),f&4&&Rr(5,l);break;case 1:if(Mi(s,l),f&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(S){it(l,l.return,S)}else{var v=ds(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(v,r,s.__reactInternalSnapshotBeforeUpdate)}catch(S){it(l,l.return,S)}}f&64&&Yg(l),f&512&&kr(l,l.return);break;case 3:if(Mi(s,l),f&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Pm(s,r)}catch(S){it(l,l.return,S)}}break;case 27:r===null&&f&4&&Wg(l);case 26:case 5:Mi(s,l),r===null&&f&4&&Kg(l),f&512&&kr(l,l.return);break;case 12:Mi(s,l);break;case 13:Mi(s,l),f&4&&ny(s,l),f&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=cC.bind(null,l),NC(s,l))));break;case 22:if(f=l.memoizedState!==null||oi,!f){r=r!==null&&r.memoizedState!==null||bt,v=oi;var b=bt;oi=f,(bt=r)&&!b?Ri(s,l,(l.subtreeFlags&8772)!==0):Mi(s,l),oi=v,bt=b}break;case 30:break;default:Mi(s,l)}}function ey(s){var r=s.alternate;r!==null&&(s.alternate=null,ey(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Fu(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dt=null,en=!1;function ri(s,r,l){for(l=l.child;l!==null;)ty(s,r,l),l=l.sibling}function ty(s,r,l){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(ut,l)}catch{}switch(l.tag){case 26:bt||Vn(l,r),ri(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:bt||Vn(l,r);var f=dt,v=en;Ui(l.type)&&(dt=l.stateNode,en=!1),ri(s,r,l),Or(l.stateNode),dt=f,en=v;break;case 5:bt||Vn(l,r);case 6:if(f=dt,v=en,dt=null,ri(s,r,l),dt=f,en=v,dt!==null)if(en)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(l.stateNode)}catch(b){it(l,r,b)}else try{dt.removeChild(l.stateNode)}catch(b){it(l,r,b)}break;case 18:dt!==null&&(en?(s=dt,Gy(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Jr(s)):Gy(dt,l.stateNode));break;case 4:f=dt,v=en,dt=l.stateNode.containerInfo,en=!0,ri(s,r,l),dt=f,en=v;break;case 0:case 11:case 14:case 15:bt||Ni(2,l,r),bt||Ni(4,l,r),ri(s,r,l);break;case 1:bt||(Vn(l,r),f=l.stateNode,typeof f.componentWillUnmount=="function"&&Jg(l,r,f)),ri(s,r,l);break;case 21:ri(s,r,l);break;case 22:bt=(f=bt)||l.memoizedState!==null,ri(s,r,l),bt=f;break;default:ri(s,r,l)}}function ny(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Jr(s)}catch(l){it(r,r.return,l)}}function nC(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Xg),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Xg),r;default:throw Error(i(435,s.tag))}}function pd(s,r){var l=nC(s);r.forEach(function(f){var v=dC.bind(null,s,f);l.has(f)||(l.add(f),f.then(v,v))})}function on(s,r){var l=r.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f],b=s,S=r,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(Ui(C.type)){dt=C.stateNode,en=!1;break e}break;case 5:dt=C.stateNode,en=!1;break e;case 3:case 4:dt=C.stateNode.containerInfo,en=!0;break e}C=C.return}if(dt===null)throw Error(i(160));ty(b,S,v),dt=null,en=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)iy(r,s),r=r.sibling}var Mn=null;function iy(s,r){var l=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:on(r,s),rn(s),f&4&&(Ni(3,s,s.return),Rr(3,s),Ni(5,s,s.return));break;case 1:on(r,s),rn(s),f&512&&(bt||l===null||Vn(l,l.return)),f&64&&oi&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var v=Mn;if(on(r,s),rn(s),f&512&&(bt||l===null||Vn(l,l.return)),f&4){var b=l!==null?l.memoizedState:null;if(f=s.memoizedState,l===null)if(f===null)if(s.stateNode===null){e:{f=s.type,l=s.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":b=v.getElementsByTagName("title")[0],(!b||b[tr]||b[Gt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(f),v.head.insertBefore(b,v.querySelector("head > title"))),Bt(b,f,l),b[Gt]=s,Rt(b),f=b;break e;case"link":var S=Wy("link","href",v).get(f+(l.href||""));if(S){for(var C=0;C<S.length;C++)if(b=S[C],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(C,1);break t}}b=v.createElement(f),Bt(b,f,l),v.head.appendChild(b);break;case"meta":if(S=Wy("meta","content",v).get(f+(l.content||""))){for(C=0;C<S.length;C++)if(b=S[C],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(C,1);break t}}b=v.createElement(f),Bt(b,f,l),v.head.appendChild(b);break;default:throw Error(i(468,f))}b[Gt]=s,Rt(b),f=b}s.stateNode=f}else Xy(v,s.type,s.stateNode);else s.stateNode=Qy(v,f,s.memoizedProps);else b!==f?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,f===null?Xy(v,s.type,s.stateNode):Qy(v,f,s.memoizedProps)):f===null&&s.stateNode!==null&&cd(s,s.memoizedProps,l.memoizedProps)}break;case 27:on(r,s),rn(s),f&512&&(bt||l===null||Vn(l,l.return)),l!==null&&f&4&&cd(s,s.memoizedProps,l.memoizedProps);break;case 5:if(on(r,s),rn(s),f&512&&(bt||l===null||Vn(l,l.return)),s.flags&32){v=s.stateNode;try{js(v,"")}catch($){it(s,s.return,$)}}f&4&&s.stateNode!=null&&(v=s.memoizedProps,cd(s,v,l!==null?l.memoizedProps:v)),f&1024&&(hd=!0);break;case 6:if(on(r,s),rn(s),f&4){if(s.stateNode===null)throw Error(i(162));f=s.memoizedProps,l=s.stateNode;try{l.nodeValue=f}catch($){it(s,s.return,$)}}break;case 3:if(Vl=null,v=Mn,Mn=Ll(r.containerInfo),on(r,s),Mn=v,rn(s),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Jr(r.containerInfo)}catch($){it(s,s.return,$)}hd&&(hd=!1,sy(s));break;case 4:f=Mn,Mn=Ll(s.stateNode.containerInfo),on(r,s),rn(s),Mn=f;break;case 12:on(r,s),rn(s);break;case 13:on(r,s),rn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(bd=we()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,pd(s,f)));break;case 22:v=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,q=oi,Q=bt;if(oi=q||v,bt=Q||k,on(r,s),bt=Q,oi=q,rn(s),f&8192)e:for(r=s.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(l===null||k||oi||bt||fs(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){k=l=r;try{if(b=k.stateNode,v)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=k.stateNode;var ne=k.memoizedProps.style,H=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;C.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch($){it(k,k.return,$)}}}else if(r.tag===6){if(l===null){k=r;try{k.stateNode.nodeValue=v?"":k.memoizedProps}catch($){it(k,k.return,$)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=s.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,pd(s,l))));break;case 19:on(r,s),rn(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,pd(s,f)));break;case 30:break;case 21:break;default:on(r,s),rn(s)}}function rn(s){var r=s.flags;if(r&2){try{for(var l,f=s.return;f!==null;){if(Qg(f)){l=f;break}f=f.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,b=dd(s);Sl(s,b,v);break;case 5:var S=l.stateNode;l.flags&32&&(js(S,""),l.flags&=-33);var C=dd(s);Sl(s,C,S);break;case 3:case 4:var k=l.stateNode.containerInfo,q=dd(s);fd(s,q,k);break;default:throw Error(i(161))}}catch(Q){it(s,s.return,Q)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function sy(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;sy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Mi(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Zg(s,r.alternate,r),r=r.sibling}function fs(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ni(4,r,r.return),fs(r);break;case 1:Vn(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Jg(r,r.return,l),fs(r);break;case 27:Or(r.stateNode);case 26:case 5:Vn(r,r.return),fs(r);break;case 22:r.memoizedState===null&&fs(r);break;case 30:fs(r);break;default:fs(r)}s=s.sibling}}function Ri(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,v=s,b=r,S=b.flags;switch(b.tag){case 0:case 11:case 15:Ri(v,b,l),Rr(4,b);break;case 1:if(Ri(v,b,l),f=b,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(q){it(f,f.return,q)}if(f=b,v=f.updateQueue,v!==null){var C=f.stateNode;try{var k=v.shared.hiddenCallbacks;if(k!==null)for(v.shared.hiddenCallbacks=null,v=0;v<k.length;v++)Im(k[v],C)}catch(q){it(f,f.return,q)}}l&&S&64&&Yg(b),kr(b,b.return);break;case 27:Wg(b);case 26:case 5:Ri(v,b,l),l&&f===null&&S&4&&Kg(b),kr(b,b.return);break;case 12:Ri(v,b,l);break;case 13:Ri(v,b,l),l&&S&4&&ny(v,b);break;case 22:b.memoizedState===null&&Ri(v,b,l),kr(b,b.return);break;case 30:break;default:Ri(v,b,l)}r=r.sibling}}function md(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&gr(l))}function gd(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&gr(s))}function jn(s,r,l,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)oy(s,r,l,f),r=r.sibling}function oy(s,r,l,f){var v=r.flags;switch(r.tag){case 0:case 11:case 15:jn(s,r,l,f),v&2048&&Rr(9,r);break;case 1:jn(s,r,l,f);break;case 3:jn(s,r,l,f),v&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&gr(s)));break;case 12:if(v&2048){jn(s,r,l,f),s=r.stateNode;try{var b=r.memoizedProps,S=b.id,C=b.onPostCommit;typeof C=="function"&&C(S,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){it(r,r.return,k)}}else jn(s,r,l,f);break;case 13:jn(s,r,l,f);break;case 23:break;case 22:b=r.stateNode,S=r.alternate,r.memoizedState!==null?b._visibility&2?jn(s,r,l,f):Dr(s,r):b._visibility&2?jn(s,r,l,f):(b._visibility|=2,io(s,r,l,f,(r.subtreeFlags&10256)!==0)),v&2048&&md(S,r);break;case 24:jn(s,r,l,f),v&2048&&gd(r.alternate,r);break;default:jn(s,r,l,f)}}function io(s,r,l,f,v){for(v=v&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var b=s,S=r,C=l,k=f,q=S.flags;switch(S.tag){case 0:case 11:case 15:io(b,S,C,k,v),Rr(8,S);break;case 23:break;case 22:var Q=S.stateNode;S.memoizedState!==null?Q._visibility&2?io(b,S,C,k,v):Dr(b,S):(Q._visibility|=2,io(b,S,C,k,v)),v&&q&2048&&md(S.alternate,S);break;case 24:io(b,S,C,k,v),v&&q&2048&&gd(S.alternate,S);break;default:io(b,S,C,k,v)}r=r.sibling}}function Dr(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,f=r,v=f.flags;switch(f.tag){case 22:Dr(l,f),v&2048&&md(f.alternate,f);break;case 24:Dr(l,f),v&2048&&gd(f.alternate,f);break;default:Dr(l,f)}r=r.sibling}}var Ir=8192;function so(s){if(s.subtreeFlags&Ir)for(s=s.child;s!==null;)ry(s),s=s.sibling}function ry(s){switch(s.tag){case 26:so(s),s.flags&Ir&&s.memoizedState!==null&&qC(Mn,s.memoizedState,s.memoizedProps);break;case 5:so(s);break;case 3:case 4:var r=Mn;Mn=Ll(s.stateNode.containerInfo),so(s),Mn=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Ir,Ir=16777216,so(s),Ir=r):so(s));break;default:so(s)}}function ay(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Pr(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var f=r[l];Dt=f,uy(f,s)}ay(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ly(s),s=s.sibling}function ly(s){switch(s.tag){case 0:case 11:case 15:Pr(s),s.flags&2048&&Ni(9,s,s.return);break;case 3:Pr(s);break;case 12:Pr(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,wl(s)):Pr(s);break;default:Pr(s)}}function wl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var f=r[l];Dt=f,uy(f,s)}ay(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ni(8,r,r.return),wl(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,wl(r));break;default:wl(r)}s=s.sibling}}function uy(s,r){for(;Dt!==null;){var l=Dt;switch(l.tag){case 0:case 11:case 15:Ni(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:gr(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Dt=f;else e:for(l=s;Dt!==null;){f=Dt;var v=f.sibling,b=f.return;if(ey(f),f===l){Dt=null;break e}if(v!==null){v.return=b,Dt=v;break e}Dt=b}}}var iC={getCacheForType:function(s){var r=Ht(Ct),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l}},sC=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ot=null,Oe=null,Ge=0,We=0,an=null,ki=!1,oo=!1,yd=!1,ai=0,yt=0,Di=0,hs=0,vd=0,Sn=0,ro=0,Lr=null,tn=null,xd=!1,bd=0,_l=1/0,Cl=null,Ii=null,jt=0,Pi=null,ao=null,lo=0,Td=0,Sd=null,cy=null,Ur=0,wd=null;function ln(){if((Qe&2)!==0&&Ge!==0)return Ge&-Ge;if(U.T!==null){var s=Ks;return s!==0?s:Rd()}return Ep()}function dy(){Sn===0&&(Sn=(Ge&536870912)===0||Ye?Sp():536870912);var s=Tn.current;return s!==null&&(s.flags|=32),Sn}function un(s,r,l){(s===ot&&(We===2||We===9)||s.cancelPendingCommit!==null)&&(uo(s,0),Li(s,Ge,Sn,!1)),er(s,l),((Qe&2)===0||s!==ot)&&(s===ot&&((Qe&2)===0&&(hs|=l),yt===4&&Li(s,Ge,Sn,!1)),Bn(s))}function fy(s,r,l){if((Qe&6)!==0)throw Error(i(327));var f=!l&&(r&124)===0&&(r&s.expiredLanes)===0||Zo(s,r),v=f?aC(s,r):Ed(s,r,!0),b=f;do{if(v===0){oo&&!f&&Li(s,r,0,!1);break}else{if(l=s.current.alternate,b&&!oC(l)){v=Ed(s,r,!1),b=!1;continue}if(v===2){if(b=r,s.errorRecoveryDisabledLanes&b)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var C=s;v=Lr;var k=C.current.memoizedState.isDehydrated;if(k&&(uo(C,S).flags|=256),S=Ed(C,S,!1),S!==2){if(yd&&!k){C.errorRecoveryDisabledLanes|=b,hs|=b,v=4;break e}b=tn,tn=v,b!==null&&(tn===null?tn=b:tn.push.apply(tn,b))}v=S}if(b=!1,v!==2)continue}}if(v===1){uo(s,0),Li(s,r,0,!0);break}e:{switch(f=s,b=v,b){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Li(f,r,Sn,!ki);break e;case 2:tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=bd+300-we(),10<v)){if(Li(f,r,Sn,!ki),Ua(f,0,!0)!==0)break e;f.timeoutHandle=qy(hy.bind(null,f,l,tn,Cl,xd,r,Sn,hs,ro,ki,b,2,-0,0),v);break e}hy(f,l,tn,Cl,xd,r,Sn,hs,ro,ki,b,0,-0,0)}}break}while(!0);Bn(s)}function hy(s,r,l,f,v,b,S,C,k,q,Q,ne,H,$){if(s.timeoutHandle=-1,ne=r.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Gr={stylesheets:null,count:0,unsuspend:OC},ry(r),ne=zC(),ne!==null)){s.cancelPendingCommit=ne(by.bind(null,s,r,b,l,f,v,S,C,k,Q,1,H,$)),Li(s,b,S,!q);return}by(s,r,b,l,f,v,S,C,k)}function oC(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var v=l[f],b=v.getSnapshot;v=v.value;try{if(!nn(b(),v))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Li(s,r,l,f){r&=~vd,r&=~hs,s.suspendedLanes|=r,s.pingedLanes&=~r,f&&(s.warmLanes|=r),f=s.expirationTimes;for(var v=r;0<v;){var b=31-zt(v),S=1<<b;f[b]=-1,v&=~S}l!==0&&_p(s,l,r)}function El(){return(Qe&6)===0?(Vr(0),!1):!0}function _d(){if(Oe!==null){if(We===0)var s=Oe.return;else s=Oe,Zn=as=null,qc(s),to=null,Ar=0,s=Oe;for(;s!==null;)Fg(s.alternate,s),s=s.return;Oe=null}}function uo(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,wC(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),_d(),ot=s,Oe=l=Qn(s.current,null),Ge=r,We=0,an=null,ki=!1,oo=Zo(s,r),yd=!1,ro=Sn=vd=hs=Di=yt=0,tn=Lr=null,xd=!1,(r&8)!==0&&(r|=r&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=r;0<f;){var v=31-zt(f),b=1<<v;r|=s[v],f&=~b}return ai=r,Ja(),l}function py(s,r){Ue=null,U.H=hl,r===vr||r===il?(r=km(),We=3):r===Nm?(r=km(),We=4):We=r===Dg?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,an=r,Oe===null&&(yt=1,vl(s,yn(r,s.current)))}function my(){var s=U.H;return U.H=hl,s===null?hl:s}function gy(){var s=U.A;return U.A=iC,s}function Cd(){yt=4,ki||(Ge&4194048)!==Ge&&Tn.current!==null||(oo=!0),(Di&134217727)===0&&(hs&134217727)===0||ot===null||Li(ot,Ge,Sn,!1)}function Ed(s,r,l){var f=Qe;Qe|=2;var v=my(),b=gy();(ot!==s||Ge!==r)&&(Cl=null,uo(s,r)),r=!1;var S=yt;e:do try{if(We!==0&&Oe!==null){var C=Oe,k=an;switch(We){case 8:_d(),S=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(r=!0);var q=We;if(We=0,an=null,co(s,C,k,q),l&&oo){S=0;break e}break;default:q=We,We=0,an=null,co(s,C,k,q)}}rC(),S=yt;break}catch(Q){py(s,Q)}while(!0);return r&&s.shellSuspendCounter++,Zn=as=null,Qe=f,U.H=v,U.A=b,Oe===null&&(ot=null,Ge=0,Ja()),S}function rC(){for(;Oe!==null;)yy(Oe)}function aC(s,r){var l=Qe;Qe|=2;var f=my(),v=gy();ot!==s||Ge!==r?(Cl=null,_l=we()+500,uo(s,r)):oo=Zo(s,r);e:do try{if(We!==0&&Oe!==null){r=Oe;var b=an;t:switch(We){case 1:We=0,an=null,co(s,r,b,1);break;case 2:case 9:if(Mm(b)){We=0,an=null,vy(r);break}r=function(){We!==2&&We!==9||ot!==s||(We=7),Bn(s)},b.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Mm(b)?(We=0,an=null,vy(r)):(We=0,an=null,co(s,r,b,7));break;case 5:var S=null;switch(Oe.tag){case 26:S=Oe.memoizedState;case 5:case 27:var C=Oe;if(!S||Zy(S)){We=0,an=null;var k=C.sibling;if(k!==null)Oe=k;else{var q=C.return;q!==null?(Oe=q,Al(q)):Oe=null}break t}}We=0,an=null,co(s,r,b,5);break;case 6:We=0,an=null,co(s,r,b,6);break;case 8:_d(),yt=6;break e;default:throw Error(i(462))}}lC();break}catch(Q){py(s,Q)}while(!0);return Zn=as=null,U.H=f,U.A=v,Qe=l,Oe!==null?0:(ot=null,Ge=0,Ja(),yt)}function lC(){for(;Oe!==null&&!ue();)yy(Oe)}function yy(s){var r=Hg(s.alternate,s,ai);s.memoizedProps=s.pendingProps,r===null?Al(s):Oe=r}function vy(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=jg(l,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=jg(l,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:qc(r);default:Fg(l,r),r=Oe=xm(r,ai),r=Hg(l,r,ai)}s.memoizedProps=s.pendingProps,r===null?Al(s):Oe=r}function co(s,r,l,f){Zn=as=null,qc(r),to=null,Ar=0;var v=r.return;try{if(W_(s,v,r,l,Ge)){yt=1,vl(s,yn(l,s.current)),Oe=null;return}}catch(b){if(v!==null)throw Oe=v,b;yt=1,vl(s,yn(l,s.current)),Oe=null;return}r.flags&32768?(Ye||f===1?s=!0:oo||(Ge&536870912)!==0?s=!1:(ki=s=!0,(f===2||f===9||f===3||f===6)&&(f=Tn.current,f!==null&&f.tag===13&&(f.flags|=16384))),xy(r,s)):Al(r)}function Al(s){var r=s;do{if((r.flags&32768)!==0){xy(r,ki);return}s=r.return;var l=Z_(r.alternate,r,ai);if(l!==null){Oe=l;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=s}while(r!==null);yt===0&&(yt=5)}function xy(s,r){do{var l=eC(s.alternate,s);if(l!==null){l.flags&=32767,Oe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Oe=s;return}Oe=s=l}while(s!==null);yt=6,Oe=null}function by(s,r,l,f,v,b,S,C,k){s.cancelPendingCommit=null;do Nl();while(jt!==0);if((Qe&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(b=r.lanes|r.childLanes,b|=gc,Ow(s,l,b,S,C,k),s===ot&&(Oe=ot=null,Ge=0),ao=r,Pi=s,lo=l,Td=b,Sd=v,cy=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,fC(Ee,function(){return Cy(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=U.T,U.T=null,v=G.p,G.p=2,S=Qe,Qe|=4;try{tC(s,r,l)}finally{Qe=S,G.p=v,U.T=f}}jt=1,Ty(),Sy(),wy()}}function Ty(){if(jt===1){jt=0;var s=Pi,r=ao,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=U.T,U.T=null;var f=G.p;G.p=2;var v=Qe;Qe|=4;try{iy(r,s);var b=jd,S=um(s.containerInfo),C=b.focusedElem,k=b.selectionRange;if(S!==C&&C&&C.ownerDocument&&lm(C.ownerDocument.documentElement,C)){if(k!==null&&dc(C)){var q=k.start,Q=k.end;if(Q===void 0&&(Q=q),"selectionStart"in C)C.selectionStart=q,C.selectionEnd=Math.min(Q,C.value.length);else{var ne=C.ownerDocument||document,H=ne&&ne.defaultView||window;if(H.getSelection){var $=H.getSelection(),Re=C.textContent.length,Ae=Math.min(k.start,Re),tt=k.end===void 0?Ae:Math.min(k.end,Re);!$.extend&&Ae>tt&&(S=tt,tt=Ae,Ae=S);var V=am(C,Ae),L=am(C,tt);if(V&&L&&($.rangeCount!==1||$.anchorNode!==V.node||$.anchorOffset!==V.offset||$.focusNode!==L.node||$.focusOffset!==L.offset)){var O=ne.createRange();O.setStart(V.node,V.offset),$.removeAllRanges(),Ae>tt?($.addRange(O),$.extend(L.node,L.offset)):(O.setEnd(L.node,L.offset),$.addRange(O))}}}}for(ne=[],$=C;$=$.parentNode;)$.nodeType===1&&ne.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ne.length;C++){var X=ne[C];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Ol=!!Vd,jd=Vd=null}finally{Qe=v,G.p=f,U.T=l}}s.current=r,jt=2}}function Sy(){if(jt===2){jt=0;var s=Pi,r=ao,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=U.T,U.T=null;var f=G.p;G.p=2;var v=Qe;Qe|=4;try{Zg(s,r.alternate,r)}finally{Qe=v,G.p=f,U.T=l}}jt=3}}function wy(){if(jt===4||jt===3){jt=0,Te();var s=Pi,r=ao,l=lo,f=cy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jt=5:(jt=0,ao=Pi=null,_y(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(Ii=null),Hu(l),r=r.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(ut,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=U.T,v=G.p,G.p=2,U.T=null;try{for(var b=s.onRecoverableError,S=0;S<f.length;S++){var C=f[S];b(C.value,{componentStack:C.stack})}}finally{U.T=r,G.p=v}}(lo&3)!==0&&Nl(),Bn(s),v=s.pendingLanes,(l&4194090)!==0&&(v&42)!==0?s===wd?Ur++:(Ur=0,wd=s):Ur=0,Vr(0)}}function _y(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,gr(r)))}function Nl(s){return Ty(),Sy(),wy(),Cy()}function Cy(){if(jt!==5)return!1;var s=Pi,r=Td;Td=0;var l=Hu(lo),f=U.T,v=G.p;try{G.p=32>l?32:l,U.T=null,l=Sd,Sd=null;var b=Pi,S=lo;if(jt=0,ao=Pi=null,lo=0,(Qe&6)!==0)throw Error(i(331));var C=Qe;if(Qe|=4,ly(b.current),oy(b,b.current,S,l),Qe=C,Vr(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(ut,b)}catch{}return!0}finally{G.p=v,U.T=f,_y(s,r)}}function Ey(s,r,l){r=yn(l,r),r=td(s.stateNode,r,2),s=_i(s,r,2),s!==null&&(er(s,2),Bn(s))}function it(s,r,l){if(s.tag===3)Ey(s,s,l);else for(;r!==null;){if(r.tag===3){Ey(r,s,l);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ii===null||!Ii.has(f))){s=yn(l,s),l=Rg(2),f=_i(r,l,2),f!==null&&(kg(l,f,r,s),er(f,2),Bn(f));break}}r=r.return}}function Ad(s,r,l){var f=s.pingCache;if(f===null){f=s.pingCache=new sC;var v=new Set;f.set(r,v)}else v=f.get(r),v===void 0&&(v=new Set,f.set(r,v));v.has(l)||(yd=!0,v.add(l),s=uC.bind(null,s,r,l),r.then(s,s))}function uC(s,r,l){var f=s.pingCache;f!==null&&f.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ot===s&&(Ge&l)===l&&(yt===4||yt===3&&(Ge&62914560)===Ge&&300>we()-bd?(Qe&2)===0&&uo(s,0):vd|=l,ro===Ge&&(ro=0)),Bn(s)}function Ay(s,r){r===0&&(r=wp()),s=$s(s,r),s!==null&&(er(s,r),Bn(s))}function cC(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Ay(s,l)}function dC(s,r){var l=0;switch(s.tag){case 13:var f=s.stateNode,v=s.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(r),Ay(s,l)}function fC(s,r){return He(s,r)}var Ml=null,fo=null,Nd=!1,Rl=!1,Md=!1,ps=0;function Bn(s){s!==fo&&s.next===null&&(fo===null?Ml=fo=s:fo=fo.next=s),Rl=!0,Nd||(Nd=!0,pC())}function Vr(s,r){if(!Md&&Rl){Md=!0;do for(var l=!1,f=Ml;f!==null;){if(s!==0){var v=f.pendingLanes;if(v===0)var b=0;else{var S=f.suspendedLanes,C=f.pingedLanes;b=(1<<31-zt(42|s)+1)-1,b&=v&~(S&~C),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,ky(f,b))}else b=Ge,b=Ua(f,f===ot?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Zo(f,b)||(l=!0,ky(f,b));f=f.next}while(l);Md=!1}}function hC(){Ny()}function Ny(){Rl=Nd=!1;var s=0;ps!==0&&(SC()&&(s=ps),ps=0);for(var r=we(),l=null,f=Ml;f!==null;){var v=f.next,b=My(f,r);b===0?(f.next=null,l===null?Ml=v:l.next=v,v===null&&(fo=l)):(l=f,(s!==0||(b&3)!==0)&&(Rl=!0)),f=v}Vr(s)}function My(s,r){for(var l=s.suspendedLanes,f=s.pingedLanes,v=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var S=31-zt(b),C=1<<S,k=v[S];k===-1?((C&l)===0||(C&f)!==0)&&(v[S]=Bw(C,r)):k<=r&&(s.expiredLanes|=C),b&=~C}if(r=ot,l=Ge,l=Ua(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,l===0||s===r&&(We===2||We===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&De(f),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Zo(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(f!==null&&De(f),Hu(l)){case 2:case 8:l=Ce;break;case 32:l=Ee;break;case 268435456:l=Be;break;default:l=Ee}return f=Ry.bind(null,s),l=He(l,f),s.callbackPriority=r,s.callbackNode=l,r}return f!==null&&f!==null&&De(f),s.callbackPriority=2,s.callbackNode=null,2}function Ry(s,r){if(jt!==0&&jt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Nl()&&s.callbackNode!==l)return null;var f=Ge;return f=Ua(s,s===ot?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(fy(s,f,r),My(s,we()),s.callbackNode!=null&&s.callbackNode===l?Ry.bind(null,s):null)}function ky(s,r){if(Nl())return null;fy(s,r,!0)}function pC(){_C(function(){(Qe&6)!==0?He(te,hC):Ny()})}function Rd(){return ps===0&&(ps=Sp()),ps}function Dy(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:qa(""+s)}function Iy(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function mC(s,r,l,f,v){if(r==="submit"&&l&&l.stateNode===v){var b=Dy((v[Wt]||null).action),S=f.submitter;S&&(r=(r=S[Wt]||null)?Dy(r.formAction):S.getAttribute("formAction"),r!==null&&(b=r,S=null));var C=new $a("action","action",null,f,v);s.push({event:C,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ps!==0){var k=S?Iy(v,S):new FormData(v);Qc(l,{pending:!0,data:k,method:v.method,action:b},null,k)}}else typeof b=="function"&&(C.preventDefault(),k=S?Iy(v,S):new FormData(v),Qc(l,{pending:!0,data:k,method:v.method,action:b},b,k))},currentTarget:v}]})}}for(var kd=0;kd<mc.length;kd++){var Dd=mc[kd],gC=Dd.toLowerCase(),yC=Dd[0].toUpperCase()+Dd.slice(1);Nn(gC,"on"+yC)}Nn(fm,"onAnimationEnd"),Nn(hm,"onAnimationIteration"),Nn(pm,"onAnimationStart"),Nn("dblclick","onDoubleClick"),Nn("focusin","onFocus"),Nn("focusout","onBlur"),Nn(P_,"onTransitionRun"),Nn(L_,"onTransitionStart"),Nn(U_,"onTransitionCancel"),Nn(mm,"onTransitionEnd"),Ls("onMouseEnter",["mouseout","mouseover"]),Ls("onMouseLeave",["mouseout","mouseover"]),Ls("onPointerEnter",["pointerout","pointerover"]),Ls("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jr));function Py(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var f=s[l],v=f.event;f=f.listeners;e:{var b=void 0;if(r)for(var S=f.length-1;0<=S;S--){var C=f[S],k=C.instance,q=C.currentTarget;if(C=C.listener,k!==b&&v.isPropagationStopped())break e;b=C,v.currentTarget=q;try{b(v)}catch(Q){yl(Q)}v.currentTarget=null,b=k}else for(S=0;S<f.length;S++){if(C=f[S],k=C.instance,q=C.currentTarget,C=C.listener,k!==b&&v.isPropagationStopped())break e;b=C,v.currentTarget=q;try{b(v)}catch(Q){yl(Q)}v.currentTarget=null,b=k}}}}function qe(s,r){var l=r[$u];l===void 0&&(l=r[$u]=new Set);var f=s+"__bubble";l.has(f)||(Ly(r,s,2,!1),l.add(f))}function Id(s,r,l){var f=0;r&&(f|=4),Ly(l,s,f,r)}var kl="_reactListening"+Math.random().toString(36).slice(2);function Pd(s){if(!s[kl]){s[kl]=!0,Np.forEach(function(l){l!=="selectionchange"&&(vC.has(l)||Id(l,!1,s),Id(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[kl]||(r[kl]=!0,Id("selectionchange",!1,r))}}function Ly(s,r,l,f){switch(ov(r)){case 2:var v=$C;break;case 8:v=FC;break;default:v=Jd}l=v.bind(null,r,l,s),v=void 0,!nc||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),f?v!==void 0?s.addEventListener(r,l,{capture:!0,passive:v}):s.addEventListener(r,l,!0):v!==void 0?s.addEventListener(r,l,{passive:v}):s.addEventListener(r,l,!1)}function Ld(s,r,l,f,v){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var C=f.stateNode.containerInfo;if(C===v)break;if(S===4)for(S=f.return;S!==null;){var k=S.tag;if((k===3||k===4)&&S.stateNode.containerInfo===v)return;S=S.return}for(;C!==null;){if(S=Ds(C),S===null)return;if(k=S.tag,k===5||k===6||k===26||k===27){f=b=S;continue e}C=C.parentNode}}f=f.return}zp(function(){var q=b,Q=ec(l),ne=[];e:{var H=gm.get(s);if(H!==void 0){var $=$a,Re=s;switch(s){case"keypress":if(Ga(l)===0)break e;case"keydown":case"keyup":$=f_;break;case"focusin":Re="focus",$=rc;break;case"focusout":Re="blur",$=rc;break;case"beforeblur":case"afterblur":$=rc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=$p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=e_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=m_;break;case fm:case hm:case pm:$=i_;break;case mm:$=y_;break;case"scroll":case"scrollend":$=Xw;break;case"wheel":$=x_;break;case"copy":case"cut":case"paste":$=o_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Yp;break;case"toggle":case"beforetoggle":$=T_}var Ae=(r&4)!==0,tt=!Ae&&(s==="scroll"||s==="scrollend"),V=Ae?H!==null?H+"Capture":null:H;Ae=[];for(var L=q,O;L!==null;){var X=L;if(O=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||O===null||V===null||(X=ir(L,V),X!=null&&Ae.push(Br(L,X,O))),tt)break;L=L.return}0<Ae.length&&(H=new $(H,Re,null,l,Q),ne.push({event:H,listeners:Ae}))}}if((r&7)===0){e:{if(H=s==="mouseover"||s==="pointerover",$=s==="mouseout"||s==="pointerout",H&&l!==Zu&&(Re=l.relatedTarget||l.fromElement)&&(Ds(Re)||Re[ks]))break e;if(($||H)&&(H=Q.window===Q?Q:(H=Q.ownerDocument)?H.defaultView||H.parentWindow:window,$?(Re=l.relatedTarget||l.toElement,$=q,Re=Re?Ds(Re):null,Re!==null&&(tt=a(Re),Ae=Re.tag,Re!==tt||Ae!==5&&Ae!==27&&Ae!==6)&&(Re=null)):($=null,Re=q),$!==Re)){if(Ae=$p,X="onMouseLeave",V="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=Yp,X="onPointerLeave",V="onPointerEnter",L="pointer"),tt=$==null?H:nr($),O=Re==null?H:nr(Re),H=new Ae(X,L+"leave",$,l,Q),H.target=tt,H.relatedTarget=O,X=null,Ds(Q)===q&&(Ae=new Ae(V,L+"enter",Re,l,Q),Ae.target=O,Ae.relatedTarget=tt,X=Ae),tt=X,$&&Re)t:{for(Ae=$,V=Re,L=0,O=Ae;O;O=ho(O))L++;for(O=0,X=V;X;X=ho(X))O++;for(;0<L-O;)Ae=ho(Ae),L--;for(;0<O-L;)V=ho(V),O--;for(;L--;){if(Ae===V||V!==null&&Ae===V.alternate)break t;Ae=ho(Ae),V=ho(V)}Ae=null}else Ae=null;$!==null&&Uy(ne,H,$,Ae,!1),Re!==null&&tt!==null&&Uy(ne,tt,Re,Ae,!0)}}e:{if(H=q?nr(q):window,$=H.nodeName&&H.nodeName.toLowerCase(),$==="select"||$==="input"&&H.type==="file")var ve=tm;else if(Zp(H))if(nm)ve=k_;else{ve=M_;var Ve=N_}else $=H.nodeName,!$||$.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&Xu(q.elementType)&&(ve=tm):ve=R_;if(ve&&(ve=ve(s,q))){em(ne,ve,l,Q);break e}Ve&&Ve(s,H,q),s==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&Wu(H,"number",H.value)}switch(Ve=q?nr(q):window,s){case"focusin":(Zp(Ve)||Ve.contentEditable==="true")&&(zs=Ve,fc=q,dr=null);break;case"focusout":dr=fc=zs=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,cm(ne,l,Q);break;case"selectionchange":if(I_)break;case"keydown":case"keyup":cm(ne,l,Q)}var _e;if(lc)e:{switch(s){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else qs?Wp(s,l)&&(Ne="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ne="onCompositionStart");Ne&&(Jp&&l.locale!=="ko"&&(qs||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&qs&&(_e=Gp()):(bi=Q,ic="value"in bi?bi.value:bi.textContent,qs=!0)),Ve=Dl(q,Ne),0<Ve.length&&(Ne=new Fp(Ne,s,null,l,Q),ne.push({event:Ne,listeners:Ve}),_e?Ne.data=_e:(_e=Xp(l),_e!==null&&(Ne.data=_e)))),(_e=w_?__(s,l):C_(s,l))&&(Ne=Dl(q,"onBeforeInput"),0<Ne.length&&(Ve=new Fp("onBeforeInput","beforeinput",null,l,Q),ne.push({event:Ve,listeners:Ne}),Ve.data=_e)),mC(ne,s,q,l,Q)}Py(ne,r)})}function Br(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Dl(s,r){for(var l=r+"Capture",f=[];s!==null;){var v=s,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=ir(s,l),v!=null&&f.unshift(Br(s,v,b)),v=ir(s,r),v!=null&&f.push(Br(s,v,b))),s.tag===3)return f;s=s.return}return[]}function ho(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Uy(s,r,l,f,v){for(var b=r._reactName,S=[];l!==null&&l!==f;){var C=l,k=C.alternate,q=C.stateNode;if(C=C.tag,k!==null&&k===f)break;C!==5&&C!==26&&C!==27||q===null||(k=q,v?(q=ir(l,b),q!=null&&S.unshift(Br(l,q,k))):v||(q=ir(l,b),q!=null&&S.push(Br(l,q,k)))),l=l.return}S.length!==0&&s.push({event:r,listeners:S})}var xC=/\r\n?/g,bC=/\u0000|\uFFFD/g;function Vy(s){return(typeof s=="string"?s:""+s).replace(xC,`
`).replace(bC,"")}function jy(s,r){return r=Vy(r),Vy(s)===r}function Il(){}function et(s,r,l,f,v,b){switch(l){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||js(s,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&js(s,""+f);break;case"className":ja(s,"class",f);break;case"tabIndex":ja(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ja(s,l,f);break;case"style":Op(s,f,b);break;case"data":if(r!=="object"){ja(s,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(l);break}f=qa(""+f),s.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(r!=="input"&&et(s,r,"name",v.name,v,null),et(s,r,"formEncType",v.formEncType,v,null),et(s,r,"formMethod",v.formMethod,v,null),et(s,r,"formTarget",v.formTarget,v,null)):(et(s,r,"encType",v.encType,v,null),et(s,r,"method",v.method,v,null),et(s,r,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(l);break}f=qa(""+f),s.setAttribute(l,f);break;case"onClick":f!=null&&(s.onclick=Il);break;case"onScroll":f!=null&&qe("scroll",s);break;case"onScrollEnd":f!=null&&qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}l=qa(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(l,""+f):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":f===!0?s.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(l,f):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(l,f):s.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(l):s.setAttribute(l,f);break;case"popover":qe("beforetoggle",s),qe("toggle",s),Va(s,"popover",f);break;case"xlinkActuate":Jn(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Jn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Jn(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Jn(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Jn(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Jn(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Jn(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Jn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Jn(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Va(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Qw.get(l)||l,Va(s,l,f))}}function Ud(s,r,l,f,v,b){switch(l){case"style":Op(s,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof f=="string"?js(s,f):(typeof f=="number"||typeof f=="bigint")&&js(s,""+f);break;case"onScroll":f!=null&&qe("scroll",s);break;case"onScrollEnd":f!=null&&qe("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Il);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mp.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),r=l.slice(2,v?l.length-7:void 0),b=s[Wt]||null,b=b!=null?b[l]:null,typeof b=="function"&&s.removeEventListener(r,b,v),typeof f=="function")){typeof b!="function"&&b!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,f,v);break e}l in s?s[l]=f:f===!0?s.setAttribute(l,""):Va(s,l,f)}}}function Bt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",s),qe("load",s);var f=!1,v=!1,b;for(b in l)if(l.hasOwnProperty(b)){var S=l[b];if(S!=null)switch(b){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(s,r,b,S,l,null)}}v&&et(s,r,"srcSet",l.srcSet,l,null),f&&et(s,r,"src",l.src,l,null);return;case"input":qe("invalid",s);var C=b=S=v=null,k=null,q=null;for(f in l)if(l.hasOwnProperty(f)){var Q=l[f];if(Q!=null)switch(f){case"name":v=Q;break;case"type":S=Q;break;case"checked":k=Q;break;case"defaultChecked":q=Q;break;case"value":b=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:et(s,r,f,Q,l,null)}}Up(s,b,C,k,q,S,v,!1),Ba(s);return;case"select":qe("invalid",s),f=S=b=null;for(v in l)if(l.hasOwnProperty(v)&&(C=l[v],C!=null))switch(v){case"value":b=C;break;case"defaultValue":S=C;break;case"multiple":f=C;default:et(s,r,v,C,l,null)}r=b,l=S,s.multiple=!!f,r!=null?Vs(s,!!f,r,!1):l!=null&&Vs(s,!!f,l,!0);return;case"textarea":qe("invalid",s),b=v=f=null;for(S in l)if(l.hasOwnProperty(S)&&(C=l[S],C!=null))switch(S){case"value":f=C;break;case"defaultValue":v=C;break;case"children":b=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:et(s,r,S,C,l,null)}jp(s,f,v,b),Ba(s);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(f=l[k],f!=null))switch(k){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:et(s,r,k,f,l,null)}return;case"dialog":qe("beforetoggle",s),qe("toggle",s),qe("cancel",s),qe("close",s);break;case"iframe":case"object":qe("load",s);break;case"video":case"audio":for(f=0;f<jr.length;f++)qe(jr[f],s);break;case"image":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"embed":case"source":case"link":qe("error",s),qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(f=l[q],f!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:et(s,r,q,f,l,null)}return;default:if(Xu(r)){for(Q in l)l.hasOwnProperty(Q)&&(f=l[Q],f!==void 0&&Ud(s,r,Q,f,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(f=l[C],f!=null&&et(s,r,C,f,l,null))}function TC(s,r,l,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,S=null,C=null,k=null,q=null,Q=null;for($ in l){var ne=l[$];if(l.hasOwnProperty($)&&ne!=null)switch($){case"checked":break;case"value":break;case"defaultValue":k=ne;default:f.hasOwnProperty($)||et(s,r,$,null,f,ne)}}for(var H in f){var $=f[H];if(ne=l[H],f.hasOwnProperty(H)&&($!=null||ne!=null))switch(H){case"type":b=$;break;case"name":v=$;break;case"checked":q=$;break;case"defaultChecked":Q=$;break;case"value":S=$;break;case"defaultValue":C=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:$!==ne&&et(s,r,H,$,f,ne)}}Qu(s,S,C,k,q,Q,b,v);return;case"select":$=S=C=H=null;for(b in l)if(k=l[b],l.hasOwnProperty(b)&&k!=null)switch(b){case"value":break;case"multiple":$=k;default:f.hasOwnProperty(b)||et(s,r,b,null,f,k)}for(v in f)if(b=f[v],k=l[v],f.hasOwnProperty(v)&&(b!=null||k!=null))switch(v){case"value":H=b;break;case"defaultValue":C=b;break;case"multiple":S=b;default:b!==k&&et(s,r,v,b,f,k)}r=C,l=S,f=$,H!=null?Vs(s,!!l,H,!1):!!f!=!!l&&(r!=null?Vs(s,!!l,r,!0):Vs(s,!!l,l?[]:"",!1));return;case"textarea":$=H=null;for(C in l)if(v=l[C],l.hasOwnProperty(C)&&v!=null&&!f.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:et(s,r,C,null,f,v)}for(S in f)if(v=f[S],b=l[S],f.hasOwnProperty(S)&&(v!=null||b!=null))switch(S){case"value":H=v;break;case"defaultValue":$=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==b&&et(s,r,S,v,f,b)}Vp(s,H,$);return;case"option":for(var Re in l)if(H=l[Re],l.hasOwnProperty(Re)&&H!=null&&!f.hasOwnProperty(Re))switch(Re){case"selected":s.selected=!1;break;default:et(s,r,Re,null,f,H)}for(k in f)if(H=f[k],$=l[k],f.hasOwnProperty(k)&&H!==$&&(H!=null||$!=null))switch(k){case"selected":s.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:et(s,r,k,H,f,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)H=l[Ae],l.hasOwnProperty(Ae)&&H!=null&&!f.hasOwnProperty(Ae)&&et(s,r,Ae,null,f,H);for(q in f)if(H=f[q],$=l[q],f.hasOwnProperty(q)&&H!==$&&(H!=null||$!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:et(s,r,q,H,f,$)}return;default:if(Xu(r)){for(var tt in l)H=l[tt],l.hasOwnProperty(tt)&&H!==void 0&&!f.hasOwnProperty(tt)&&Ud(s,r,tt,void 0,f,H);for(Q in f)H=f[Q],$=l[Q],!f.hasOwnProperty(Q)||H===$||H===void 0&&$===void 0||Ud(s,r,Q,H,f,$);return}}for(var V in l)H=l[V],l.hasOwnProperty(V)&&H!=null&&!f.hasOwnProperty(V)&&et(s,r,V,null,f,H);for(ne in f)H=f[ne],$=l[ne],!f.hasOwnProperty(ne)||H===$||H==null&&$==null||et(s,r,ne,H,f,$)}var Vd=null,jd=null;function Pl(s){return s.nodeType===9?s:s.ownerDocument}function By(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oy(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Bd(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Od=null;function SC(){var s=window.event;return s&&s.type==="popstate"?s===Od?!1:(Od=s,!0):(Od=null,!1)}var qy=typeof setTimeout=="function"?setTimeout:void 0,wC=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,_C=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(s){return zy.resolve(null).then(s).catch(CC)}:qy;function CC(s){setTimeout(function(){throw s})}function Ui(s){return s==="head"}function Gy(s,r){var l=r,f=0,v=0;do{var b=l.nextSibling;if(s.removeChild(l),b&&b.nodeType===8)if(l=b.data,l==="/$"){if(0<f&&8>f){l=f;var S=s.ownerDocument;if(l&1&&Or(S.documentElement),l&2&&Or(S.body),l&4)for(l=S.head,Or(l),S=l.firstChild;S;){var C=S.nextSibling,k=S.nodeName;S[tr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&S.rel.toLowerCase()==="stylesheet"||l.removeChild(S),S=C}}if(v===0){s.removeChild(b),Jr(r);return}v--}else l==="$"||l==="$?"||l==="$!"?v++:f=l.charCodeAt(0)-48;else f=0;l=b}while(l);Jr(r)}function qd(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":qd(l),Fu(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function EC(s,r,l,f){for(;s.nodeType===1;){var v=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[tr])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Rn(s.nextSibling),s===null)break}return null}function AC(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Rn(s.nextSibling),s===null))return null;return s}function zd(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function NC(s,r){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")r();else{var f=function(){r(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Rn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Gd=null;function Hy(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return s;r--}else l==="/$"&&r++}s=s.previousSibling}return null}function $y(s,r,l){switch(r=Pl(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Or(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Fu(s)}var wn=new Map,Fy=new Set;function Ll(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var li=G.d;G.d={f:MC,r:RC,D:kC,C:DC,L:IC,m:PC,X:UC,S:LC,M:VC};function MC(){var s=li.f(),r=El();return s||r}function RC(s){var r=Is(s);r!==null&&r.tag===5&&r.type==="form"?fg(r):li.r(s)}var po=typeof document>"u"?null:document;function Yy(s,r,l){var f=po;if(f&&typeof r=="string"&&r){var v=gn(r);v='link[rel="'+s+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),Fy.has(v)||(Fy.add(v),s={rel:s,crossOrigin:l,href:r},f.querySelector(v)===null&&(r=f.createElement("link"),Bt(r,"link",s),Rt(r),f.head.appendChild(r)))}}function kC(s){li.D(s),Yy("dns-prefetch",s,null)}function DC(s,r){li.C(s,r),Yy("preconnect",s,r)}function IC(s,r,l){li.L(s,r,l);var f=po;if(f&&s&&r){var v='link[rel="preload"][as="'+gn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+gn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+gn(l.imageSizes)+'"]')):v+='[href="'+gn(s)+'"]';var b=v;switch(r){case"style":b=mo(s);break;case"script":b=go(s)}wn.has(b)||(s=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),wn.set(b,s),f.querySelector(v)!==null||r==="style"&&f.querySelector(qr(b))||r==="script"&&f.querySelector(zr(b))||(r=f.createElement("link"),Bt(r,"link",s),Rt(r),f.head.appendChild(r)))}}function PC(s,r){li.m(s,r);var l=po;if(l&&s){var f=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+gn(f)+'"][href="'+gn(s)+'"]',b=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=go(s)}if(!wn.has(b)&&(s=y({rel:"modulepreload",href:s},r),wn.set(b,s),l.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zr(b)))return}f=l.createElement("link"),Bt(f,"link",s),Rt(f),l.head.appendChild(f)}}}function LC(s,r,l){li.S(s,r,l);var f=po;if(f&&s){var v=Ps(f).hoistableStyles,b=mo(s);r=r||"default";var S=v.get(b);if(!S){var C={loading:0,preload:null};if(S=f.querySelector(qr(b)))C.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":r},l),(l=wn.get(b))&&Hd(s,l);var k=S=f.createElement("link");Rt(k),Bt(k,"link",s),k._p=new Promise(function(q,Q){k.onload=q,k.onerror=Q}),k.addEventListener("load",function(){C.loading|=1}),k.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Ul(S,r,f)}S={type:"stylesheet",instance:S,count:1,state:C},v.set(b,S)}}}function UC(s,r){li.X(s,r);var l=po;if(l&&s){var f=Ps(l).hoistableScripts,v=go(s),b=f.get(v);b||(b=l.querySelector(zr(v)),b||(s=y({src:s,async:!0},r),(r=wn.get(v))&&$d(s,r),b=l.createElement("script"),Rt(b),Bt(b,"link",s),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function VC(s,r){li.M(s,r);var l=po;if(l&&s){var f=Ps(l).hoistableScripts,v=go(s),b=f.get(v);b||(b=l.querySelector(zr(v)),b||(s=y({src:s,async:!0,type:"module"},r),(r=wn.get(v))&&$d(s,r),b=l.createElement("script"),Rt(b),Bt(b,"link",s),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function Jy(s,r,l,f){var v=(v=le.current)?Ll(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=mo(l.href),l=Ps(v).hoistableStyles,f=l.get(r),f||(f={type:"style",instance:null,count:0,state:null},l.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=mo(l.href);var b=Ps(v).hoistableStyles,S=b.get(s);if(S||(v=v.ownerDocument||v,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,S),(b=v.querySelector(qr(s)))&&!b._p&&(S.instance=b,S.state.loading=5),wn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},wn.set(s,l),b||jC(v,s,l,S.state))),r&&f===null)throw Error(i(528,""));return S}if(r&&f!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=go(l),l=Ps(v).hoistableScripts,f=l.get(r),f||(f={type:"script",instance:null,count:0,state:null},l.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function mo(s){return'href="'+gn(s)+'"'}function qr(s){return'link[rel="stylesheet"]['+s+"]"}function Ky(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function jC(s,r,l,f){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=s.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Bt(r,"link",l),Rt(r),s.head.appendChild(r))}function go(s){return'[src="'+gn(s)+'"]'}function zr(s){return"script[async]"+s}function Qy(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var f=s.querySelector('style[data-href~="'+gn(l.href)+'"]');if(f)return r.instance=f,Rt(f),f;var v=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),Rt(f),Bt(f,"style",v),Ul(f,l.precedence,s),r.instance=f;case"stylesheet":v=mo(l.href);var b=s.querySelector(qr(v));if(b)return r.state.loading|=4,r.instance=b,Rt(b),b;f=Ky(l),(v=wn.get(v))&&Hd(f,v),b=(s.ownerDocument||s).createElement("link"),Rt(b);var S=b;return S._p=new Promise(function(C,k){S.onload=C,S.onerror=k}),Bt(b,"link",f),r.state.loading|=4,Ul(b,l.precedence,s),r.instance=b;case"script":return b=go(l.src),(v=s.querySelector(zr(b)))?(r.instance=v,Rt(v),v):(f=l,(v=wn.get(b))&&(f=y({},l),$d(f,v)),s=s.ownerDocument||s,v=s.createElement("script"),Rt(v),Bt(v,"link",f),s.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Ul(f,l.precedence,s));return r.instance}function Ul(s,r,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,b=v,S=0;S<f.length;S++){var C=f[S];if(C.dataset.precedence===r)b=C;else if(b!==v)break}b?b.parentNode.insertBefore(s,b.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Hd(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function $d(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Vl=null;function Wy(s,r,l){if(Vl===null){var f=new Map,v=Vl=new Map;v.set(l,f)}else v=Vl,f=v.get(l),f||(f=new Map,v.set(l,f));if(f.has(s))return f;for(f.set(s,null),l=l.getElementsByTagName(s),v=0;v<l.length;v++){var b=l[v];if(!(b[tr]||b[Gt]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(r)||"";S=s+S;var C=f.get(S);C?C.push(b):f.set(S,[b])}}return f}function Xy(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function BC(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Zy(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Gr=null;function OC(){}function qC(s,r,l){if(Gr===null)throw Error(i(475));var f=Gr;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var v=mo(l.href),b=s.querySelector(qr(v));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=jl.bind(f),s.then(f,f)),r.state.loading|=4,r.instance=b,Rt(b);return}b=s.ownerDocument||s,l=Ky(l),(v=wn.get(v))&&Hd(l,v),b=b.createElement("link"),Rt(b);var S=b;S._p=new Promise(function(C,k){S.onload=C,S.onerror=k}),Bt(b,"link",l),r.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(f.count++,r=jl.bind(f),s.addEventListener("load",r),s.addEventListener("error",r))}}function zC(){if(Gr===null)throw Error(i(475));var s=Gr;return s.stylesheets&&s.count===0&&Fd(s,s.stylesheets),0<s.count?function(r){var l=setTimeout(function(){if(s.stylesheets&&Fd(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(l)}}:null}function jl(){if(this.count--,this.count===0){if(this.stylesheets)Fd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Bl=null;function Fd(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Bl=new Map,r.forEach(GC,s),Bl=null,jl.call(s))}function GC(s,r){if(!(r.state.loading&4)){var l=Bl.get(s);if(l)var f=l.get(null);else{l=new Map,Bl.set(s,l);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var S=v[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),f=S)}f&&l.set(null,f)}v=r.instance,S=v.getAttribute("data-precedence"),b=l.get(S)||f,b===f&&l.set(null,v),l.set(S,v),this.count++,f=jl.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),b?b.parentNode.insertBefore(v,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),r.state.loading|=4}}var Hr={$$typeof:D,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function HC(s,r,l,f,v,b,S,C){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zu(0),this.hiddenUpdates=zu(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function ev(s,r,l,f,v,b,S,C,k,q,Q,ne){return s=new HC(s,r,l,S,C,k,q,ne),r=1,b===!0&&(r|=24),b=sn(3,null,null,r),s.current=b,b.stateNode=s,r=Ac(),r.refCount++,s.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:l,cache:r},kc(b),s}function tv(s){return s?(s=Fs,s):Fs}function nv(s,r,l,f,v,b){v=tv(v),f.context===null?f.context=v:f.pendingContext=v,f=wi(r),f.payload={element:l},b=b===void 0?null:b,b!==null&&(f.callback=b),l=_i(s,f,r),l!==null&&(un(l,s,r),br(l,s,r))}function iv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Yd(s,r){iv(s,r),(s=s.alternate)&&iv(s,r)}function sv(s){if(s.tag===13){var r=$s(s,67108864);r!==null&&un(r,s,67108864),Yd(s,67108864)}}var Ol=!0;function $C(s,r,l,f){var v=U.T;U.T=null;var b=G.p;try{G.p=2,Jd(s,r,l,f)}finally{G.p=b,U.T=v}}function FC(s,r,l,f){var v=U.T;U.T=null;var b=G.p;try{G.p=8,Jd(s,r,l,f)}finally{G.p=b,U.T=v}}function Jd(s,r,l,f){if(Ol){var v=Kd(f);if(v===null)Ld(s,r,f,ql,l),rv(s,f);else if(JC(v,s,r,l,f))f.stopPropagation();else if(rv(s,f),r&4&&-1<YC.indexOf(s)){for(;v!==null;){var b=Is(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=Wi(b.pendingLanes);if(S!==0){var C=b;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var k=1<<31-zt(S);C.entanglements[1]|=k,S&=~k}Bn(b),(Qe&6)===0&&(_l=we()+500,Vr(0))}}break;case 13:C=$s(b,2),C!==null&&un(C,b,2),El(),Yd(b,2)}if(b=Kd(f),b===null&&Ld(s,r,f,ql,l),b===v)break;v=b}v!==null&&f.stopPropagation()}else Ld(s,r,f,null,l)}}function Kd(s){return s=ec(s),Qd(s)}var ql=null;function Qd(s){if(ql=null,s=Ds(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return ql=s,null}function ov(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(F()){case te:return 2;case Ce:return 8;case Ee:case Se:return 32;case Be:return 268435456;default:return 32}default:return 32}}var Wd=!1,Vi=null,ji=null,Bi=null,$r=new Map,Fr=new Map,Oi=[],YC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rv(s,r){switch(s){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Bi=null;break;case"pointerover":case"pointerout":$r.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(r.pointerId)}}function Yr(s,r,l,f,v,b){return s===null||s.nativeEvent!==b?(s={blockedOn:r,domEventName:l,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},r!==null&&(r=Is(r),r!==null&&sv(r)),s):(s.eventSystemFlags|=f,r=s.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),s)}function JC(s,r,l,f,v){switch(r){case"focusin":return Vi=Yr(Vi,s,r,l,f,v),!0;case"dragenter":return ji=Yr(ji,s,r,l,f,v),!0;case"mouseover":return Bi=Yr(Bi,s,r,l,f,v),!0;case"pointerover":var b=v.pointerId;return $r.set(b,Yr($r.get(b)||null,s,r,l,f,v)),!0;case"gotpointercapture":return b=v.pointerId,Fr.set(b,Yr(Fr.get(b)||null,s,r,l,f,v)),!0}return!1}function av(s){var r=Ds(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,qw(s.priority,function(){if(l.tag===13){var f=ln();f=Gu(f);var v=$s(l,f);v!==null&&un(v,l,f),Yd(l,f)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zl(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Kd(s.nativeEvent);if(l===null){l=s.nativeEvent;var f=new l.constructor(l.type,l);Zu=f,l.target.dispatchEvent(f),Zu=null}else return r=Is(l),r!==null&&sv(r),s.blockedOn=l,!1;r.shift()}return!0}function lv(s,r,l){zl(s)&&l.delete(r)}function KC(){Wd=!1,Vi!==null&&zl(Vi)&&(Vi=null),ji!==null&&zl(ji)&&(ji=null),Bi!==null&&zl(Bi)&&(Bi=null),$r.forEach(lv),Fr.forEach(lv)}function Gl(s,r){s.blockedOn===r&&(s.blockedOn=null,Wd||(Wd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KC)))}var Hl=null;function uv(s){Hl!==s&&(Hl=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hl===s&&(Hl=null);for(var r=0;r<s.length;r+=3){var l=s[r],f=s[r+1],v=s[r+2];if(typeof f!="function"){if(Qd(f||l)===null)continue;break}var b=Is(l);b!==null&&(s.splice(r,3),r-=3,Qc(b,{pending:!0,data:v,method:l.method,action:f},f,v))}}))}function Jr(s){function r(k){return Gl(k,s)}Vi!==null&&Gl(Vi,s),ji!==null&&Gl(ji,s),Bi!==null&&Gl(Bi,s),$r.forEach(r),Fr.forEach(r);for(var l=0;l<Oi.length;l++){var f=Oi[l];f.blockedOn===s&&(f.blockedOn=null)}for(;0<Oi.length&&(l=Oi[0],l.blockedOn===null);)av(l),l.blockedOn===null&&Oi.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var v=l[f],b=l[f+1],S=v[Wt]||null;if(typeof b=="function")S||uv(l);else if(S){var C=null;if(b&&b.hasAttribute("formAction")){if(v=b,S=b[Wt]||null)C=S.formAction;else if(Qd(v)!==null)continue}else C=S.action;typeof C=="function"?l[f+1]=C:(l.splice(f,3),f-=3),uv(l)}}}function Xd(s){this._internalRoot=s}$l.prototype.render=Xd.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,f=ln();nv(l,f,s,r,null,null)},$l.prototype.unmount=Xd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;nv(s.current,2,null,s,null,null),El(),r[ks]=null}};function $l(s){this._internalRoot=s}$l.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ep();s={blockedOn:null,target:s,priority:r};for(var l=0;l<Oi.length&&r!==0&&r<Oi[l].priority;l++);Oi.splice(l,0,s),l===0&&av(s)}};var cv=e.version;if(cv!=="19.1.1")throw Error(i(527,cv,"19.1.1"));G.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(r),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var QC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{ut=Fl.inject(QC),ct=Fl}catch{}}return Wr.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,f="",v=Eg,b=Ag,S=Ng,C=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(C=r.unstable_transitionCallbacks)),r=ev(s,1,!1,null,null,l,f,v,b,S,C,null),s[ks]=r.current,Pd(s),new Xd(r)},Wr.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var f=!1,v="",b=Eg,S=Ag,C=Ng,k=null,q=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks),l.formState!==void 0&&(q=l.formState)),r=ev(s,1,!0,r,l??null,f,v,b,S,C,k,q),r.context=tv(null),l=r.current,f=ln(),f=Gu(f),v=wi(f),v.callback=null,_i(l,v,f),l=f,r.current.lanes=l,er(r,l),Bn(r),s[ks]=r.current,Pd(s),new $l(r)},Wr.version="19.1.1",Wr}var Sv;function cE(){if(Sv)return tf.exports;Sv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tf.exports=uE(),tf.exports}var dE=cE();const fE=xh(dE),Sh=A.createContext({});function $o(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const Au=A.createContext(null),_a=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class hE extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pE({children:t,isPresent:e}){const n=A.useId(),i=A.useRef(null),o=A.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=A.useContext(_a);return A.useInsertionEffect(()=>{const{width:u,height:h,top:p,left:m}=o.current;if(e||!i.current||!u||!h)return;i.current.dataset.motionPopId=n;const y=document.createElement("style");return a&&(y.nonce=a),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            top: ${p}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[e]),g.jsx(hE,{isPresent:e,childRef:i,sizeRef:o,children:A.cloneElement(t,{ref:i})})}const mE=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:o,presenceAffectsLayout:a,mode:u})=>{const h=$o(gE),p=A.useId(),m=A.useCallback(x=>{h.set(x,!0);for(const T of h.values())if(!T)return;i&&i()},[h,i]),y=A.useMemo(()=>({id:p,initial:e,isPresent:n,custom:o,onExitComplete:m,register:x=>(h.set(x,!1),()=>h.delete(x))}),a?[Math.random(),m]:[n,m]);return A.useMemo(()=>{h.forEach((x,T)=>h.set(T,!1))},[n]),A.useEffect(()=>{!n&&!h.size&&i&&i()},[n]),u==="popLayout"&&(t=g.jsx(pE,{isPresent:n,children:t})),g.jsx(Au.Provider,{value:y,children:t})};function gE(){return new Map}function Gb(t=!0){const e=A.useContext(Au);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=e,a=A.useId();A.useEffect(()=>{t&&o(a)},[t]);const u=A.useCallback(()=>t&&i&&i(a),[a,i,t]);return!n&&i?[!1,u]:[!0]}const Yl=t=>t.key||"";function wv(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const wh=typeof window<"u",Ca=wh?A.useLayoutEffect:A.useEffect,di=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:a="sync",propagate:u=!1})=>{const[h,p]=Gb(u),m=A.useMemo(()=>wv(t),[t]),y=u&&!h?[]:m.map(Yl),x=A.useRef(!0),T=A.useRef(m),w=$o(()=>new Map),[_,E]=A.useState(m),[N,I]=A.useState(m);Ca(()=>{x.current=!1,T.current=m;for(let j=0;j<N.length;j++){const P=Yl(N[j]);y.includes(P)?w.delete(P):w.get(P)!==!0&&w.set(P,!1)}},[N,y.length,y.join("-")]);const M=[];if(m!==_){let j=[...m];for(let P=0;P<N.length;P++){const z=N[P],ee=Yl(z);y.includes(ee)||(j.splice(P,0,z),M.push(z))}a==="wait"&&M.length&&(j=M),I(wv(j)),E(m);return}const{forceRender:D}=A.useContext(Sh);return g.jsx(g.Fragment,{children:N.map(j=>{const P=Yl(j),z=u&&!h?!1:m===N||y.includes(P),ee=()=>{if(w.has(P))w.set(P,!0);else return;let Z=!0;w.forEach(re=>{re||(Z=!1)}),Z&&(D==null||D(),I(T.current),u&&(p==null||p()),i&&i())};return g.jsx(mE,{isPresent:z,initial:!x.current||n?void 0:!1,custom:z?void 0:e,presenceAffectsLayout:o,mode:a,onExitComplete:z?void 0:ee,children:j},P)})})},dn=t=>t;let Hb=dn;function _h(t){let e;return()=>(e===void 0&&(e=t()),e)}const jo=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},fi=t=>t*1e3,hi=t=>t/1e3,yE={useManualTiming:!1};function vE(t){let e=new Set,n=new Set,i=!1,o=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(m){a.has(m)&&(p.schedule(m),t()),m(u)}const p={schedule:(m,y=!1,x=!1)=>{const w=x&&i?e:n;return y&&a.add(m),w.has(m)||w.add(m),m},cancel:m=>{n.delete(m),a.delete(m)},process:m=>{if(u=m,i){o=!0;return}i=!0,[e,n]=[n,e],e.forEach(h),e.clear(),i=!1,o&&(o=!1,p.process(m))}};return p}const Jl=["read","resolveKeyframes","update","preRender","render","postRender"],xE=40;function $b(t,e){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=Jl.reduce((I,M)=>(I[M]=vE(a),I),{}),{read:h,resolveKeyframes:p,update:m,preRender:y,render:x,postRender:T}=u,w=()=>{const I=performance.now();n=!1,o.delta=i?1e3/60:Math.max(Math.min(I-o.timestamp,xE),1),o.timestamp=I,o.isProcessing=!0,h.process(o),p.process(o),m.process(o),y.process(o),x.process(o),T.process(o),o.isProcessing=!1,n&&e&&(i=!1,t(w))},_=()=>{n=!0,i=!0,o.isProcessing||t(w)};return{schedule:Jl.reduce((I,M)=>{const D=u[M];return I[M]=(j,P=!1,z=!1)=>(n||_(),D.schedule(j,P,z)),I},{}),cancel:I=>{for(let M=0;M<Jl.length;M++)u[Jl[M]].cancel(I)},state:o,steps:u}}const{schedule:st,cancel:pi,state:Lt,steps:rf}=$b(typeof requestAnimationFrame<"u"?requestAnimationFrame:dn,!0),Fb=A.createContext({strict:!1}),_v={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const t in _v)Bo[t]={isEnabled:e=>_v[t].some(n=>!!e[n])};function bE(t){for(const e in t)Bo[e]={...Bo[e],...t[e]}}const TE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function du(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||TE.has(t)}let Yb=t=>!du(t);function SE(t){t&&(Yb=e=>e.startsWith("on")?!du(e):t(e))}try{SE(require("@emotion/is-prop-valid").default)}catch{}function wE(t,e,n){const i={};for(const o in t)o==="values"&&typeof t.values=="object"||(Yb(o)||n===!0&&du(o)||!e&&!du(o)||t.draggable&&o.startsWith("onDrag"))&&(i[o]=t[o]);return i}function _E(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}const Nu=A.createContext({});function ya(t){return typeof t=="string"||Array.isArray(t)}function Mu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ch=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Eh=["initial",...Ch];function Ru(t){return Mu(t.animate)||Eh.some(e=>ya(t[e]))}function Jb(t){return!!(Ru(t)||t.variants)}function CE(t,e){if(Ru(t)){const{initial:n,animate:i}=t;return{initial:n===!1||ya(n)?n:void 0,animate:ya(i)?i:void 0}}return t.inherit!==!1?e:{}}function EE(t){const{initial:e,animate:n}=CE(t,A.useContext(Nu));return A.useMemo(()=>({initial:e,animate:n}),[Cv(e),Cv(n)])}function Cv(t){return Array.isArray(t)?t.join(" "):t}const AE=Symbol.for("motionComponentSymbol");function Mo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function NE(t,e,n){return A.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Mo(n)&&(n.current=i))},[e])}const Ah=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ME="framerAppearId",Kb="data-"+Ah(ME),{schedule:Nh}=$b(queueMicrotask,!1),Qb=A.createContext({});function RE(t,e,n,i,o){var a,u;const{visualElement:h}=A.useContext(Nu),p=A.useContext(Fb),m=A.useContext(Au),y=A.useContext(_a).reducedMotion,x=A.useRef(null);i=i||p.renderer,!x.current&&i&&(x.current=i(t,{visualState:e,parent:h,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:y}));const T=x.current,w=A.useContext(Qb);T&&!T.projection&&o&&(T.type==="html"||T.type==="svg")&&kE(x.current,n,o,w);const _=A.useRef(!1);A.useInsertionEffect(()=>{T&&_.current&&T.update(n,m)});const E=n[Kb],N=A.useRef(!!E&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,E))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,E)));return Ca(()=>{T&&(_.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),Nh.render(T.render),N.current&&T.animationState&&T.animationState.animateChanges())}),A.useEffect(()=>{T&&(!N.current&&T.animationState&&T.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var I;(I=window.MotionHandoffMarkAsComplete)===null||I===void 0||I.call(window,E)}),N.current=!1))}),T}function kE(t,e,n,i){const{layoutId:o,layout:a,drag:u,dragConstraints:h,layoutScroll:p,layoutRoot:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Wb(t.parent)),t.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:!!u||h&&Mo(h),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:m})}function Wb(t){if(t)return t.options.allowProjection!==!1?t.projection:Wb(t.parent)}function DE({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:o}){var a,u;t&&bE(t);function h(m,y){let x;const T={...A.useContext(_a),...m,layoutId:IE(m)},{isStatic:w}=T,_=EE(m),E=i(m,w);if(!w&&wh){PE();const N=LE(T);x=N.MeasureLayout,_.visualElement=RE(o,E,T,e,N.ProjectionNode)}return g.jsxs(Nu.Provider,{value:_,children:[x&&_.visualElement?g.jsx(x,{visualElement:_.visualElement,...T}):null,n(o,m,NE(E,_.visualElement,y),E,w,_.visualElement)]})}h.displayName=`motion.${typeof o=="string"?o:`create(${(u=(a=o.displayName)!==null&&a!==void 0?a:o.name)!==null&&u!==void 0?u:""})`}`;const p=A.forwardRef(h);return p[AE]=o,p}function IE({layoutId:t}){const e=A.useContext(Sh).id;return e&&t!==void 0?e+"-"+t:t}function PE(t,e){A.useContext(Fb).strict}function LE(t){const{drag:e,layout:n}=Bo;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const UE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Mh(t){return typeof t!="string"||t.includes("-")?!1:!!(UE.indexOf(t)>-1||/[A-Z]/u.test(t))}function Ev(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Rh(t,e,n,i){if(typeof e=="function"){const[o,a]=Ev(i);e=e(n!==void 0?n:t.custom,o,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,a]=Ev(i);e=e(n!==void 0?n:t.custom,o,a)}return e}const Rf=t=>Array.isArray(t),VE=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),jE=t=>Rf(t)?t[t.length-1]||0:t,Ut=t=>!!(t&&t.getVelocity);function ou(t){const e=Ut(t)?t.get():t;return VE(e)?e.toValue():e}function BE({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,o,a){const u={latestValues:OE(i,o,a,t),renderState:e()};return n&&(u.onMount=h=>n({props:i,current:h,...u}),u.onUpdate=h=>n(h)),u}const Xb=t=>(e,n)=>{const i=A.useContext(Nu),o=A.useContext(Au),a=()=>BE(t,e,i,o);return n?a():$o(a)};function OE(t,e,n,i){const o={},a=i(t,{});for(const T in a)o[T]=ou(a[T]);let{initial:u,animate:h}=t;const p=Ru(t),m=Jb(t);e&&m&&!p&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let y=n?n.initial===!1:!1;y=y||u===!1;const x=y?h:u;if(x&&typeof x!="boolean"&&!Mu(x)){const T=Array.isArray(x)?x:[x];for(let w=0;w<T.length;w++){const _=Rh(t,T[w]);if(_){const{transitionEnd:E,transition:N,...I}=_;for(const M in I){let D=I[M];if(Array.isArray(D)){const j=y?D.length-1:0;D=D[j]}D!==null&&(o[M]=D)}for(const M in E)o[M]=E[M]}}}return o}const Fo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Es=new Set(Fo),Zb=t=>e=>typeof e=="string"&&e.startsWith(t),eT=Zb("--"),qE=Zb("var(--"),kh=t=>qE(t)?zE.test(t.split("/*")[0].trim()):!1,zE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,mi=(t,e,n)=>n>e?e:n<t?t:n,Yo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},va={...Yo,transform:t=>mi(0,1,t)},Kl={...Yo,default:1},Ea=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Gi=Ea("deg"),Gn=Ea("%"),Me=Ea("px"),GE=Ea("vh"),HE=Ea("vw"),Av={...Gn,parse:t=>Gn.parse(t)/100,transform:t=>Gn.transform(t*100)},$E={borderWidth:Me,borderTopWidth:Me,borderRightWidth:Me,borderBottomWidth:Me,borderLeftWidth:Me,borderRadius:Me,radius:Me,borderTopLeftRadius:Me,borderTopRightRadius:Me,borderBottomRightRadius:Me,borderBottomLeftRadius:Me,width:Me,maxWidth:Me,height:Me,maxHeight:Me,top:Me,right:Me,bottom:Me,left:Me,padding:Me,paddingTop:Me,paddingRight:Me,paddingBottom:Me,paddingLeft:Me,margin:Me,marginTop:Me,marginRight:Me,marginBottom:Me,marginLeft:Me,backgroundPositionX:Me,backgroundPositionY:Me},FE={rotate:Gi,rotateX:Gi,rotateY:Gi,rotateZ:Gi,scale:Kl,scaleX:Kl,scaleY:Kl,scaleZ:Kl,skew:Gi,skewX:Gi,skewY:Gi,distance:Me,translateX:Me,translateY:Me,translateZ:Me,x:Me,y:Me,z:Me,perspective:Me,transformPerspective:Me,opacity:va,originX:Av,originY:Av,originZ:Me},Nv={...Yo,transform:Math.round},Dh={...$E,...FE,zIndex:Nv,size:Me,fillOpacity:va,strokeOpacity:va,numOctaves:Nv},YE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JE=Fo.length;function KE(t,e,n){let i="",o=!0;for(let a=0;a<JE;a++){const u=Fo[a],h=t[u];if(h===void 0)continue;let p=!0;if(typeof h=="number"?p=h===(u.startsWith("scale")?1:0):p=parseFloat(h)===0,!p||n){const m=tT(h,Dh[u]);if(!p){o=!1;const y=YE[u]||u;i+=`${y}(${m}) `}n&&(e[u]=m)}}return i=i.trim(),n?i=n(e,o?"":i):o&&(i="none"),i}function Ih(t,e,n){const{style:i,vars:o,transformOrigin:a}=t;let u=!1,h=!1;for(const p in e){const m=e[p];if(Es.has(p)){u=!0;continue}else if(eT(p)){o[p]=m;continue}else{const y=tT(m,Dh[p]);p.startsWith("origin")?(h=!0,a[p]=y):i[p]=y}}if(e.transform||(u||n?i.transform=KE(e,t.transform,n):i.transform&&(i.transform="none")),h){const{originX:p="50%",originY:m="50%",originZ:y=0}=a;i.transformOrigin=`${p} ${m} ${y}`}}const QE={offset:"stroke-dashoffset",array:"stroke-dasharray"},WE={offset:"strokeDashoffset",array:"strokeDasharray"};function XE(t,e,n=1,i=0,o=!0){t.pathLength=1;const a=o?QE:WE;t[a.offset]=Me.transform(-i);const u=Me.transform(e),h=Me.transform(n);t[a.array]=`${u} ${h}`}function Mv(t,e,n){return typeof t=="string"?t:Me.transform(e+n*t)}function ZE(t,e,n){const i=Mv(e,t.x,t.width),o=Mv(n,t.y,t.height);return`${i} ${o}`}function Ph(t,{attrX:e,attrY:n,attrScale:i,originX:o,originY:a,pathLength:u,pathSpacing:h=1,pathOffset:p=0,...m},y,x){if(Ih(t,m,x),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:w,dimensions:_}=t;T.transform&&(_&&(w.transform=T.transform),delete T.transform),_&&(o!==void 0||a!==void 0||w.transform)&&(w.transformOrigin=ZE(_,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),u!==void 0&&XE(T,u,h,p,!1)}const Lh=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),nT=()=>({...Lh(),attrs:{}}),Uh=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iT(t,{style:e,vars:n},i,o){Object.assign(t.style,e,o&&o.getProjectionStyles(i));for(const a in n)t.style.setProperty(a,n[a])}const sT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oT(t,e,n,i){iT(t,e,void 0,i);for(const o in e.attrs)t.setAttribute(sT.has(o)?o:Ah(o),e.attrs[o])}const fu={};function eA(t){Object.assign(fu,t)}function rT(t,{layout:e,layoutId:n}){return Es.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!fu[t]||t==="opacity")}function Vh(t,e,n){var i;const{style:o}=t,a={};for(const u in o)(Ut(o[u])||e.style&&Ut(e.style[u])||rT(u,t)||((i=n==null?void 0:n.getValue(u))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(a[u]=o[u]);return a}function aT(t,e,n){const i=Vh(t,e,n);for(const o in t)if(Ut(t[o])||Ut(e[o])){const a=Fo.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[a]=t[o]}return i}function tA(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Rv=["x","y","width","height","cx","cy","r"],nA={useVisualState:Xb({scrapeMotionValuesFromProps:aT,createRenderState:nT,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:o})=>{if(!n)return;let a=!!t.drag;if(!a){for(const h in o)if(Es.has(h)){a=!0;break}}if(!a)return;let u=!e;if(e)for(let h=0;h<Rv.length;h++){const p=Rv[h];t[p]!==e[p]&&(u=!0)}u&&st.read(()=>{tA(n,i),st.render(()=>{Ph(i,o,Uh(n.tagName),t.transformTemplate),oT(n,i)})})}})},iA={useVisualState:Xb({scrapeMotionValuesFromProps:Vh,createRenderState:Lh})};function lT(t,e,n){for(const i in e)!Ut(e[i])&&!rT(i,n)&&(t[i]=e[i])}function sA({transformTemplate:t},e){return A.useMemo(()=>{const n=Lh();return Ih(n,e,t),Object.assign({},n.vars,n.style)},[e])}function oA(t,e){const n=t.style||{},i={};return lT(i,n,t),Object.assign(i,sA(t,e)),i}function rA(t,e){const n={},i=oA(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function aA(t,e,n,i){const o=A.useMemo(()=>{const a=nT();return Ph(a,e,Uh(i),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};lT(a,t.style,t),o.style={...a,...o.style}}return o}function lA(t=!1){return(n,i,o,{latestValues:a},u)=>{const p=(Mh(n)?aA:rA)(i,a,u,n),m=wE(i,typeof n=="string",t),y=n!==A.Fragment?{...m,...p,ref:o}:{},{children:x}=i,T=A.useMemo(()=>Ut(x)?x.get():x,[x]);return A.createElement(n,{...y,children:T})}}function uA(t,e){return function(i,{forwardMotionProps:o}={forwardMotionProps:!1}){const u={...Mh(i)?nA:iA,preloadedFeatures:t,useRender:lA(o),createVisualElement:e,Component:i};return DE(u)}}function uT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function ku(t,e,n){const i=t.getProps();return Rh(i,e,n!==void 0?n:i.custom,t)}const cA=_h(()=>window.ScrollTimeline!==void 0);class dA{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(o=>{if(cA()&&o.attachTimeline)return o.attachTimeline(e);if(typeof n=="function")return n(o)});return()=>{i.forEach((o,a)=>{o&&o(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class fA extends dA{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function jh(t,e){return t?t[e]||t.default||t:void 0}const kf=2e4;function cT(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<kf;)e+=n,i=t.next(e);return e>=kf?1/0:e}function Bh(t){return typeof t=="function"}function kv(t,e){t.timeline=e,t.onfinish=null}const Oh=t=>Array.isArray(t)&&typeof t[0]=="number",hA={linearEasing:void 0};function pA(t,e){const n=_h(t);return()=>{var i;return(i=hA[e])!==null&&i!==void 0?i:n()}}const hu=pA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),dT=(t,e,n=10)=>{let i="";const o=Math.max(Math.round(e/n),2);for(let a=0;a<o;a++)i+=t(jo(0,o-1,a))+", ";return`linear(${i.substring(0,i.length-2)})`};function fT(t){return!!(typeof t=="function"&&hu()||!t||typeof t=="string"&&(t in Df||hu())||Oh(t)||Array.isArray(t)&&t.every(fT))}const na=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Df={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:na([0,.65,.55,1]),circOut:na([.55,0,1,.45]),backIn:na([.31,.01,.66,-.59]),backOut:na([.33,1.53,.69,.99])};function hT(t,e){if(t)return typeof t=="function"&&hu()?dT(t,e):Oh(t)?na(t):Array.isArray(t)?t.map(n=>hT(n,e)||Df.easeOut):Df[t]}const Dn={x:!1,y:!1};function pT(){return Dn.x||Dn.y}function mA(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let o=document;const a=(i=void 0)!==null&&i!==void 0?i:o.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function mT(t,e){const n=mA(t),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[n,o,()=>i.abort()]}function Dv(t){return e=>{e.pointerType==="touch"||pT()||t(e)}}function gA(t,e,n={}){const[i,o,a]=mT(t,n),u=Dv(h=>{const{target:p}=h,m=e(h);if(typeof m!="function"||!p)return;const y=Dv(x=>{m(x),p.removeEventListener("pointerleave",y)});p.addEventListener("pointerleave",y,o)});return i.forEach(h=>{h.addEventListener("pointerenter",u,o)}),a}const gT=(t,e)=>e?t===e?!0:gT(t,e.parentElement):!1,qh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,yA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vA(t){return yA.has(t.tagName)||t.tabIndex!==-1}const ia=new WeakSet;function Iv(t){return e=>{e.key==="Enter"&&t(e)}}function af(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const xA=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Iv(()=>{if(ia.has(n))return;af(n,"down");const o=Iv(()=>{af(n,"up")}),a=()=>af(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Pv(t){return qh(t)&&!pT()}function bA(t,e,n={}){const[i,o,a]=mT(t,n),u=h=>{const p=h.currentTarget;if(!Pv(h)||ia.has(p))return;ia.add(p);const m=e(h),y=(w,_)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",T),!(!Pv(w)||!ia.has(p))&&(ia.delete(p),typeof m=="function"&&m(w,{success:_}))},x=w=>{y(w,n.useGlobalTarget||gT(p,w.target))},T=w=>{y(w,!1)};window.addEventListener("pointerup",x,o),window.addEventListener("pointercancel",T,o)};return i.forEach(h=>{!vA(h)&&h.getAttribute("tabindex")===null&&(h.tabIndex=0),(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,o),h.addEventListener("focus",m=>xA(m,o),o)}),a}function TA(t){return t==="x"||t==="y"?Dn[t]?null:(Dn[t]=!0,()=>{Dn[t]=!1}):Dn.x||Dn.y?null:(Dn.x=Dn.y=!0,()=>{Dn.x=Dn.y=!1})}const yT=new Set(["width","height","top","left","right","bottom",...Fo]);let ru;function SA(){ru=void 0}const Hn={now:()=>(ru===void 0&&Hn.set(Lt.isProcessing||yE.useManualTiming?Lt.timestamp:performance.now()),ru),set:t=>{ru=t,queueMicrotask(SA)}};function zh(t,e){t.indexOf(e)===-1&&t.push(e)}function Gh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Hh{constructor(){this.subscriptions=[]}add(e){return zh(this.subscriptions,e),()=>Gh(this.subscriptions,e)}notify(e,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,i);else for(let a=0;a<o;a++){const u=this.subscriptions[a];u&&u(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function vT(t,e){return e?t*(1e3/e):0}const Lv=30,wA=t=>!isNaN(parseFloat(t)),ra={current:void 0};class _A{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,o=!0)=>{const a=Hn.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=wA(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Hh);const i=this.events[e].add(n);return e==="change"?()=>{i(),st.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return ra.current&&ra.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Lv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Lv);return vT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Oo(t,e){return new _A(t,e)}function CA(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Oo(n))}function $h(t,e){const n=ku(t,e);let{transitionEnd:i={},transition:o={},...a}=n||{};a={...a,...i};for(const u in a){const h=jE(a[u]);CA(t,u,h)}}function EA(t){return!!(Ut(t)&&t.add)}function If(t,e){const n=t.getValue("willChange");if(EA(n))return n.add(e)}function xT(t){return t.props[Kb]}const bT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,AA=1e-7,NA=12;function MA(t,e,n,i,o){let a,u,h=0;do u=e+(n-e)/2,a=bT(u,i,o)-t,a>0?n=u:e=u;while(Math.abs(a)>AA&&++h<NA);return u}function Aa(t,e,n,i){if(t===e&&n===i)return dn;const o=a=>MA(a,0,1,t,n);return a=>a===0||a===1?a:bT(o(a),e,i)}const TT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ST=t=>e=>1-t(1-e),wT=Aa(.33,1.53,.69,.99),Fh=ST(wT),_T=TT(Fh),CT=t=>(t*=2)<1?.5*Fh(t):.5*(2-Math.pow(2,-10*(t-1))),Yh=t=>1-Math.sin(Math.acos(t)),ET=ST(Yh),AT=TT(Yh),NT=t=>/^0[^.\s]+$/u.test(t);function RA(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||NT(t):!0}const aa=t=>Math.round(t*1e5)/1e5,Jh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function kA(t){return t==null}const DA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Kh=(t,e)=>n=>!!(typeof n=="string"&&DA.test(n)&&n.startsWith(t)||e&&!kA(n)&&Object.prototype.hasOwnProperty.call(n,e)),MT=(t,e,n)=>i=>{if(typeof i!="string")return i;const[o,a,u,h]=i.match(Jh);return{[t]:parseFloat(o),[e]:parseFloat(a),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},IA=t=>mi(0,255,t),lf={...Yo,transform:t=>Math.round(IA(t))},Ss={test:Kh("rgb","red"),parse:MT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+lf.transform(t)+", "+lf.transform(e)+", "+lf.transform(n)+", "+aa(va.transform(i))+")"};function PA(t){let e="",n="",i="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Pf={test:Kh("#"),parse:PA,transform:Ss.transform},Ro={test:Kh("hsl","hue"),parse:MT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Gn.transform(aa(e))+", "+Gn.transform(aa(n))+", "+aa(va.transform(i))+")"},Ft={test:t=>Ss.test(t)||Pf.test(t)||Ro.test(t),parse:t=>Ss.test(t)?Ss.parse(t):Ro.test(t)?Ro.parse(t):Pf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ss.transform(t):Ro.transform(t)},LA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function UA(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Jh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(LA))===null||n===void 0?void 0:n.length)||0)>0}const RT="number",kT="color",VA="var",jA="var(",Uv="${}",BA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xa(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},o=[];let a=0;const h=e.replace(BA,p=>(Ft.test(p)?(i.color.push(a),o.push(kT),n.push(Ft.parse(p))):p.startsWith(jA)?(i.var.push(a),o.push(VA),n.push(p)):(i.number.push(a),o.push(RT),n.push(parseFloat(p))),++a,Uv)).split(Uv);return{values:n,split:h,indexes:i,types:o}}function DT(t){return xa(t).values}function IT(t){const{split:e,types:n}=xa(t),i=e.length;return o=>{let a="";for(let u=0;u<i;u++)if(a+=e[u],o[u]!==void 0){const h=n[u];h===RT?a+=aa(o[u]):h===kT?a+=Ft.transform(o[u]):a+=o[u]}return a}}const OA=t=>typeof t=="number"?0:t;function qA(t){const e=DT(t);return IT(t)(e.map(OA))}const Fi={test:UA,parse:DT,createTransformer:IT,getAnimatableNone:qA},zA=new Set(["brightness","contrast","saturate","opacity"]);function GA(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Jh)||[];if(!i)return t;const o=n.replace(i,"");let a=zA.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+o+")"}const HA=/\b([a-z-]*)\(.*?\)/gu,Lf={...Fi,getAnimatableNone:t=>{const e=t.match(HA);return e?e.map(GA).join(" "):t}},$A={...Dh,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:Lf,WebkitFilter:Lf},Qh=t=>$A[t];function PT(t,e){let n=Qh(t);return n!==Lf&&(n=Fi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const FA=new Set(["auto","none","0"]);function YA(t,e,n){let i=0,o;for(;i<t.length&&!o;){const a=t[i];typeof a=="string"&&!FA.has(a)&&xa(a).values.length&&(o=t[i]),i++}if(o&&n)for(const a of e)t[a]=PT(n,o)}const Vv=t=>t===Yo||t===Me,jv=(t,e)=>parseFloat(t.split(", ")[e]),Bv=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/u);if(o)return jv(o[1],e);{const a=i.match(/^matrix\((.+)\)$/u);return a?jv(a[1],t):0}},JA=new Set(["x","y","z"]),KA=Fo.filter(t=>!JA.has(t));function QA(t){const e=[];return KA.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const qo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Bv(4,13),y:Bv(5,14)};qo.translateX=qo.x;qo.translateY=qo.y;const ws=new Set;let Uf=!1,Vf=!1;function LT(){if(Vf){const t=Array.from(ws).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const o=QA(i);o.length&&(n.set(i,o),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([a,u])=>{var h;(h=i.getValue(a))===null||h===void 0||h.set(u)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Vf=!1,Uf=!1,ws.forEach(t=>t.complete()),ws.clear()}function UT(){ws.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Vf=!0)})}function WA(){UT(),LT()}class Wh{constructor(e,n,i,o,a,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=o,this.element=a,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ws.add(this),Uf||(Uf=!0,st.read(UT),st.resolveKeyframes(LT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:o}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const u=o==null?void 0:o.get(),h=e[e.length-1];if(u!==void 0)e[0]=u;else if(i&&n){const p=i.readValue(n,h);p!=null&&(e[0]=p)}e[0]===void 0&&(e[0]=h),o&&u===void 0&&o.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ws.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ws.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const VT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),XA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZA(t){const e=XA.exec(t);if(!e)return[,];const[,n,i,o]=e;return[`--${n??i}`,o]}function jT(t,e,n=1){const[i,o]=ZA(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const u=a.trim();return VT(u)?parseFloat(u):u}return kh(o)?jT(o,e,n+1):o}const BT=t=>e=>e.test(t),eN={test:t=>t==="auto",parse:t=>t},OT=[Yo,Me,Gn,Gi,HE,GE,eN],Ov=t=>OT.find(BT(t));class qT extends Wh{constructor(e,n,i,o,a){super(e,n,i,o,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let m=e[p];if(typeof m=="string"&&(m=m.trim(),kh(m))){const y=jT(m,n.current);y!==void 0&&(e[p]=y),p===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!yT.has(i)||e.length!==2)return;const[o,a]=e,u=Ov(o),h=Ov(a);if(u!==h)if(Vv(u)&&Vv(h))for(let p=0;p<e.length;p++){const m=e[p];typeof m=="string"&&(e[p]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let o=0;o<e.length;o++)RA(e[o])&&i.push(o);i.length&&YA(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const a=n.getValue(i);a&&a.jump(this.measuredOrigin,!1);const u=o.length-1,h=o[u];o[u]=qo[i](n.measureViewportBox(),window.getComputedStyle(n.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([p,m])=>{n.getValue(p).set(m)}),this.resolveNoneKeyframes()}}const qv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Fi.test(t)||t==="0")&&!t.startsWith("url("));function tN(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function nN(t,e,n,i){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],u=qv(o,e),h=qv(a,e);return!u||!h?!1:tN(t)||(n==="spring"||Bh(n))&&i}const iN=t=>t!==null;function Du(t,{repeat:e,repeatType:n="loop"},i){const o=t.filter(iN),a=e&&n!=="loop"&&e%2===1?0:o.length-1;return!a||i===void 0?o[a]:i}const sN=40;class zT{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Hn.now(),this.options={autoplay:e,delay:n,type:i,repeat:o,repeatDelay:a,repeatType:u,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>sN?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&WA(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Hn.now(),this.hasAttemptedResolve=!0;const{name:i,type:o,velocity:a,delay:u,onComplete:h,onUpdate:p,isGenerator:m}=this.options;if(!m&&!nN(e,i,o,a))if(u)this.options.duration=0;else{p&&p(Du(e,this.options,n)),h&&h(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,n);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...y},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ht=(t,e,n)=>t+(e-t)*n;function uf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function oN({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let o=0,a=0,u=0;if(!e)o=a=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,p=2*n-h;o=uf(p,h,t+1/3),a=uf(p,h,t),u=uf(p,h,t-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:i}}function pu(t,e){return n=>n>0?e:t}const cf=(t,e,n)=>{const i=t*t,o=n*(e*e-i)+i;return o<0?0:Math.sqrt(o)},rN=[Pf,Ss,Ro],aN=t=>rN.find(e=>e.test(t));function zv(t){const e=aN(t);if(!e)return!1;let n=e.parse(t);return e===Ro&&(n=oN(n)),n}const Gv=(t,e)=>{const n=zv(t),i=zv(e);if(!n||!i)return pu(t,e);const o={...n};return a=>(o.red=cf(n.red,i.red,a),o.green=cf(n.green,i.green,a),o.blue=cf(n.blue,i.blue,a),o.alpha=ht(n.alpha,i.alpha,a),Ss.transform(o))},lN=(t,e)=>n=>e(t(n)),Na=(...t)=>t.reduce(lN),jf=new Set(["none","hidden"]);function uN(t,e){return jf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function cN(t,e){return n=>ht(t,e,n)}function Xh(t){return typeof t=="number"?cN:typeof t=="string"?kh(t)?pu:Ft.test(t)?Gv:hN:Array.isArray(t)?GT:typeof t=="object"?Ft.test(t)?Gv:dN:pu}function GT(t,e){const n=[...t],i=n.length,o=t.map((a,u)=>Xh(a)(a,e[u]));return a=>{for(let u=0;u<i;u++)n[u]=o[u](a);return n}}function dN(t,e){const n={...t,...e},i={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(i[o]=Xh(t[o])(t[o],e[o]));return o=>{for(const a in i)n[a]=i[a](o);return n}}function fN(t,e){var n;const i=[],o={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const u=e.types[a],h=t.indexes[u][o[u]],p=(n=t.values[h])!==null&&n!==void 0?n:0;i[a]=p,o[u]++}return i}const hN=(t,e)=>{const n=Fi.createTransformer(e),i=xa(t),o=xa(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?jf.has(t)&&!o.values.length||jf.has(e)&&!i.values.length?uN(t,e):Na(GT(fN(i,o),o.values),n):pu(t,e)};function HT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ht(t,e,n):Xh(t)(t,e)}const pN=5;function $T(t,e,n){const i=Math.max(e-pN,0);return vT(n-t(i),e-i)}const vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},df=.001;function mN({duration:t=vt.duration,bounce:e=vt.bounce,velocity:n=vt.velocity,mass:i=vt.mass}){let o,a,u=1-e;u=mi(vt.minDamping,vt.maxDamping,u),t=mi(vt.minDuration,vt.maxDuration,hi(t)),u<1?(o=m=>{const y=m*u,x=y*t,T=y-n,w=Bf(m,u),_=Math.exp(-x);return df-T/w*_},a=m=>{const x=m*u*t,T=x*n+n,w=Math.pow(u,2)*Math.pow(m,2)*t,_=Math.exp(-x),E=Bf(Math.pow(m,2),u);return(-o(m)+df>0?-1:1)*((T-w)*_)/E}):(o=m=>{const y=Math.exp(-m*t),x=(m-n)*t+1;return-df+y*x},a=m=>{const y=Math.exp(-m*t),x=(n-m)*(t*t);return y*x});const h=5/t,p=yN(o,a,h);if(t=fi(t),isNaN(p))return{stiffness:vt.stiffness,damping:vt.damping,duration:t};{const m=Math.pow(p,2)*i;return{stiffness:m,damping:u*2*Math.sqrt(i*m),duration:t}}}const gN=12;function yN(t,e,n){let i=n;for(let o=1;o<gN;o++)i=i-t(i)/e(i);return i}function Bf(t,e){return t*Math.sqrt(1-e*e)}const vN=["duration","bounce"],xN=["stiffness","damping","mass"];function Hv(t,e){return e.some(n=>t[n]!==void 0)}function bN(t){let e={velocity:vt.velocity,stiffness:vt.stiffness,damping:vt.damping,mass:vt.mass,isResolvedFromDuration:!1,...t};if(!Hv(t,xN)&&Hv(t,vN))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,a=2*mi(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:vt.mass,stiffness:o,damping:a}}else{const n=mN(t);e={...e,...n,mass:vt.mass},e.isResolvedFromDuration=!0}return e}function FT(t=vt.visualDuration,e=vt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:o}=n;const a=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:a},{stiffness:p,damping:m,mass:y,duration:x,velocity:T,isResolvedFromDuration:w}=bN({...n,velocity:-hi(n.velocity||0)}),_=T||0,E=m/(2*Math.sqrt(p*y)),N=u-a,I=hi(Math.sqrt(p/y)),M=Math.abs(N)<5;i||(i=M?vt.restSpeed.granular:vt.restSpeed.default),o||(o=M?vt.restDelta.granular:vt.restDelta.default);let D;if(E<1){const P=Bf(I,E);D=z=>{const ee=Math.exp(-E*I*z);return u-ee*((_+E*I*N)/P*Math.sin(P*z)+N*Math.cos(P*z))}}else if(E===1)D=P=>u-Math.exp(-I*P)*(N+(_+I*N)*P);else{const P=I*Math.sqrt(E*E-1);D=z=>{const ee=Math.exp(-E*I*z),Z=Math.min(P*z,300);return u-ee*((_+E*I*N)*Math.sinh(Z)+P*N*Math.cosh(Z))/P}}const j={calculatedDuration:w&&x||null,next:P=>{const z=D(P);if(w)h.done=P>=x;else{let ee=0;E<1&&(ee=P===0?fi(_):$T(D,P,z));const Z=Math.abs(ee)<=i,re=Math.abs(u-z)<=o;h.done=Z&&re}return h.value=h.done?u:z,h},toString:()=>{const P=Math.min(cT(j),kf),z=dT(ee=>j.next(P*ee).value,P,30);return P+"ms "+z}};return j}function $v({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:p,restDelta:m=.5,restSpeed:y}){const x=t[0],T={done:!1,value:x},w=Z=>h!==void 0&&Z<h||p!==void 0&&Z>p,_=Z=>h===void 0?p:p===void 0||Math.abs(h-Z)<Math.abs(p-Z)?h:p;let E=n*e;const N=x+E,I=u===void 0?N:u(N);I!==N&&(E=I-x);const M=Z=>-E*Math.exp(-Z/i),D=Z=>I+M(Z),j=Z=>{const re=M(Z),ye=D(Z);T.done=Math.abs(re)<=m,T.value=T.done?I:ye};let P,z;const ee=Z=>{w(T.value)&&(P=Z,z=FT({keyframes:[T.value,_(T.value)],velocity:$T(D,Z,T.value),damping:o,stiffness:a,restDelta:m,restSpeed:y}))};return ee(0),{calculatedDuration:null,next:Z=>{let re=!1;return!z&&P===void 0&&(re=!0,j(Z),ee(Z)),P!==void 0&&Z>=P?z.next(Z-P):(!re&&j(Z),T)}}}const TN=Aa(.42,0,1,1),SN=Aa(0,0,.58,1),YT=Aa(.42,0,.58,1),wN=t=>Array.isArray(t)&&typeof t[0]!="number",_N={linear:dn,easeIn:TN,easeInOut:YT,easeOut:SN,circIn:Yh,circInOut:AT,circOut:ET,backIn:Fh,backInOut:_T,backOut:wT,anticipate:CT},Fv=t=>{if(Oh(t)){Hb(t.length===4);const[e,n,i,o]=t;return Aa(e,n,i,o)}else if(typeof t=="string")return _N[t];return t};function CN(t,e,n){const i=[],o=n||HT,a=t.length-1;for(let u=0;u<a;u++){let h=o(t[u],t[u+1]);if(e){const p=Array.isArray(e)?e[u]||dn:e;h=Na(p,h)}i.push(h)}return i}function JT(t,e,{clamp:n=!0,ease:i,mixer:o}={}){const a=t.length;if(Hb(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=CN(e,i,o),p=h.length,m=y=>{if(u&&y<t[0])return e[0];let x=0;if(p>1)for(;x<t.length-2&&!(y<t[x+1]);x++);const T=jo(t[x],t[x+1],y);return h[x](T)};return n?y=>m(mi(t[0],t[a-1],y)):m}function EN(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const o=jo(0,e,i);t.push(ht(n,1,o))}}function AN(t){const e=[0];return EN(e,t.length-1),e}function NN(t,e){return t.map(n=>n*e)}function MN(t,e){return t.map(()=>e||YT).splice(0,t.length-1)}function mu({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const o=wN(i)?i.map(Fv):Fv(i),a={done:!1,value:e[0]},u=NN(n&&n.length===e.length?n:AN(e),t),h=JT(u,e,{ease:Array.isArray(o)?o:MN(e,o)});return{calculatedDuration:t,next:p=>(a.value=h(p),a.done=p>=t,a)}}const RN=t=>{const e=({timestamp:n})=>t(n);return{start:()=>st.update(e,!0),stop:()=>pi(e),now:()=>Lt.isProcessing?Lt.timestamp:Hn.now()}},kN={decay:$v,inertia:$v,tween:mu,keyframes:mu,spring:FT},DN=t=>t/100;class Iu extends zT{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:p}=this.options;p&&p()};const{name:n,motionValue:i,element:o,keyframes:a}=this.options,u=(o==null?void 0:o.KeyframeResolver)||Wh,h=(p,m)=>this.onKeyframesResolved(p,m);this.resolver=new u(a,h,n,i,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a,velocity:u=0}=this.options,h=Bh(n)?n:kN[n]||mu;let p,m;h!==mu&&typeof e[0]!="number"&&(p=Na(DN,HT(e[0],e[1])),e=[0,100]);const y=h({...this.options,keyframes:e});a==="mirror"&&(m=h({...this.options,keyframes:[...e].reverse(),velocity:-u})),y.calculatedDuration===null&&(y.calculatedDuration=cT(y));const{calculatedDuration:x}=y,T=x+o,w=T*(i+1)-o;return{generator:y,mirroredGenerator:m,mapPercentToKeyframes:p,calculatedDuration:x,resolvedDuration:T,totalDuration:w}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:Z}=this.options;return{done:!0,value:Z[Z.length-1]}}const{finalKeyframe:o,generator:a,mirroredGenerator:u,mapPercentToKeyframes:h,keyframes:p,calculatedDuration:m,totalDuration:y,resolvedDuration:x}=i;if(this.startTime===null)return a.next(0);const{delay:T,repeat:w,repeatType:_,repeatDelay:E,onUpdate:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const I=this.currentTime-T*(this.speed>=0?1:-1),M=this.speed>=0?I<0:I>y;this.currentTime=Math.max(I,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let D=this.currentTime,j=a;if(w){const Z=Math.min(this.currentTime,y)/x;let re=Math.floor(Z),ye=Z%1;!ye&&Z>=1&&(ye=1),ye===1&&re--,re=Math.min(re,w+1),!!(re%2)&&(_==="reverse"?(ye=1-ye,E&&(ye-=E/x)):_==="mirror"&&(j=u)),D=mi(0,1,ye)*x}const P=M?{done:!1,value:p[0]}:j.next(D);h&&(P.value=h(P.value));let{done:z}=P;!M&&m!==null&&(z=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const ee=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return ee&&o!==void 0&&(P.value=Du(p,this.options,o)),N&&N(P.value),ee&&this.finish(),P}get duration(){const{resolved:e}=this;return e?hi(e.calculatedDuration):0}get time(){return hi(this.currentTime)}set time(e){e=fi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=hi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=RN,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}function IN(t){return new Iu(t)}const PN=new Set(["opacity","clipPath","filter","transform"]);function LN(t,e,n,{delay:i=0,duration:o=300,repeat:a=0,repeatType:u="loop",ease:h="easeInOut",times:p}={}){const m={[e]:n};p&&(m.offset=p);const y=hT(h,o);return Array.isArray(y)&&(m.easing=y),t.animate(m,{delay:i,duration:o,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}const UN=_h(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),gu=10,VN=2e4;function jN(t){return Bh(t.type)||t.type==="spring"||!fT(t.ease)}function BN(t,e){const n=new Iu({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const o=[];let a=0;for(;!i.done&&a<VN;)i=n.sample(a),o.push(i.value),a+=gu;return{times:void 0,keyframes:o,duration:a-gu,ease:"linear"}}const KT={anticipate:CT,backInOut:_T,circInOut:AT};function ON(t){return t in KT}class Yv extends zT{constructor(e){super(e);const{name:n,motionValue:i,element:o,keyframes:a}=this.options;this.resolver=new qT(a,(u,h)=>this.onKeyframesResolved(u,h),n,i,o),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:o,ease:a,type:u,motionValue:h,name:p,startTime:m}=this.options;if(!h.owner||!h.owner.current)return!1;if(typeof a=="string"&&hu()&&ON(a)&&(a=KT[a]),jN(this.options)){const{onComplete:x,onUpdate:T,motionValue:w,element:_,...E}=this.options,N=BN(e,E);e=N.keyframes,e.length===1&&(e[1]=e[0]),i=N.duration,o=N.times,a=N.ease,u="keyframes"}const y=LN(h.owner.current,p,e,{...this.options,duration:i,times:o,ease:a});return y.startTime=m??this.calcStartTime(),this.pendingTimeline?(kv(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:x}=this.options;h.set(Du(e,this.options,n)),x&&x(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:i,times:o,type:u,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return hi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return hi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=fi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return dn;const{animation:i}=n;kv(i,e)}return dn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:o,type:a,ease:u,times:h}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:m,onUpdate:y,onComplete:x,element:T,...w}=this.options,_=new Iu({...w,keyframes:i,duration:o,type:a,ease:u,times:h,isGenerator:!0}),E=fi(this.time);m.setWithVelocity(_.sample(E-gu).value,_.sample(E).value,gu)}const{onStop:p}=this.options;p&&p(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:o,repeatType:a,damping:u,type:h}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:m}=n.owner.getProps();return UN()&&i&&PN.has(i)&&!p&&!m&&!o&&a!=="mirror"&&u!==0&&h!=="inertia"}}const qN={type:"spring",stiffness:500,damping:25,restSpeed:10},zN=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),GN={type:"keyframes",duration:.8},HN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$N=(t,{keyframes:e})=>e.length>2?GN:Es.has(t)?t.startsWith("scale")?zN(e[1]):qN:HN;function FN({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:u,repeatDelay:h,from:p,elapsed:m,...y}){return!!Object.keys(y).length}const Zh=(t,e,n,i={},o,a)=>u=>{const h=jh(i,t)||{},p=h.delay||i.delay||0;let{elapsed:m=0}=i;m=m-fi(p);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-m,onUpdate:T=>{e.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:a?void 0:o};FN(h)||(y={...y,...$N(t,y)}),y.duration&&(y.duration=fi(y.duration)),y.repeatDelay&&(y.repeatDelay=fi(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let x=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(x=!0)),x&&!a&&e.get()!==void 0){const T=Du(y.keyframes,h);if(T!==void 0)return st.update(()=>{y.onUpdate(T),y.onComplete()}),new fA([])}return!a&&Yv.supports(y)?new Yv(y):new Iu(y)};function YN({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function QT(t,e,{delay:n=0,transitionOverride:i,type:o}={}){var a;let{transition:u=t.getDefaultTransition(),transitionEnd:h,...p}=e;i&&(u=i);const m=[],y=o&&t.animationState&&t.animationState.getState()[o];for(const x in p){const T=t.getValue(x,(a=t.latestValues[x])!==null&&a!==void 0?a:null),w=p[x];if(w===void 0||y&&YN(y,x))continue;const _={delay:n,...jh(u||{},x)};let E=!1;if(window.MotionHandoffAnimation){const I=xT(t);if(I){const M=window.MotionHandoffAnimation(I,x,st);M!==null&&(_.startTime=M,E=!0)}}If(t,x),T.start(Zh(x,T,w,t.shouldReduceMotion&&yT.has(x)?{type:!1}:_,t,E));const N=T.animation;N&&m.push(N)}return h&&Promise.all(m).then(()=>{st.update(()=>{h&&$h(t,h)})}),m}function Of(t,e,n={}){var i;const o=ku(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(a=n.transitionOverride);const u=o?()=>Promise.all(QT(t,o,n)):()=>Promise.resolve(),h=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:y=0,staggerChildren:x,staggerDirection:T}=a;return JN(t,e,y+m,x,T,n)}:()=>Promise.resolve(),{when:p}=a;if(p){const[m,y]=p==="beforeChildren"?[u,h]:[h,u];return m().then(()=>y())}else return Promise.all([u(),h(n.delay)])}function JN(t,e,n=0,i=0,o=1,a){const u=[],h=(t.variantChildren.size-1)*i,p=o===1?(m=0)=>m*i:(m=0)=>h-m*i;return Array.from(t.variantChildren).sort(KN).forEach((m,y)=>{m.notify("AnimationStart",e),u.push(Of(m,e,{...a,delay:n+p(y)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(u)}function KN(t,e){return t.sortNodePosition(e)}function WT(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(a=>Of(t,a,n));i=Promise.all(o)}else if(typeof e=="string")i=Of(t,e,n);else{const o=typeof e=="function"?ku(t,e,n.custom):e;i=Promise.all(QT(t,o,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const QN=Eh.length;function XT(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?XT(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<QN;n++){const i=Eh[n],o=t.props[i];(ya(o)||o===!1)&&(e[i]=o)}return e}const WN=[...Ch].reverse(),XN=Ch.length;function ZN(t){return e=>Promise.all(e.map(({animation:n,options:i})=>WT(t,n,i)))}function eM(t){let e=ZN(t),n=Jv(),i=!0;const o=p=>(m,y)=>{var x;const T=ku(t,y,p==="exit"?(x=t.presenceContext)===null||x===void 0?void 0:x.custom:void 0);if(T){const{transition:w,transitionEnd:_,...E}=T;m={...m,...E,..._}}return m};function a(p){e=p(t)}function u(p){const{props:m}=t,y=XT(t.parent)||{},x=[],T=new Set;let w={},_=1/0;for(let N=0;N<XN;N++){const I=WN[N],M=n[I],D=m[I]!==void 0?m[I]:y[I],j=ya(D),P=I===p?M.isActive:null;P===!1&&(_=N);let z=D===y[I]&&D!==m[I]&&j;if(z&&i&&t.manuallyAnimateOnMount&&(z=!1),M.protectedKeys={...w},!M.isActive&&P===null||!D&&!M.prevProp||Mu(D)||typeof D=="boolean")continue;const ee=tM(M.prevProp,D);let Z=ee||I===p&&M.isActive&&!z&&j||N>_&&j,re=!1;const ye=Array.isArray(D)?D:[D];let ce=ye.reduce(o(I),{});P===!1&&(ce={});const{prevResolvedValues:ie={}}=M,Y={...ie,...ce},de=G=>{Z=!0,T.has(G)&&(re=!0,T.delete(G)),M.needsAnimating[G]=!0;const fe=t.getValue(G);fe&&(fe.liveStyle=!1)};for(const G in Y){const fe=ce[G],ge=ie[G];if(w.hasOwnProperty(G))continue;let R=!1;Rf(fe)&&Rf(ge)?R=!uT(fe,ge):R=fe!==ge,R?fe!=null?de(G):T.add(G):fe!==void 0&&T.has(G)?de(G):M.protectedKeys[G]=!0}M.prevProp=D,M.prevResolvedValues=ce,M.isActive&&(w={...w,...ce}),i&&t.blockInitialAnimation&&(Z=!1),Z&&(!(z&&ee)||re)&&x.push(...ye.map(G=>({animation:G,options:{type:I}})))}if(T.size){const N={};T.forEach(I=>{const M=t.getBaseTarget(I),D=t.getValue(I);D&&(D.liveStyle=!0),N[I]=M??null}),x.push({animation:N})}let E=!!x.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(E=!1),i=!1,E?e(x):Promise.resolve()}function h(p,m){var y;if(n[p].isActive===m)return Promise.resolve();(y=t.variantChildren)===null||y===void 0||y.forEach(T=>{var w;return(w=T.animationState)===null||w===void 0?void 0:w.setActive(p,m)}),n[p].isActive=m;const x=u(p);for(const T in n)n[T].protectedKeys={};return x}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Jv(),i=!0}}}function tM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uT(e,t):!1}function ms(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jv(){return{animate:ms(!0),whileInView:ms(),whileHover:ms(),whileTap:ms(),whileDrag:ms(),whileFocus:ms(),exit:ms()}}class Yi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nM extends Yi{constructor(e){super(e),e.animationState||(e.animationState=eM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let iM=0;class sM extends Yi{constructor(){super(...arguments),this.id=iM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const oM={animation:{Feature:nM},exit:{Feature:sM}};function ba(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Ma(t){return{point:{x:t.pageX,y:t.pageY}}}const rM=t=>e=>qh(e)&&t(e,Ma(e));function la(t,e,n,i){return ba(t,e,rM(n),i)}const Kv=(t,e)=>Math.abs(t-e);function aM(t,e){const n=Kv(t.x,e.x),i=Kv(t.y,e.y);return Math.sqrt(n**2+i**2)}class ZT{constructor(e,n,{transformPagePoint:i,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=hf(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,w=aM(x.offset,{x:0,y:0})>=3;if(!T&&!w)return;const{point:_}=x,{timestamp:E}=Lt;this.history.push({..._,timestamp:E});const{onStart:N,onMove:I}=this.handlers;T||(N&&N(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,x)},this.handlePointerMove=(x,T)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=ff(T,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(x,T)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=hf(x.type==="pointercancel"?this.lastMoveEventInfo:ff(T,this.transformPagePoint),this.history);this.startEvent&&w&&w(x,N),_&&_(x,N)},!qh(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.contextWindow=o||window;const u=Ma(e),h=ff(u,this.transformPagePoint),{point:p}=h,{timestamp:m}=Lt;this.history=[{...p,timestamp:m}];const{onSessionStart:y}=n;y&&y(e,hf(h,this.history)),this.removeListeners=Na(la(this.contextWindow,"pointermove",this.handlePointerMove),la(this.contextWindow,"pointerup",this.handlePointerUp),la(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pi(this.updatePoint)}}function ff(t,e){return e?{point:e(t.point)}:t}function Qv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function hf({point:t},e){return{point:t,delta:Qv(t,eS(e)),offset:Qv(t,lM(e)),velocity:uM(e,.1)}}function lM(t){return t[0]}function eS(t){return t[t.length-1]}function uM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const o=eS(t);for(;n>=0&&(i=t[n],!(o.timestamp-i.timestamp>fi(e)));)n--;if(!i)return{x:0,y:0};const a=hi(o.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const u={x:(o.x-i.x)/a,y:(o.y-i.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const tS=1e-4,cM=1-tS,dM=1+tS,nS=.01,fM=0-nS,hM=0+nS;function fn(t){return t.max-t.min}function pM(t,e,n){return Math.abs(t-e)<=n}function Wv(t,e,n,i=.5){t.origin=i,t.originPoint=ht(e.min,e.max,t.origin),t.scale=fn(n)/fn(e),t.translate=ht(n.min,n.max,t.origin)-t.originPoint,(t.scale>=cM&&t.scale<=dM||isNaN(t.scale))&&(t.scale=1),(t.translate>=fM&&t.translate<=hM||isNaN(t.translate))&&(t.translate=0)}function ua(t,e,n,i){Wv(t.x,e.x,n.x,i?i.originX:void 0),Wv(t.y,e.y,n.y,i?i.originY:void 0)}function Xv(t,e,n){t.min=n.min+e.min,t.max=t.min+fn(e)}function mM(t,e,n){Xv(t.x,e.x,n.x),Xv(t.y,e.y,n.y)}function Zv(t,e,n){t.min=e.min-n.min,t.max=t.min+fn(e)}function ca(t,e,n){Zv(t.x,e.x,n.x),Zv(t.y,e.y,n.y)}function gM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?ht(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?ht(n,t,i.max):Math.min(t,n)),t}function ex(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function yM(t,{top:e,left:n,bottom:i,right:o}){return{x:ex(t.x,n,o),y:ex(t.y,e,i)}}function tx(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function vM(t,e){return{x:tx(t.x,e.x),y:tx(t.y,e.y)}}function xM(t,e){let n=.5;const i=fn(t),o=fn(e);return o>i?n=jo(e.min,e.max-i,t.min):i>o&&(n=jo(t.min,t.max-o,e.min)),mi(0,1,n)}function bM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qf=.35;function TM(t=qf){return t===!1?t=0:t===!0&&(t=qf),{x:nx(t,"left","right"),y:nx(t,"top","bottom")}}function nx(t,e,n){return{min:ix(t,e),max:ix(t,n)}}function ix(t,e){return typeof t=="number"?t:t[e]||0}const sx=()=>({translate:0,scale:1,origin:0,originPoint:0}),ko=()=>({x:sx(),y:sx()}),ox=()=>({min:0,max:0}),Tt=()=>({x:ox(),y:ox()});function Cn(t){return[t("x"),t("y")]}function iS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function SM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function pf(t){return t===void 0||t===1}function zf({scale:t,scaleX:e,scaleY:n}){return!pf(t)||!pf(e)||!pf(n)}function vs(t){return zf(t)||sS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function sS(t){return rx(t.x)||rx(t.y)}function rx(t){return t&&t!=="0%"}function yu(t,e,n){const i=t-n,o=e*i;return n+o}function ax(t,e,n,i,o){return o!==void 0&&(t=yu(t,o,i)),yu(t,n,i)+e}function Gf(t,e=0,n=1,i,o){t.min=ax(t.min,e,n,i,o),t.max=ax(t.max,e,n,i,o)}function oS(t,{x:e,y:n}){Gf(t.x,e.translate,e.scale,e.originPoint),Gf(t.y,n.translate,n.scale,n.originPoint)}const lx=.999999999999,ux=1.0000000000001;function _M(t,e,n,i=!1){const o=n.length;if(!o)return;e.x=e.y=1;let a,u;for(let h=0;h<o;h++){a=n[h],u=a.projectionDelta;const{visualElement:p}=a.options;p&&p.props.style&&p.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Io(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,oS(t,u)),i&&vs(a.latestValues)&&Io(t,a.latestValues))}e.x<ux&&e.x>lx&&(e.x=1),e.y<ux&&e.y>lx&&(e.y=1)}function Do(t,e){t.min=t.min+e,t.max=t.max+e}function cx(t,e,n,i,o=.5){const a=ht(t.min,t.max,o);Gf(t,e,n,a,i)}function Io(t,e){cx(t.x,e.x,e.scaleX,e.scale,e.originX),cx(t.y,e.y,e.scaleY,e.scale,e.originY)}function rS(t,e){return iS(wM(t.getBoundingClientRect(),e))}function CM(t,e,n){const i=rS(t,n),{scroll:o}=e;return o&&(Do(i.x,o.offset.x),Do(i.y,o.offset.y)),i}const aS=({current:t})=>t?t.ownerDocument.defaultView:null,EM=new WeakMap;class AM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=y=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ma(y).point)},a=(y,x)=>{const{drag:T,dragPropagation:w,onDragStart:_}=this.getProps();if(T&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TA(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cn(N=>{let I=this.getAxisMotionValue(N).get()||0;if(Gn.test(I)){const{projection:M}=this.visualElement;if(M&&M.layout){const D=M.layout.layoutBox[N];D&&(I=fn(D)*(parseFloat(I)/100))}}this.originPoint[N]=I}),_&&st.postRender(()=>_(y,x)),If(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},u=(y,x)=>{const{dragPropagation:T,dragDirectionLock:w,onDirectionLock:_,onDrag:E}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:N}=x;if(w&&this.currentDirection===null){this.currentDirection=NM(N),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",x.point,N),this.updateAxis("y",x.point,N),this.visualElement.render(),E&&E(y,x)},h=(y,x)=>this.stop(y,x),p=()=>Cn(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)===null||x===void 0?void 0:x.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new ZT(e,{onSessionStart:o,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:aS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&st.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:o}=this.getProps();if(!i||!Ql(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(u=gM(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&Mo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=yM(o.layoutBox,n):this.constraints=!1,this.elastic=TM(i),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Cn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=bM(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Mo(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=CM(i,o.root,this.visualElement.getTransformPagePoint());let u=vM(o.layout.layoutBox,a);if(n){const h=n(SM(u));this.hasMutatedConstraints=!!h,h&&(u=iS(h))}return u}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),p=this.constraints||{},m=Cn(y=>{if(!Ql(y,n,this.currentDirection))return;let x=p&&p[y]||{};u&&(x={min:0,max:0});const T=o?200:1e6,w=o?40:1e7,_={type:"inertia",velocity:i?e[y]:0,bounceStiffness:T,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...x};return this.startAxisValueAnimation(y,_)});return Promise.all(m).then(h)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return If(this.visualElement,e),i.start(Zh(e,i,0,n,this.visualElement,!1))}stopAnimation(){Cn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Cn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Cn(n=>{const{drag:i}=this.getProps();if(!Ql(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(n);if(o&&o.layout){const{min:u,max:h}=o.layout.layoutBox[n];a.set(e[n]-ht(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Mo(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Cn(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const p=h.get();o[u]=xM({min:p,max:p},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Cn(u=>{if(!Ql(u,e,null))return;const h=this.getAxisMotionValue(u),{min:p,max:m}=this.constraints[u];h.set(ht(p,m,o[u]))})}addListeners(){if(!this.visualElement.current)return;EM.set(this.visualElement,this);const e=this.visualElement.current,n=la(e,"pointerdown",p=>{const{drag:m,dragListener:y=!0}=this.getProps();m&&y&&this.start(p)}),i=()=>{const{dragConstraints:p}=this.getProps();Mo(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),st.read(i);const u=ba(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Cn(y=>{const x=this.getAxisMotionValue(y);x&&(this.originPoint[y]+=p[y].translate,x.set(x.get()+p[y].translate))}),this.visualElement.render())}));return()=>{u(),n(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:u=qf,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function Ql(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function NM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class MM extends Yi{constructor(e){super(e),this.removeGroupControls=dn,this.removeListeners=dn,this.controls=new AM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dn}unmount(){this.removeGroupControls(),this.removeListeners()}}const dx=t=>(e,n)=>{t&&st.postRender(()=>t(e,n))};class RM extends Yi{constructor(){super(...arguments),this.removePointerDownListener=dn}onPointerDown(e){this.session=new ZT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:dx(e),onStart:dx(n),onMove:i,onEnd:(a,u)=>{delete this.session,o&&st.postRender(()=>o(a,u))}}}mount(){this.removePointerDownListener=la(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const au={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Xr={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Me.test(t))t=parseFloat(t);else return t;const n=fx(t,e.target.x),i=fx(t,e.target.y);return`${n}% ${i}%`}},kM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,o=Fi.parse(t);if(o.length>5)return i;const a=Fi.createTransformer(t),u=typeof o[0]!="number"?1:0,h=n.x.scale*e.x,p=n.y.scale*e.y;o[0+u]/=h,o[1+u]/=p;const m=ht(h,p,.5);return typeof o[2+u]=="number"&&(o[2+u]/=m),typeof o[3+u]=="number"&&(o[3+u]/=m),a(o)}};class DM extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:a}=e;eA(IM),a&&(n.group&&n.group.add(a),i&&i.register&&o&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),au.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:o,isPresent:a}=this.props,u=i.projection;return u&&(u.isPresent=a,o||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||st.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Nh.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function lS(t){const[e,n]=Gb(),i=A.useContext(Sh);return g.jsx(DM,{...t,layoutGroup:i,switchLayoutGroup:A.useContext(Qb),isPresent:e,safeToRemove:n})}const IM={borderRadius:{...Xr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xr,borderTopRightRadius:Xr,borderBottomLeftRadius:Xr,borderBottomRightRadius:Xr,boxShadow:kM};function PM(t,e,n){const i=Ut(t)?t:Oo(t);return i.start(Zh("",i,e,n)),i.animation}function LM(t){return t instanceof SVGElement&&t.tagName!=="svg"}const UM=(t,e)=>t.depth-e.depth;class VM{constructor(){this.children=[],this.isDirty=!1}add(e){zh(this.children,e),this.isDirty=!0}remove(e){Gh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(UM),this.isDirty=!1,this.children.forEach(e)}}function jM(t,e){const n=Hn.now(),i=({timestamp:o})=>{const a=o-n;a>=e&&(pi(i),t(a-e))};return st.read(i,!0),()=>pi(i)}const uS=["TopLeft","TopRight","BottomLeft","BottomRight"],BM=uS.length,hx=t=>typeof t=="string"?parseFloat(t):t,px=t=>typeof t=="number"||Me.test(t);function OM(t,e,n,i,o,a){o?(t.opacity=ht(0,n.opacity!==void 0?n.opacity:1,qM(i)),t.opacityExit=ht(e.opacity!==void 0?e.opacity:1,0,zM(i))):a&&(t.opacity=ht(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let u=0;u<BM;u++){const h=`border${uS[u]}Radius`;let p=mx(e,h),m=mx(n,h);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||px(p)===px(m)?(t[h]=Math.max(ht(hx(p),hx(m),i),0),(Gn.test(m)||Gn.test(p))&&(t[h]+="%")):t[h]=m}(e.rotate||n.rotate)&&(t.rotate=ht(e.rotate||0,n.rotate||0,i))}function mx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const qM=cS(0,.5,ET),zM=cS(.5,.95,dn);function cS(t,e,n){return i=>i<t?0:i>e?1:n(jo(t,e,i))}function gx(t,e){t.min=e.min,t.max=e.max}function _n(t,e){gx(t.x,e.x),gx(t.y,e.y)}function yx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function vx(t,e,n,i,o){return t-=e,t=yu(t,1/n,i),o!==void 0&&(t=yu(t,1/o,i)),t}function GM(t,e=0,n=1,i=.5,o,a=t,u=t){if(Gn.test(e)&&(e=parseFloat(e),e=ht(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=ht(a.min,a.max,i);t===a&&(h-=e),t.min=vx(t.min,e,n,h,o),t.max=vx(t.max,e,n,h,o)}function xx(t,e,[n,i,o],a,u){GM(t,e[n],e[i],e[o],e.scale,a,u)}const HM=["x","scaleX","originX"],$M=["y","scaleY","originY"];function bx(t,e,n,i){xx(t.x,e,HM,n?n.x:void 0,i?i.x:void 0),xx(t.y,e,$M,n?n.y:void 0,i?i.y:void 0)}function Tx(t){return t.translate===0&&t.scale===1}function dS(t){return Tx(t.x)&&Tx(t.y)}function Sx(t,e){return t.min===e.min&&t.max===e.max}function FM(t,e){return Sx(t.x,e.x)&&Sx(t.y,e.y)}function wx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function fS(t,e){return wx(t.x,e.x)&&wx(t.y,e.y)}function _x(t){return fn(t.x)/fn(t.y)}function Cx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class YM{constructor(){this.members=[]}add(e){zh(this.members,e),e.scheduleRender()}remove(e){if(Gh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JM(t,e,n){let i="";const o=t.x.translate/e.x,a=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((o||a||u)&&(i=`translate3d(${o}px, ${a}px, ${u}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:y,rotateX:x,rotateY:T,skewX:w,skewY:_}=n;m&&(i=`perspective(${m}px) ${i}`),y&&(i+=`rotate(${y}deg) `),x&&(i+=`rotateX(${x}deg) `),T&&(i+=`rotateY(${T}deg) `),w&&(i+=`skewX(${w}deg) `),_&&(i+=`skewY(${_}deg) `)}const h=t.x.scale*e.x,p=t.y.scale*e.y;return(h!==1||p!==1)&&(i+=`scale(${h}, ${p})`),i||"none"}const xs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sa=typeof window<"u"&&window.MotionDebug!==void 0,mf=["","X","Y","Z"],KM={visibility:"hidden"},Ex=1e3;let QM=0;function gf(t,e,n,i){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),i&&(i[t]=0))}function hS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xT(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",st,!(o||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&hS(i)}function pS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(u={},h=e==null?void 0:e()){this.id=QM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sa&&(xs.totalNodes=xs.resolvedTargetDeltas=xs.recalculatedProjection=0),this.nodes.forEach(ZM),this.nodes.forEach(s1),this.nodes.forEach(o1),this.nodes.forEach(e1),sa&&window.MotionDebug.record(xs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new VM)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Hh),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const p=this.eventHandlers.get(u);p&&p.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=LM(u),this.instance=u;const{layoutId:p,layout:m,visualElement:y}=this.options;if(y&&!y.current&&y.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(m||p)&&(this.isLayoutDirty=!0),t){let x;const T=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,x&&x(),x=jM(T,250),au.hasAnimatedSinceResize&&(au.hasAnimatedSinceResize=!1,this.nodes.forEach(Nx))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&y&&(p||m)&&this.addEventListener("didUpdate",({delta:x,hasLayoutChanged:T,hasRelativeTargetChanged:w,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||y.getDefaultTransition()||c1,{onLayoutAnimationStart:N,onLayoutAnimationComplete:I}=y.getProps(),M=!this.targetLayout||!fS(this.targetLayout,_)||w,D=!T&&w;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||D||T&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(x,D);const j={...jh(E,"layout"),onPlay:N,onComplete:I};(y.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else T||Nx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(r1),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const x=this.path[y];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:h,layout:p}=this.options;if(h===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ax);return}this.isUpdating||this.nodes.forEach(n1),this.isUpdating=!1,this.nodes.forEach(i1),this.nodes.forEach(WM),this.nodes.forEach(XM),this.clearAllSnapshots();const h=Hn.now();Lt.delta=mi(0,1e3/60,h-Lt.timestamp),Lt.timestamp=h,Lt.isProcessing=!0,rf.update.process(Lt),rf.preRender.process(Lt),rf.render.process(Lt),Lt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Nh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(t1),this.sharedNodes.forEach(a1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h){const p=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:p,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!dS(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;u&&(h||vs(this.latestValues)||y)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let p=this.removeElementScroll(h);return u&&(p=this.removeTransform(p)),d1(p),{animationId:this.root.animationId,measuredBox:h,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:h}=this.options;if(!h)return Tt();const p=h.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(f1))){const{scroll:y}=this.root;y&&(Do(p.x,y.offset.x),Do(p.y,y.offset.y))}return p}removeElementScroll(u){var h;const p=Tt();if(_n(p,u),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return p;for(let m=0;m<this.path.length;m++){const y=this.path[m],{scroll:x,options:T}=y;y!==this.root&&x&&T.layoutScroll&&(x.wasRoot&&_n(p,u),Do(p.x,x.offset.x),Do(p.y,x.offset.y))}return p}applyTransform(u,h=!1){const p=Tt();_n(p,u);for(let m=0;m<this.path.length;m++){const y=this.path[m];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Io(p,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),vs(y.latestValues)&&Io(p,y.latestValues)}return vs(this.latestValues)&&Io(p,this.latestValues),p}removeTransform(u){const h=Tt();_n(h,u);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!vs(m.latestValues))continue;zf(m.latestValues)&&m.updateSnapshot();const y=Tt(),x=m.measurePageBox();_n(y,x),bx(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return vs(this.latestValues)&&bx(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Lt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:x,layoutId:T}=this.options;if(!(!this.layout||!(x||T))){if(this.resolvedRelativeTargetAt=Lt.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),ca(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),_n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_n(this.target,this.layout.layoutBox),oS(this.target,this.targetDelta)):_n(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),ca(this.relativeTargetOrigin,this.target,w.target),_n(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sa&&xs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||zf(this.parent.latestValues)||sS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),p=!!this.resumingFrom||this!==h;let m=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Lt.timestamp&&(m=!1),m)return;const{layout:y,layoutId:x}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||x))return;_n(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,w=this.treeScale.y;_M(this.layoutCorrected,this.treeScale,this.path,p),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Tt());const{target:_}=h;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yx(this.prevProjectionDelta.x,this.projectionDelta.x),yx(this.prevProjectionDelta.y,this.projectionDelta.y)),ua(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==w||!Cx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Cx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),sa&&xs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),u){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ko(),this.projectionDelta=ko(),this.projectionDeltaWithTransform=ko()}setAnimationOrigin(u,h=!1){const p=this.snapshot,m=p?p.latestValues:{},y={...this.latestValues},x=ko();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=Tt(),w=p?p.source:void 0,_=this.layout?this.layout.source:void 0,E=w!==_,N=this.getStack(),I=!N||N.members.length<=1,M=!!(E&&!I&&this.options.crossfade===!0&&!this.path.some(u1));this.animationProgress=0;let D;this.mixTargetDelta=j=>{const P=j/1e3;Mx(x.x,u.x,P),Mx(x.y,u.y,P),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ca(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),l1(this.relativeTarget,this.relativeTargetOrigin,T,P),D&&FM(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=Tt()),_n(D,this.relativeTarget)),E&&(this.animationValues=y,OM(y,m,this.latestValues,P,M,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{au.hasAnimatedSinceResize=!0,this.currentAnimation=PM(0,Ex,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ex),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:p,layout:m,latestValues:y}=u;if(!(!h||!p||!m)){if(this!==u&&this.layout&&m&&mS(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||Tt();const x=fn(this.layout.layoutBox.x);p.x.min=u.target.x.min,p.x.max=p.x.min+x;const T=fn(this.layout.layoutBox.y);p.y.min=u.target.y.min,p.y.max=p.y.min+T}_n(h,p),Io(h,y),ua(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new YM),this.sharedNodes.get(u).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:p}=u;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(h=!0),!h)return;const m={};p.z&&gf("z",u,m,this.animationValues);for(let y=0;y<mf.length;y++)gf(`rotate${mf[y]}`,u,m,this.animationValues),gf(`skew${mf[y]}`,u,m,this.animationValues);u.render();for(const y in m)u.setStaticValue(y,m[y]),this.animationValues&&(this.animationValues[y]=m[y]);u.scheduleRender()}getProjectionStyles(u){var h,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return KM;const m={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=ou(u==null?void 0:u.pointerEvents)||"",m.transform=y?y(this.latestValues,""):"none",m;const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=ou(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!vs(this.latestValues)&&(E.transform=y?y({},""):"none",this.hasProjected=!1),E}const T=x.animationValues||x.latestValues;this.applyTransformsToTarget(),m.transform=JM(this.projectionDeltaWithTransform,this.treeScale,T),y&&(m.transform=y(T,m.transform));const{x:w,y:_}=this.projectionDelta;m.transformOrigin=`${w.origin*100}% ${_.origin*100}% 0`,x.animationValues?m.opacity=x===this?(p=(h=T.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:m.opacity=x===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const E in fu){if(T[E]===void 0)continue;const{correct:N,applyTo:I}=fu[E],M=m.transform==="none"?T[E]:N(T[E],x);if(I){const D=I.length;for(let j=0;j<D;j++)m[I[j]]=M}else m[E]=M}return this.options.layoutId&&(m.pointerEvents=x===this?ou(u==null?void 0:u.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(Ax),this.root.sharedNodes.clear()}}}function WM(t){t.updateLayout()}function XM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=t.layout,{animationType:a}=t.options,u=n.source!==t.layout.source;a==="size"?Cn(x=>{const T=u?n.measuredBox[x]:n.layoutBox[x],w=fn(T);T.min=i[x].min,T.max=T.min+w}):mS(a,n.layoutBox,i)&&Cn(x=>{const T=u?n.measuredBox[x]:n.layoutBox[x],w=fn(i[x]);T.max=T.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[x].max=t.relativeTarget[x].min+w)});const h=ko();ua(h,i,n.layoutBox);const p=ko();u?ua(p,t.applyTransform(o,!0),n.measuredBox):ua(p,i,n.layoutBox);const m=!dS(h);let y=!1;if(!t.resumeFrom){const x=t.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:T,layout:w}=x;if(T&&w){const _=Tt();ca(_,n.layoutBox,T.layoutBox);const E=Tt();ca(E,i,w.layoutBox),fS(_,E)||(y=!0),x.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=_,t.relativeParent=x)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:p,layoutDelta:h,hasLayoutChanged:m,hasRelativeTargetChanged:y})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function ZM(t){sa&&xs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function e1(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function t1(t){t.clearSnapshot()}function Ax(t){t.clearMeasurements()}function n1(t){t.isLayoutDirty=!1}function i1(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Nx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function s1(t){t.resolveTargetDelta()}function o1(t){t.calcProjection()}function r1(t){t.resetSkewAndRotation()}function a1(t){t.removeLeadSnapshot()}function Mx(t,e,n){t.translate=ht(e.translate,0,n),t.scale=ht(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Rx(t,e,n,i){t.min=ht(e.min,n.min,i),t.max=ht(e.max,n.max,i)}function l1(t,e,n,i){Rx(t.x,e.x,n.x,i),Rx(t.y,e.y,n.y,i)}function u1(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const c1={duration:.45,ease:[.4,0,.1,1]},kx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Dx=kx("applewebkit/")&&!kx("chrome/")?Math.round:dn;function Ix(t){t.min=Dx(t.min),t.max=Dx(t.max)}function d1(t){Ix(t.x),Ix(t.y)}function mS(t,e,n){return t==="position"||t==="preserve-aspect"&&!pM(_x(e),_x(n),.2)}function f1(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const h1=pS({attachResizeListener:(t,e)=>ba(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yf={current:void 0},gS=pS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!yf.current){const t=new h1({});t.mount(window),t.setOptions({layoutScroll:!0}),yf.current=t}return yf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),p1={pan:{Feature:RM},drag:{Feature:MM,ProjectionNode:gS,MeasureLayout:lS}};function Px(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,a=i[o];a&&st.postRender(()=>a(e,Ma(e)))}class m1 extends Yi{mount(){const{current:e}=this.node;e&&(this.unmount=gA(e,n=>(Px(this.node,n,"Start"),i=>Px(this.node,i,"End"))))}unmount(){}}class g1 extends Yi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Na(ba(this.node.current,"focus",()=>this.onFocus()),ba(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Lx(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),a=i[o];a&&st.postRender(()=>a(e,Ma(e)))}class y1 extends Yi{mount(){const{current:e}=this.node;e&&(this.unmount=bA(e,n=>(Lx(this.node,n,"Start"),(i,{success:o})=>Lx(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hf=new WeakMap,vf=new WeakMap,v1=t=>{const e=Hf.get(t.target);e&&e(t)},x1=t=>{t.forEach(v1)};function b1({root:t,...e}){const n=t||document;vf.has(n)||vf.set(n,{});const i=vf.get(n),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(x1,{root:t,...e})),i[o]}function T1(t,e,n){const i=b1(e);return Hf.set(t,n),i.observe(t),()=>{Hf.delete(t),i.unobserve(t)}}const S1={some:0,all:1};class w1 extends Yi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:a}=e,u={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:S1[o]},h=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:x}=this.node.getProps(),T=m?y:x;T&&T(p)};return T1(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_1(e,n))&&this.startObserver()}unmount(){}}function _1({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const C1={inView:{Feature:w1},tap:{Feature:y1},focus:{Feature:g1},hover:{Feature:m1}},E1={layout:{ProjectionNode:gS,MeasureLayout:lS}},$f={current:null},yS={current:!1};function A1(){if(yS.current=!0,!!wh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>$f.current=t.matches;t.addListener(e),e()}else $f.current=!1}const N1=[...OT,Ft,Fi],M1=t=>N1.find(BT(t)),Ux=new WeakMap;function R1(t,e,n){for(const i in e){const o=e[i],a=n[i];if(Ut(o))t.addValue(i,o);else if(Ut(a))t.addValue(i,Oo(o,{owner:t}));else if(a!==o)if(t.hasValue(i)){const u=t.getValue(i);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=t.getStaticValue(i);t.addValue(i,Oo(u!==void 0?u:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Vx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class k1{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:a,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Hn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,st.render(this.render,!1,!0))};const{latestValues:p,renderState:m,onUpdate:y}=u;this.onUpdate=y,this.latestValues=p,this.baseTarget={...p},this.initialValues=n.initial?{...p}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=Ru(n),this.isVariantNode=Jb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:x,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in T){const _=T[w];p[w]!==void 0&&Ut(_)&&_.set(p[w],!1)}}mount(e){this.current=e,Ux.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),yS.current||A1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$f.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ux.delete(this.current),this.projection&&this.projection.unmount(),pi(this.notifyUpdate),pi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Es.has(e),o=n.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&st.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),a(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bo){const n=Bo[e];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Vx.length;i++){const o=Vx[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a="on"+o,u=e[a];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=R1(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Oo(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(VT(o)||NT(o))?o=parseFloat(o):!M1(o)&&Fi.test(n)&&(o=PT(e,n)),this.setBaseTarget(e,Ut(o)?o.get():o)),Ut(o)?o.get():o}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let o;if(typeof i=="string"||typeof i=="object"){const u=Rh(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(o=u[e])}if(i&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Ut(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Hh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class vS extends k1{constructor(){super(...arguments),this.KeyframeResolver=qT}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ut(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function D1(t){return window.getComputedStyle(t)}class I1 extends vS{constructor(){super(...arguments),this.type="html",this.renderInstance=iT}readValueFromInstance(e,n){if(Es.has(n)){const i=Qh(n);return i&&i.default||0}else{const i=D1(e),o=(eT(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rS(e,n)}build(e,n,i){Ih(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Vh(e,n,i)}}class P1 extends vS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Es.has(n)){const i=Qh(n);return i&&i.default||0}return n=sT.has(n)?n:Ah(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return aT(e,n,i)}build(e,n,i){Ph(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,o){oT(e,n,i,o)}mount(e){this.isSVGTag=Uh(e.tagName),super.mount(e)}}const L1=(t,e)=>Mh(t)?new P1(e):new I1(e,{allowProjection:t!==A.Fragment}),U1=uA({...oM,...C1,...p1,...E1},L1),Fe=_E(U1);function xS(t){const e=$o(()=>Oo(t)),{isStatic:n}=A.useContext(_a);if(n){const[,i]=A.useState(t);A.useEffect(()=>e.on("change",i),[])}return e}function bS(t,e){const n=xS(e()),i=()=>n.set(e());return i(),Ca(()=>{const o=()=>st.preRender(i,!1,!0),a=t.map(u=>u.on("change",o));return()=>{a.forEach(u=>u()),pi(i)}}),n}function jx(t){return typeof t=="number"?t:parseFloat(t)}function V1(t,e={}){const{isStatic:n}=A.useContext(_a),i=A.useRef(null),o=xS(Ut(t)?jx(t.get()):t),a=A.useRef(o.get()),u=A.useRef(()=>{}),h=()=>{const m=i.current;m&&m.time===0&&m.sample(Lt.delta),p(),i.current=IN({keyframes:[o.get(),a.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:u.current})},p=()=>{i.current&&i.current.stop()};return A.useInsertionEffect(()=>o.attach((m,y)=>n?y(m):(a.current=m,u.current=y,st.update(h),o.get()),p),[JSON.stringify(e)]),Ca(()=>{if(Ut(t))return t.on("change",m=>o.set(jx(m)))},[o]),o}const j1=t=>t&&typeof t=="object"&&t.mix,B1=t=>j1(t)?t.mix:void 0;function O1(...t){const e=!Array.isArray(t[0]),n=e?0:-1,i=t[0+n],o=t[1+n],a=t[2+n],u=t[3+n],h=JT(o,a,{mixer:B1(a[0]),...u});return e?h(i):h}function q1(t){ra.current=[],t();const e=bS(ra.current,t);return ra.current=void 0,e}function z1(t,e,n,i){if(typeof t=="function")return q1(t);const o=typeof e=="function"?e:O1(e,n,i);return Array.isArray(t)?Bx(t,o):Bx([t],([a])=>o(a))}function Bx(t,e){const n=$o(()=>[]);return bS(t,()=>{n.length=0;const i=t.length;for(let o=0;o<i;o++)n[o]=t[o].get();return e(n)})}function G1(t){t.values.forEach(e=>e.stop())}function Ff(t,e){[...e].reverse().forEach(i=>{const o=t.getVariant(i);o&&$h(t,o),t.variantChildren&&t.variantChildren.forEach(a=>{Ff(a,e)})})}function H1(t,e){if(Array.isArray(e))return Ff(t,e);if(typeof e=="string")return Ff(t,[e]);$h(t,e)}function $1(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,i){const o=[];return t.forEach(a=>{o.push(WT(a,n,{transitionOverride:i}))}),Promise.all(o)},set(n){return t.forEach(i=>{H1(i,n)})},stop(){t.forEach(n=>{G1(n)})},mount(){return()=>{e.stop()}}};return e}function F1(){const t=$o($1);return Ca(t.mount,[]),t}const Y1=F1;var xe=(t=>(t.TUTOR="TUTOR",t.EXPLAINER="EXPLAINER",t.QUIZ="QUIZ",t.NEWS="NEWS",t.SUBJECTS="SUBJECTS",t.PLANNER="PLANNER",t.DASHBOARD="DASHBOARD",t.NOTES="NOTES",t.HELP="HELP",t.COMPETITION="COMPETITION",t.ADMIN="ADMIN",t))(xe||{}),Ot=(t=>(t.USER="USER",t.AI="AI",t))(Ot||{});const Pu=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),ep=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v11.494m-9-5.747h18M5 12a7 7 0 1114 0c0 .351-.027.696-.08 1.031M19 12a7 7 0 00-14 0c0 .351.027.696.08 1.031"})}),Ta=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.546-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),TS=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3h3m-3 4h3m-3 4h3m-3 4h3"})}),J1=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),SS=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Yf=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Jf=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});function Pn(t,e){const[n,i]=A.useState(()=>{if(typeof window>"u")return e;try{const a=window.localStorage.getItem(t);return a?JSON.parse(a):e}catch(a){return console.error(a),e}}),o=A.useCallback(a=>{try{const u=a instanceof Function?a(n):a,h=(()=>{try{return JSON.stringify(n)}catch{return}})(),p=(()=>{try{return JSON.stringify(u)}catch{return}})();if(h===p)return;if(i(u),typeof window<"u")try{window.localStorage.setItem(t,p??JSON.stringify(u))}catch(m){console.error(m)}}catch(u){console.error(u)}},[t,n]);return[n,o]}const wS=A.createContext(void 0),K1=({children:t})=>{const[e,n]=A.useState(xe.TUTOR),[i,o]=A.useState(null),[a,u]=A.useState(null),[h,p]=A.useState(!1),[m,y]=Pn("easyway-theme","default"),[x,T]=Pn("easyway-profile",{name:"",email:"",country:""}),[w,_]=Pn("easyway-apikeys",{openai:"",perplexity:""}),[E,N]=Pn("easyway-sidebar-collapsed",!1);A.useEffect(()=>{const D=document.documentElement;D.className=`theme-${m}`},[m]);const M={activeView:e,setActiveView:n,activeSubject:i,setActiveSubject:o,explainerPrefillTopic:a,setExplainerPrefillTopic:u,isSettingsOpen:h,setIsSettingsOpen:p,theme:m,setTheme:D=>{y(D)},profile:x,setProfile:T,apiKeys:w,setApiKeys:_,isSidebarCollapsed:E,setIsSidebarCollapsed:N};return g.jsx(wS.Provider,{value:M,children:t})},Fn=()=>{const t=A.useContext(wS);if(t===void 0)throw new Error("useAppContext must be used within an AppProvider");return t},Q1=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),W1="modulepreload",X1=function(t){return"/"+t},Ox={},Ra=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){let u=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(n.map(m=>{if(m=X1(m),m in Ox)return;Ox[m]=!0;const y=m.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const T=document.createElement("link");if(T.rel=y?"stylesheet":W1,y||(T.as="script"),T.crossOrigin="",T.href=m,p&&T.setAttribute("nonce",p),document.head.appendChild(T),y)return new Promise((w,_)=>{T.addEventListener("load",w),T.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},Z1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ra(async()=>{const{default:i}=await Promise.resolve().then(()=>Jo);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class tp extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class eR extends tp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qx extends tp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zx extends tp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Kf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Kf||(Kf={}));var tR=function(t,e,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(y){try{m(i.next(y))}catch(x){u(x)}}function p(y){try{m(i.throw(y))}catch(x){u(x)}}function m(y){y.done?a(y.value):o(y.value).then(h,p)}m((i=i.apply(t,e||[])).next())})};class nR{constructor(e,{headers:n={},customFetch:i,region:o=Kf.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=Z1(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return tR(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:u}=n;let h={},{region:p}=n;p||(p=this.region);const m=new URL(`${this.url}/${e}`);p&&p!=="any"&&(h["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(h["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(h["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(m.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:y}).catch(E=>{throw new eR(E)}),T=x.headers.get("x-relay-error");if(T&&T==="true")throw new qx(x);if(!x.ok)throw new zx(x);let w=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield x.json():w==="application/octet-stream"?_=yield x.blob():w==="text/event-stream"?_=x:w==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof zx||o instanceof qx?o.context:void 0}}})}}var Pt={},yo={},vo={},xo={},bo={},To={},iR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zo=iR();const sR=zo.fetch,_S=zo.fetch.bind(zo),CS=zo.Headers,oR=zo.Request,rR=zo.Response,Jo=Object.freeze(Object.defineProperty({__proto__:null,Headers:CS,Request:oR,Response:rR,default:_S,fetch:sR},Symbol.toStringTag,{value:"Module"})),aR=tE(Jo);var Wl={},Gx;function ES(){if(Gx)return Wl;Gx=1,Object.defineProperty(Wl,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Wl.default=t,Wl}var Hx;function AS(){if(Hx)return To;Hx=1;var t=To&&To.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(To,"__esModule",{value:!0});const e=t(aR),n=t(ES());class i{constructor(a){var u,h;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(u=a.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=a.signal,this.isMaybeSingle=(h=a.isMaybeSingle)!==null&&h!==void 0?h:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,u){return this.headers=new Headers(this.headers),this.headers.set(a,u),this}then(a,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var y,x,T,w;let _=null,E=null,N=null,I=m.status,M=m.statusText;if(m.ok){if(this.method!=="HEAD"){const z=await m.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?E=z:E=JSON.parse(z))}const j=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),P=(T=m.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");j&&P&&P.length>1&&(N=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(_={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,N=null,I=406,M="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const j=await m.text();try{_=JSON.parse(j),Array.isArray(_)&&m.status===404&&(E=[],_=null,I=200,M="OK")}catch{m.status===404&&j===""?(I=204,M="No Content"):_={message:j}}if(_&&this.isMaybeSingle&&(!((w=_==null?void 0:_.details)===null||w===void 0)&&w.includes("0 rows"))&&(_=null,I=200,M="OK"),_&&this.shouldThrowOnError)throw new n.default(_)}return{error:_,data:E,count:N,status:I,statusText:M}});return this.shouldThrowOnError||(p=p.catch(m=>{var y,x,T;return{error:{message:`${(y=m==null?void 0:m.name)!==null&&y!==void 0?y:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(x=m==null?void 0:m.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(T=m==null?void 0:m.code)!==null&&T!==void 0?T:""}`},data:null,count:null,status:0,statusText:""}})),p.then(a,u)}returns(){return this}overrideTypes(){return this}}return To.default=i,To}var $x;function NS(){if($x)return bo;$x=1;var t=bo&&bo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(bo,"__esModule",{value:!0});const e=t(AS());class n extends e.default{select(o){let a=!1;const u=(o??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:u,foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.order`:"order",y=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${y?`${y},`:""}${o}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:u=a}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${o}`),this}range(o,a,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(m,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:u=!1,buffers:h=!1,wal:p=!1,format:m="text"}={}){var y;const x=[o?"analyze":null,a?"verbose":null,u?"settings":null,h?"buffers":null,p?"wal":null].filter(Boolean).join("|"),T=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${T}"; options=${x};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return bo.default=n,bo}var Fx;function np(){if(Fx)return xo;Fx=1;var t=xo&&xo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(xo,"__esModule",{value:!0});const e=t(NS());class n extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const u=Array.from(new Set(a)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:u,type:h}={}){let p="";h==="plain"?p="pl":h==="phrase"?p="ph":h==="websearch"&&(p="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${p}fts${m}.${a}`),this}match(o){return Object.entries(o).forEach(([a,u])=>{this.url.searchParams.append(a,`eq.${u}`)}),this}not(o,a,u){return this.url.searchParams.append(o,`not.${a}.${u}`),this}or(o,{foreignTable:a,referencedTable:u=a}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${o})`),this}filter(o,a,u){return this.url.searchParams.append(o,`${a}.${u}`),this}}return xo.default=n,xo}var Yx;function MS(){if(Yx)return vo;Yx=1;var t=vo&&vo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(vo,"__esModule",{value:!0});const e=t(np());class n{constructor(o,{headers:a={},schema:u,fetch:h}){this.url=o,this.headers=new Headers(a),this.schema=u,this.fetch=h}select(o,{head:a=!1,count:u}={}){const h=a?"HEAD":"GET";let p=!1;const m=(o??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",m),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:u=!0}={}){var h;const p="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const m=o.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(m.length>0){const y=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:u=!1,count:h,defaultToNull:p=!0}={}){var m;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),h&&this.headers.append("Prefer",`count=${h}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const x=o.reduce((T,w)=>T.concat(Object.keys(w)),[]);if(x.length>0){const T=[...new Set(x)].map(w=>`"${w}"`);this.url.searchParams.set("columns",T.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(o,{count:a}={}){var u;const h="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var a;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return vo.default=n,vo}var Jx;function lR(){if(Jx)return yo;Jx=1;var t=yo&&yo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(yo,"__esModule",{value:!0});const e=t(MS()),n=t(np());class i{constructor(a,{headers:u={},schema:h,fetch:p}={}){this.url=a,this.headers=new Headers(u),this.schemaName=h,this.fetch=p}from(a){const u=new URL(`${this.url}/${a}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new i(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:h=!1,get:p=!1,count:m}={}){var y;let x;const T=new URL(`${this.url}/rpc/${a}`);let w;h||p?(x=h?"HEAD":"GET",Object.entries(u).filter(([E,N])=>N!==void 0).map(([E,N])=>[E,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([E,N])=>{T.searchParams.append(E,N)})):(x="POST",w=u);const _=new Headers(this.headers);return m&&_.set("Prefer",`count=${m}`),new n.default({method:x,url:T,headers:_,schema:this.schemaName,body:w,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return yo.default=i,yo}var Kx;function uR(){if(Kx)return Pt;Kx=1;var t=Pt&&Pt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.PostgrestError=Pt.PostgrestBuilder=Pt.PostgrestTransformBuilder=Pt.PostgrestFilterBuilder=Pt.PostgrestQueryBuilder=Pt.PostgrestClient=void 0;const e=t(lR());Pt.PostgrestClient=e.default;const n=t(MS());Pt.PostgrestQueryBuilder=n.default;const i=t(np());Pt.PostgrestFilterBuilder=i.default;const o=t(NS());Pt.PostgrestTransformBuilder=o.default;const a=t(AS());Pt.PostgrestBuilder=a.default;const u=t(ES());return Pt.PostgrestError=u.default,Pt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:a.default,PostgrestError:u.default},Pt}var cR=uR();const dR=xh(cR),{PostgrestClient:fR,PostgrestQueryBuilder:u4,PostgrestFilterBuilder:c4,PostgrestTransformBuilder:d4,PostgrestBuilder:f4,PostgrestError:h4}=dR;class hR{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const pR="2.15.4",mR=`realtime-js/${pR}`,gR="1.0.0",Qf=1e4,yR=1e3,vR=100;var da;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(da||(da={}));var At;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(At||(At={}));var In;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(In||(In={}));var Wf;(function(t){t.websocket="websocket"})(Wf||(Wf={}));var Ts;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ts||(Ts={}));class xR{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const o=n.getUint8(1),a=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=i.decode(e.slice(u,u+o));u=u+o;const p=i.decode(e.slice(u,u+a));u=u+a;const m=JSON.parse(i.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:p,payload:m}}}class RS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var at;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(at||(at={}));const Qx=(t,e,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((a,u)=>(a[u]=bR(u,t,e,o),a),{})},bR=(t,e,n,i)=>{const o=e.find(h=>h.name===t),a=o==null?void 0:o.type,u=n[t];return a&&!i.includes(a)?kS(a,u):Xf(u)},kS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return _R(e,n)}switch(t){case at.bool:return TR(e);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return SR(e);case at.json:case at.jsonb:return wR(e);case at.timestamp:return CR(e);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return Xf(e);default:return Xf(e)}},Xf=t=>t,TR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},SR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},wR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_R=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let a;const u=t.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(h=>kS(e,h))}return t},CR=t=>typeof t=="string"?t.replace(" ","T"):t,DS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class xf{constructor(e,n,i={},o=Qf){this.channel=e,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Wx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Wx||(Wx={}));class fa{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fa.syncState(this.state,o,a,u),this.pendingDiffs.forEach(p=>{this.state=fa.syncDiff(this.state,p,a,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=fa.syncDiff(this.state,o,a,u),h())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,o){const a=this.cloneDeep(e),u=this.transformState(n),h={},p={};return this.map(a,(m,y)=>{u[m]||(p[m]=y)}),this.map(u,(m,y)=>{const x=a[m];if(x){const T=y.map(N=>N.presence_ref),w=x.map(N=>N.presence_ref),_=y.filter(N=>w.indexOf(N.presence_ref)<0),E=x.filter(N=>T.indexOf(N.presence_ref)<0);_.length>0&&(h[m]=_),E.length>0&&(p[m]=E)}else h[m]=y}),this.syncDiff(a,{joins:h,leaves:p},i,o)}static syncDiff(e,n,i,o){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(a,(h,p)=>{var m;const y=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(p),y.length>0){const x=e[h].map(w=>w.presence_ref),T=y.filter(w=>x.indexOf(w.presence_ref)<0);e[h].unshift(...T)}i(h,y,p)}),this.map(u,(h,p)=>{let m=e[h];if(!m)return;const y=p.map(x=>x.presence_ref);m=m.filter(x=>y.indexOf(x.presence_ref)<0),e[h]=m,o(h,m,p),m.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const o=e[i];return"metas"in o?n[i]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[i]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xx||(Xx={}));var ha;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ha||(ha={}));var ci;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ci||(ci={}));class ip{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=At.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new xf(this,In.join,this.params,this.timeout),this.rejoinTimer=new RS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=At.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=At.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this._on(In.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new fa(this),this.broadcastEndpointURL=DS(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==At.closed){const{config:{broadcast:u,presence:h,private:p}}=this.params,m=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[ha.PRESENCE]&&this.bindings[ha.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,x={},T={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:y}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(ci.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(ci.CLOSED)),this.updateJoinPayload(Object.assign({config:T},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var _;if(this.socket.setAuth(),w===void 0){e==null||e(ci.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,N=(_=E==null?void 0:E.length)!==null&&_!==void 0?_:0,I=[];for(let M=0;M<N;M++){const D=E[M],{filter:{event:j,schema:P,table:z,filter:ee}}=D,Z=w&&w[M];if(Z&&Z.event===j&&Z.schema===P&&Z.table===z&&Z.filter===ee)I.push(Object.assign(Object.assign({},D),{id:Z.id}));else{this.unsubscribe(),this.state=At.errored,e==null||e(ci.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(ci.SUBSCRIBED);return}}).receive("error",w=>{this.state=At.errored,e==null||e(ci.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ci.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===At.joined&&e===ha.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async send(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:u}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,h,p;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||p===void 0)&&p.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=At.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(In.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new xf(this,In.leave,{},e),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=At.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const o=new AbortController,a=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),u}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new xf(this,e,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>vR){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var o,a;const u=e.toLocaleLowerCase(),{close:h,error:p,leave:m,join:y}=In;if(i&&[h,p,m,y].indexOf(u)>=0&&i!==this._joinRef())return;let T=this._onMessage(u,n,i);if(n&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var _,E,N;return((_=w.filter)===null||_===void 0?void 0:_.event)==="*"||((N=(E=w.filter)===null||E===void 0?void 0:E.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===u}).map(w=>w.callback(T,i)):(a=this.bindings[u])===null||a===void 0||a.filter(w=>{var _,E,N,I,M,D;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const j=w.id,P=(_=w.filter)===null||_===void 0?void 0:_.event;return j&&((E=n.ids)===null||E===void 0?void 0:E.includes(j))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const j=(M=(I=w==null?void 0:w.filter)===null||I===void 0?void 0:I.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return j==="*"||j===((D=n==null?void 0:n.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof T=="object"&&"ids"in T){const _=T.data,{schema:E,table:N,commit_timestamp:I,type:M,errors:D}=_;T=Object.assign(Object.assign({},{schema:E,table:N,commit_timestamp:I,eventType:M,new:{},old:{},errors:D}),this._getPayloadRecords(_))}w.callback(T,i)})}_isClosed(){return this.state===At.closed}_isJoined(){return this.state===At.joined}_isJoining(){return this.state===At.joining}_isLeaving(){return this.state===At.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const o=e.toLocaleLowerCase(),a={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&ip.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(In.close,{},e)}_onError(e){this._on(In.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=At.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Qx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Qx(e.columns,e.old_record)),n}}const bf=()=>{},Xl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ER=[1e3,2e3,5e3,1e4],AR=1e4,NR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MR{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qf,this.transport=null,this.heartbeatIntervalMs=Xl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bf,this.ref=0,this.reconnectTimer=null,this.logger=bf,this.conn=null,this.sendBuffer=[],this.serializer=new xR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...u)=>Ra(async()=>{const{default:h}=await Promise.resolve().then(()=>Jo);return{default:h}},void 0).then(({default:h})=>h(...u)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...u)=>a(...u)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Wf.websocket}`,this.httpEndpoint=DS(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gR}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case da.connecting:return Ts.Connecting;case da.open:return Ts.Open;case da.closing:return Ts.Closing;default:return Ts.Closed}}isConnected(){return this.connectionState()===Ts.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===i);if(o)return o;{const a=new ip(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:i,payload:o,ref:a}=e,u=()=>{this.encode(e,h=>{var p;(p=this.conn)===null||p===void 0||p.send(h)})};this.log("push",`${n} ${i} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(yR,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Xl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:a,ref:u}=n,h=u?`(${u})`:"",p=a.status||"";this.log("receive",`${p} ${i} ${o} ${h}`.trim(),a),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(o,a,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(In.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${i}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([NR],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:mR};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(In.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new RS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,o,a,u,h,p,m,y;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:Qf,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:Xl.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:bf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(x=>ER[x-1]||AR),this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:((x,T)=>T(JSON.stringify(x))),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class sp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class RR extends sp{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zf extends sp{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var kR=function(t,e,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(y){try{m(i.next(y))}catch(x){u(x)}}function p(y){try{m(i.throw(y))}catch(x){u(x)}}function m(y){y.done?a(y.value):o(y.value).then(h,p)}m((i=i.apply(t,e||[])).next())})};const IS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ra(async()=>{const{default:i}=await Promise.resolve().then(()=>Jo);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},DR=()=>kR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ra(()=>Promise.resolve().then(()=>Jo),void 0)).Response:Response}),eh=t=>{if(Array.isArray(t))return t.map(n=>eh(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=eh(i)}),e},IR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var As=function(t,e,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(y){try{m(i.next(y))}catch(x){u(x)}}function p(y){try{m(i.throw(y))}catch(x){u(x)}}function m(y){y.done?a(y.value):o(y.value).then(h,p)}m((i=i.apply(t,e||[])).next())})};const Tf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),PR=(t,e,n)=>As(void 0,void 0,void 0,function*(){const i=yield DR();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const a=t.status||500,u=(o==null?void 0:o.statusCode)||a+"";e(new RR(Tf(o),a,u))}).catch(o=>{e(new Zf(Tf(o),o))}):e(new Zf(Tf(t),t))}),LR=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?o:(IR(i)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(i)):o.body=i,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function ka(t,e,n,i,o,a){return As(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(n,LR(e,i,o,a)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>PR(p,h,i))})})}function vu(t,e,n,i){return As(this,void 0,void 0,function*(){return ka(t,"GET",e,n,i)})}function On(t,e,n,i,o){return As(this,void 0,void 0,function*(){return ka(t,"POST",e,i,o,n)})}function th(t,e,n,i,o){return As(this,void 0,void 0,function*(){return ka(t,"PUT",e,i,o,n)})}function UR(t,e,n,i){return As(this,void 0,void 0,function*(){return ka(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function PS(t,e,n,i,o){return As(this,void 0,void 0,function*(){return ka(t,"DELETE",e,i,o,n)})}var Qt=function(t,e,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(y){try{m(i.next(y))}catch(x){u(x)}}function p(y){try{m(i.throw(y))}catch(x){u(x)}}function m(y){y.done?a(y.value):o(y.value).then(h,p)}m((i=i.apply(t,e||[])).next())})};const VR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jR{constructor(e,n={},i,o){this.url=e,this.headers=n,this.bucketId=i,this.fetch=IS(o)}uploadOrUpdate(e,n,i,o){return Qt(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},Zx),o);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),p&&a.append("metadata",this.encodeMetadata(p)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.append("cacheControl",u.cacheControl),p&&a.append("metadata",this.encodeMetadata(p))):(a=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,p&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),o!=null&&o.headers&&(h=Object.assign(Object.assign({},h),o.headers));const m=this._removeEmptyFolders(n),y=this._getFinalPath(m),x=yield(e=="PUT"?th:On)(this.fetch,`${this.url}/object/${y}`,a,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:x.Id,fullPath:x.Key},error:null}}catch(a){if(Nt(a))return{data:null,error:a};throw a}})}upload(e,n,i){return Qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,o){return Qt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),u=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let p;const m=Object.assign({upsert:Zx.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",m.cacheControl)):(p=i,y["cache-control"]=`max-age=${m.cacheControl}`,y["content-type"]=m.contentType);const x=yield th(this.fetch,h.toString(),p,{headers:y});return{data:{path:a,fullPath:x.Key},error:null}}catch(p){if(Nt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,n){return Qt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield On(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+a.url),h=u.searchParams.get("token");if(!h)throw new sp("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(i){if(Nt(i))return{data:null,error:i};throw i}})}update(e,n,i){return Qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return Qt(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(Nt(o))return{data:null,error:o};throw o}})}copy(e,n,i){return Qt(this,void 0,void 0,function*(){try{return{data:{path:(yield On(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(Nt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,i){return Qt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield On(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(Nt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,i){return Qt(this,void 0,void 0,function*(){try{const o=yield On(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(Nt(o))return{data:null,error:o};throw o}})}download(e,n){return Qt(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=a?`?${a}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield vu(this.fetch,`${this.url}/${o}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Nt(h))return{data:null,error:h};throw h}})}info(e){return Qt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield vu(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:eh(i),error:null}}catch(i){if(Nt(i))return{data:null,error:i};throw i}})}exists(e){return Qt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield UR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Nt(i)&&i instanceof Zf){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});p!==""&&o.push(p);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${m}`)}}}remove(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield PS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Nt(n))return{data:null,error:n};throw n}})}list(e,n,i){return Qt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},VR),n),{prefix:e||""});return{data:yield On(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(Nt(o))return{data:null,error:o};throw o}})}listV2(e,n){return Qt(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield On(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Nt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const BR="2.11.1",OR={"X-Client-Info":`storage-js/${BR}`};var So=function(t,e,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(y){try{m(i.next(y))}catch(x){u(x)}}function p(y){try{m(i.throw(y))}catch(x){u(x)}}function m(y){y.done?a(y.value):o(y.value).then(h,p)}m((i=i.apply(t,e||[])).next())})};class qR{constructor(e,n={},i,o){const a=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},OR),n),this.fetch=IS(i)}listBuckets(){return So(this,void 0,void 0,function*(){try{return{data:yield vu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Nt(e))return{data:null,error:e};throw e}})}getBucket(e){return So(this,void 0,void 0,function*(){try{return{data:yield vu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Nt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return So(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Nt(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return So(this,void 0,void 0,function*(){try{return{data:yield th(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Nt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return So(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Nt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return So(this,void 0,void 0,function*(){try{return{data:yield PS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Nt(n))return{data:null,error:n};throw n}})}}class zR extends qR{constructor(e,n={},i,o){super(e,n,i,o)}from(e){return new jR(this.url,this.headers,e,this.fetch)}}const GR="2.57.0";let oa="";typeof Deno<"u"?oa="deno":typeof document<"u"?oa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oa="react-native":oa="node";const HR={"X-Client-Info":`supabase-js-${oa}/${GR}`},$R={headers:HR},FR={schema:"public"},YR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},JR={};var KR=function(t,e,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(y){try{m(i.next(y))}catch(x){u(x)}}function p(y){try{m(i.throw(y))}catch(x){u(x)}}function m(y){y.done?a(y.value):o(y.value).then(h,p)}m((i=i.apply(t,e||[])).next())})};const QR=t=>{let e;return t?e=t:typeof fetch>"u"?e=_S:e=fetch,(...n)=>e(...n)},WR=()=>typeof Headers>"u"?CS:Headers,XR=(t,e,n)=>{const i=QR(n),o=WR();return(a,u)=>KR(void 0,void 0,void 0,function*(){var h;const p=(h=yield e())!==null&&h!==void 0?h:t;let m=new o(u==null?void 0:u.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),i(a,Object.assign(Object.assign({},u),{headers:m}))})};var ZR=function(t,e,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(y){try{m(i.next(y))}catch(x){u(x)}}function p(y){try{m(i.throw(y))}catch(x){u(x)}}function m(y){y.done?a(y.value):o(y.value).then(h,p)}m((i=i.apply(t,e||[])).next())})};function ek(t){return t.endsWith("/")?t:t+"/"}function tk(t,e){var n,i;const{db:o,auth:a,realtime:u,global:h}=t,{db:p,auth:m,realtime:y,global:x}=e,T={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},y),u),storage:{},global:Object.assign(Object.assign(Object.assign({},x),h),{headers:Object.assign(Object.assign({},(n=x==null?void 0:x.headers)!==null&&n!==void 0?n:{}),(i=h==null?void 0:h.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>ZR(this,void 0,void 0,function*(){return""})};return t.accessToken?T.accessToken=t.accessToken:delete T.accessToken,T}const LS="2.71.1",Ao=30*1e3,nh=3,Sf=nh*Ao,nk="http://localhost:9999",ik="supabase.auth.token",sk={"X-Client-Info":`gotrue-js/${LS}`},ih="X-Supabase-Api-Version",US={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ok=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rk=600*1e3;class op extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ak extends op{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function lk(t){return Ie(t)&&t.name==="AuthApiError"}class VS extends op{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ji extends op{constructor(e,n,i,o){super(e,i,o),this.name=n,this.status=i}}class Hi extends Ji{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uk(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class Zl extends Ji{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eu extends Ji{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tu extends Ji{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ck(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class e0 extends Ji{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sh extends Ji{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function wf(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class t0 extends Ji{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class oh extends Ji{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),n0=` 	
\r=`.split(""),dk=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<n0.length;e+=1)t[n0[e].charCodeAt(0)]=-2;for(let e=0;e<xu.length;e+=1)t[xu[e].charCodeAt(0)]=e;return t})();function i0(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(xu[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(xu[i]),e.queuedBits-=6}}function jS(t,e,n){const i=dk[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function s0(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{pk(u,i,n)};for(let u=0;u<t.length;u+=1)jS(t.charCodeAt(u),o,a);return e.join("")}function fk(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function hk(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}fk(i,e)}}function pk(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function mk(t){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)jS(t.charCodeAt(o),n,i);return new Uint8Array(e)}function gk(t){const e=[];return hk(t,n=>e.push(n)),new Uint8Array(e)}function yk(t){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};return t.forEach(o=>i0(o,n,i)),i0(null,n,i),e.join("")}function vk(t){return Math.round(Date.now()/1e3)+t}function xk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const kn=()=>typeof window<"u"&&typeof document<"u",gs={tested:!1,writable:!1},BS=()=>{if(!kn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gs.tested)return gs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),gs.tested=!0,gs.writable=!0}catch{gs.tested=!0,gs.writable=!1}return gs.writable};function bk(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return n.searchParams.forEach((i,o)=>{e[o]=i}),e}const OS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ra(async()=>{const{default:i}=await Promise.resolve().then(()=>Jo);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},Tk=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",No=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ys=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zi=async(t,e)=>{await t.removeItem(e)};class Lu{constructor(){this.promise=new Lu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Lu.promiseConstructor=Promise;function _f(t){const e=t.split(".");if(e.length!==3)throw new oh("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!ok.test(e[i]))throw new oh("JWT not in base64url format");return{header:JSON.parse(s0(e[0])),payload:JSON.parse(s0(e[1])),signature:mk(e[2]),raw:{header:e[0],payload:e[1]}}}async function Sk(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wk(t,e){return new Promise((i,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await t(a);if(!e(a,null,u)){i(u);return}}catch(u){if(!e(a,u)){o(u);return}}})()})}function _k(t){return("0"+t.toString(16)).substr(-2)}function Ck(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,_k).join("")}async function Ek(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function Ak(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Ek(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wo(t,e,n=!1){const i=Ck();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await No(t,`${e}-code-verifier`,o);const a=await Ak(i);return[a,i===a?"plain":"s256"]}const Nk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mk(t){const e=t.headers.get(ih);if(!e||!e.match(Nk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Rk(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function kk(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _o(t){if(!Dk.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cf(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function o0(t){return JSON.parse(JSON.stringify(t))}var Ik=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};const bs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Pk=[502,503,504];async function r0(t){var e;if(!Tk(t))throw new sh(bs(t),0);if(Pk.includes(t.status))throw new sh(bs(t),t.status);let n;try{n=await t.json()}catch(a){throw new VS(bs(a),a)}let i;const o=Mk(t);if(o&&o.getTime()>=US["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new t0(bs(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Hi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new t0(bs(n),t.status,n.weak_password.reasons);throw new ak(bs(n),t.status||500,i)}const Lk=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function ze(t,e,n,i){var o;const a=Object.assign({},i==null?void 0:i.headers);a[ih]||(a[ih]=US["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const u=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await Uk(t,e,n+h,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function Uk(t,e,n,i,o,a){const u=Lk(e,i,o,a);let h;try{h=await t(n,Object.assign({},u))}catch(p){throw console.error(p),new sh(bs(p),0)}if(h.ok||await r0(h),i!=null&&i.noResolveJson)return h;try{return await h.json()}catch(p){await r0(p)}}function ui(t){var e;let n=null;Ok(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=vk(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function a0(t){const e=ui(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $i(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Vk(t){return{data:t,error:null}}function jk(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:a}=t,u=Ik(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:a},p=Object.assign({},u);return{data:{properties:h,user:p},error:null}}function Bk(t){return t}function Ok(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ef=["global","local","others"];var qk=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n};class zk{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=OS(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Ef[0]){if(Ef.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ef.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:$i})}catch(i){if(Ie(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=qk(e,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:jk,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$i})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,o,a,u,h,p;try{const m={nextPage:null,lastPage:0,total:0},y=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:Bk});if(y.error)throw y.error;const x=await y.json(),T=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(p=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(_=>{const E=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(_.split(";")[1].split("=")[1]);m[`${N}Page`]=E}),m.total=parseInt(T)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(Ie(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){_o(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$i})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_o(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:$i})}catch(i){if(Ie(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){_o(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:$i})}catch(i){if(Ie(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){_o(e.userId);try{const{data:n,error:i}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_o(e.userId),_o(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}function l0(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Gk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Co={debug:!!(globalThis&&BS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Hk extends qS{}async function $k(t,e,n){Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Co.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Hk(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Co.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Gk();const Fk={url:nk,storageKey:ik,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function u0(t,e,n){return await n()}const Eo={};class Sa{constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sa.nextInstanceID,Sa.nextInstanceID+=1,this.instanceID>0&&kn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Fk),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new zk({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=OS(o.fetch),this.lock=o.lock||u0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:kn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=$k:this.lock=u0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:BS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=l0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=l0(this.memoryStorage)),kn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Eo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Eo[this.storageKey]=Object.assign(Object.assign({},Eo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Eo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Eo[this.storageKey]=Object.assign(Object.assign({},Eo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${LS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=bk(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),kn()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),ck(a)){const p=(e=a.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:h}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new VS("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,o;try{const a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:ui}),{data:u,error:h}=a;if(h||!u)return{data:{user:null,session:null},error:h};const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,i,o;try{let a;if("email"in e){const{email:y,password:x,options:T}=e;let w=null,_=null;this.flowType==="pkce"&&([w,_]=await wo(this.storage,this.storageKey)),a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:y,password:x,data:(n=T==null?void 0:T.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:w,code_challenge_method:_},xform:ui})}else if("phone"in e){const{phone:y,password:x,options:T}=e;a=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(i=T==null?void 0:T.data)!==null&&i!==void 0?i:{},channel:(o=T==null?void 0:T.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:ui})}else throw new eu("You must provide either an email or phone number and a password");const{data:u,error:h}=a;if(h||!u)return{data:{user:null,session:null},error:h};const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:u,options:h}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:a0})}else if("phone"in e){const{phone:a,password:u,options:h}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:a0})}else throw new eu("You must provide either an email or phone number and a password");const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Zl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,i,o,a,u,h,p,m,y,x,T,w;let _,E;if("message"in e)_=e.message,E=e.signature;else{const{chain:N,wallet:I,statement:M,options:D}=e;let j;if(kn())if(typeof I=="object")j=I;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))j=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=I}const P=new URL((n=D==null?void 0:D.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const z=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D==null?void 0:D.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),M?{statement:M}:null));let ee;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")ee=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)ee=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)_=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),E=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${P.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(o=(i=D==null?void 0:D.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=D==null?void 0:D.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((u=D==null?void 0:D.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((h=D==null?void 0:D.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((p=D==null?void 0:D.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((m=D==null?void 0:D.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((x=(y=D==null?void 0:D.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...D.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const z=await j.signMessage(new TextEncoder().encode(_),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=z}}try{const{data:N,error:I}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:yk(E)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ui});if(I)throw I;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Zl}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:I})}catch(N){if(Ie(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const n=await ys(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:a,error:u}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ui});if(await zi(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Zl}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(Ie(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:i,token:o,access_token:a,nonce:u}=e,h=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ui}),{data:p,error:m}=h;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Zl}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:m})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,o,a,u;try{if("email"in e){const{email:h,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await wo(this.storage,this.storageKey));const{error:x}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in e){const{phone:h,options:p}=e,{data:m,error:y}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(o=p==null?void 0:p.data)!==null&&o!==void 0?o:{},create_user:(a=p==null?void 0:p.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(u=p==null?void 0:p.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:y}}throw new eu("You must provide either an email or phone number.")}catch(h){if(Ie(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,i;try{let o,a;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:ui});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,m=u.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(o){if(Ie(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,i,o;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await wo(this.storage,this.storageKey)),await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:Vk})}catch(a){if(Ie(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new Hi;const{error:o}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:a}=e,{error:u}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:i,type:o,options:a}=e,{data:u,error:h}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new eu("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ys(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Sf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await ys(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Cf()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(p,m,y)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,m,y))})}return{data:{session:e},error:null}}const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$i}):await this._useSession(async n=>{var i,o,a;const{data:u,error:h}=n;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hi}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:$i})})}catch(n){if(Ie(n))return uk(n)&&(await this._removeSession(),await zi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new Hi;const u=o.session;let h=null,p=null;this.flowType==="pkce"&&e.email!=null&&([h,p]=await wo(this.storage,this.storageKey));const{data:m,error:y}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:p}),jwt:u.access_token,xform:$i});if(y)throw y;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(Ie(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Hi;const n=Date.now()/1e3;let i=n,o=!0,a=null;const{payload:u}=_f(e.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{session:h,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:p}=await this._getUser(e.access_token);if(p)throw p;a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Hi;const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!kn())throw new tu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new e0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new e0("No code detected.");const{data:M,error:D}=await this._exchangeCodeForSession(e.code);if(D)throw D;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:h,expires_at:p,token_type:m}=e;if(!a||!h||!u||!m)throw new tu("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(h);let T=y+x;p&&(T=parseInt(p));const w=T-y;w*1e3<=Ao&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${x}s`);const _=T-x;y-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,T,y):y-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,T,y);const{data:E,error:N}=await this._getUser(a);if(N)throw N;const I={provider_token:i,provider_refresh_token:o,access_token:a,expires_in:x,expires_at:T,refresh_token:u,token_type:m,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:I,redirectType:e.type},error:null}}catch(i){if(Ie(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ys(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:a}=n;if(a)return{error:a};const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(lk(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await zi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=xk(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,o;try{const{data:{session:a},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await wo(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Ie(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:o}=await this._useSession(async a=>{var u,h,p,m,y;const{data:x,error:T}=a;if(T)throw T;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",w,{headers:this.headers,jwt:(y=(m=x.session)===null||m===void 0?void 0:m.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return kn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Ie(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,o;const{data:a,error:u}=n;if(u)throw u;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await wk(async o=>(o>0&&await Sk(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ui})),(o,a)=>{const u=200*Math.pow(2,o);return a&&wf(a)&&Date.now()+u-i<Ao})}catch(i){if(this._debug(n,"error",i),Ie(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),kn()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await ys(this.storage,this.storageKey);if(o&&this.userStorage){let u=await ys(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await No(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Cf()}else if(o&&!o.user&&!o.user){const u=await ys(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await zi(this.storage,this.storageKey+"-user"),await No(this.storage,this.storageKey,o)):o.user=Cf()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Sf;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Sf}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),wf(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(o.access_token);!h&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new Hi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Lu;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new Hi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={session:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(o,"error",a),Ie(a)){const u={session:null,error:a};return wf(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(p){a.push(p)}});if(await Promise.all(u),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await No(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=o0(o);await No(this.storage,this.storageKey,a)}else{const o=o0(n);await No(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await zi(this.storage,this.storageKey),await zi(this.storage,this.storageKey+"-code-verifier"),await zi(this.storage,this.storageKey+"-user"),this.userStorage&&await zi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ao);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/Ao);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ao}ms, refresh threshold is ${nh} ticks`),o<=nh&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof qS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,u]=await wo(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(h.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);o.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;return a?{data:null,error:a}:await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,o;const{data:a,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:p,error:m}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((o=p==null?void 0:p.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;if(a)return{data:null,error:a};const{data:u,error:h}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;return a?{data:null,error:a}:await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(e==null?void 0:e.factors)||[],o=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),a=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:o},error:a}=e;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=_f(o.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const y=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(h=>h.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(h=>h.kid===e),i&&this.jwks_cached_at+rk>o)return i;const{data:a,error:u}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,i=a.keys.find(h=>h.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:w,error:_}=await this.getSession();if(_||!w.session)return{data:null,error:_};i=w.session.access_token}const{header:o,payload:a,signature:u,raw:{header:h,payload:p}}=_f(i);n!=null&&n.allowExpired||Rk(a.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:a,header:o,signature:u},error:null}}const y=kk(o.alg),x=await crypto.subtle.importKey("jwk",m,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,u,gk(`${h}.${p}`)))throw new oh("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(i){if(Ie(i))return{data:null,error:i};throw i}}}Sa.nextInstanceID=0;const Yk=Sa;class Jk extends Yk{constructor(e){super(e)}}var Kk=function(t,e,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function h(y){try{m(i.next(y))}catch(x){u(x)}}function p(y){try{m(i.throw(y))}catch(x){u(x)}}function m(y){y.done?a(y.value):o(y.value).then(h,p)}m((i=i.apply(t,e||[])).next())})};class Qk{constructor(e,n,i){var o,a,u;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=ek(e),p=new URL(h);this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,y={db:FR,realtime:JR,auth:Object.assign(Object.assign({},YR),{storageKey:m}),global:$R},x=tk(i??{},y);this.storageKey=(o=x.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=x.global.headers)!==null&&a!==void 0?a:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(T,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=x.auth)!==null&&u!==void 0?u:{},this.headers,x.global.fetch),this.fetch=XR(n,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new fR(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new zR(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new nR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Kk(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:a,storageKey:u,flowType:h,lock:p,debug:m},y,x){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jk({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),y),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:a,flowType:h,lock:p,debug:m,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new MR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wk=(t,e,n)=>new Qk(t,e,n);function Xk(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Xk()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zk="https://avegthfwqkopcpinpcqm.supabase.co",zS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF2ZWd0aGZ3cWtvcGNwaW5wY3FtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3MDY0MTQsImV4cCI6MjA3NDI4MjQxNH0.b25Znf1eX6Gkdig3T2OVYYUeNB0tfnvP3xvhGXdcLsg",Mt=!!zS;Mt||console.warn("[Supabase] Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY. Auth and persistence features will be disabled.");const je=Wk(Zk,zS),GS=A.createContext(void 0),eD=({children:t})=>{const[e,n]=A.useState(null),[i,o]=A.useState(!0);A.useEffect(()=>{try{const y=window.location.search||"",x=window.location.hash||"",T=`${y}${x}`;if(T.includes("error=")){const w=new URLSearchParams(T.replace(/^#/,"").replace(/^\?/,"")),_=w.get("error"),E=w.get("error_code")||w.get("code"),N=w.get("error_description")||w.get("description");console.error("[Auth] OAuth callback error",{err:_,errCode:E,errDesc:N,combined:T}),N?alert(`Sign-in failed: ${decodeURIComponent(N)}`):(_||E)&&alert(`Sign-in failed: ${_||""} ${E||""}`.trim());try{const I=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,I)}catch{}}}catch(y){console.warn("[Auth] Failed to parse OAuth error params",y)}if(!Mt){n(null),o(!1);return}(async()=>{var y;try{const{data:x,error:T}=await je.auth.getSession();T&&console.error("[Auth] getSession error",T);const w=((y=x.session)==null?void 0:y.user)??null;console.log("[Auth] init session user",w?{id:w.id,email:w.email}:null),n(w?{id:w.id,email:w.email}:null)}catch(x){console.error("[Auth] init getSession threw",x)}finally{o(!1)}})();const{data:m}=je.auth.onAuthStateChange((y,x)=>{console.log("[Auth] onAuthStateChange",{event:y,user:x!=null&&x.user?{id:x.user.id,email:x.user.email}:null});const T=(x==null?void 0:x.user)??null;n(T?{id:T.id,email:T.email}:null)});return()=>{m.subscription.unsubscribe()}},[]);const a=async()=>{if(!Mt){alert("Supabase is not configured. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in .env.local and reload.");return}try{const p=window.location.origin;console.log("[Auth] signInWithGoogle redirectTo",p);const{data:m,error:y}=await je.auth.signInWithOAuth({provider:"google",options:{redirectTo:p}});y?(console.error("[Auth] signInWithOAuth error",y),alert(`Sign-in error: ${y.message}`)):console.log("[Auth] signInWithOAuth initiated",m)}catch(p){console.error("[Auth] signInWithGoogle threw",p),alert(`Sign-in error: ${(p==null?void 0:p.message)||p}`)}},u=async()=>{if(!Mt){n(null);return}try{await je.auth.signOut()}catch(p){console.error("[Auth] signOut threw",p)}},h=A.useMemo(()=>({user:e,loading:i,signInWithGoogle:a,signOut:u}),[e,i]);return g.jsx(GS.Provider,{value:h,children:t})},hn=()=>{const t=A.useContext(GS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},tD=({isCollapsed:t})=>{const{profile:e,setIsSettingsOpen:n}=Fn(),{user:i}=hn(),o=(i==null?void 0:i.email)||e.name||"Guest";return g.jsxs("button",{onClick:()=>n(!0),className:`flex items-center w-full p-2 rounded-lg text-left transition-colors hover:bg-slate-800 ${t?"justify-center":""}`,title:"View Profile & Settings",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgb(var(--color-input))] flex items-center justify-center border-2 border-[rgb(var(--color-border))] flex-shrink-0",children:g.jsx(Q1,{className:"w-6 h-6 text-[rgb(var(--color-text-secondary))]"})}),g.jsxs("div",{className:`ml-3 transition-opacity duration-300 ${t?"opacity-0 w-0":"opacity-100"}`,children:[g.jsx("p",{className:"font-semibold text-sm text-white truncate",children:o}),g.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:"View Settings"})]})]})},nD=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),iD=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),c0=({icon:t,label:e,isActive:n,isCollapsed:i,onClick:o})=>g.jsxs("button",{onClick:o,className:`relative flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 transform hover:scale-105 group ${n?"text-white":"text-[rgb(var(--color-text-secondary))] hover:bg-slate-700/50 hover:text-white"} ${i?"justify-center":""}`,"aria-label":e,title:i?e:"",children:[n&&g.jsx(Fe.div,{layoutId:"active-nav-indicator",className:"absolute inset-0 bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] rounded-lg shadow-lg animated-gradient-bg",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),g.jsxs("div",{className:"relative z-10 flex items-center",children:[t,g.jsx("span",{className:`ml-3 whitespace-nowrap transition-opacity duration-300 ${i?"opacity-0 w-0":"opacity-100"}`,children:e})]})]}),sD=()=>{const{activeView:t,setActiveView:e,isSidebarCollapsed:n,setIsSidebarCollapsed:i}=Fn(),{user:o}=hn(),a=[{view:xe.DASHBOARD,label:"Dashboard",icon:g.jsx(Yf,{})},{view:xe.TUTOR,label:"AI Tutor",icon:g.jsx(Pu,{})},{view:xe.SUBJECTS,label:"Subjects",icon:g.jsx(J1,{})},{view:xe.EXPLAINER,label:"Topic Explainer",icon:g.jsx(ep,{})},{view:xe.QUIZ,label:"Quiz Generator",icon:g.jsx(Ta,{})},{view:xe.COMPETITION,label:"Competitive",icon:g.jsx(Ta,{})},{view:xe.NEWS,label:"Current Affairs",icon:g.jsx(TS,{})},{view:xe.PLANNER,label:"Planner",icon:g.jsx(SS,{})},{view:xe.NOTES,label:"Notes",icon:g.jsx(Jf,{})},{view:xe.HELP,label:"Help",icon:g.jsx(Jf,{})}];return g.jsxs("aside",{className:`bg-[rgb(var(--color-sidebar))] p-4 flex flex-col flex-shrink-0 border-r border-[rgb(var(--color-border))] transition-all duration-300 ease-in-out ${n?"w-20":"w-64"}`,children:[g.jsxs("div",{className:`flex items-center mb-8 ${n?"justify-center":""}`,children:[g.jsx("div",{className:"p-2 bg-gradient-to-br from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] animated-gradient-bg rounded-lg",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),g.jsx("h1",{className:`ml-3 text-xl font-bold text-white whitespace-nowrap transition-opacity duration-300 ${n?"opacity-0 w-0":"opacity-100"}`,children:"EASYWAY Tutor"})]}),g.jsxs("nav",{className:"flex flex-col space-y-2",children:[a.filter(u=>u.view!==xe.ADMIN).map(u=>g.jsx(c0,{icon:u.icon,label:u.label,view:u.view,isActive:t===u.view,isCollapsed:n,onClick:()=>e(u.view)},u.view)),(o==null?void 0:o.email)==="info.edensnews@gmail.com"&&g.jsx(c0,{icon:g.jsx(Yf,{}),label:"Admin",view:xe.ADMIN,isActive:t===xe.ADMIN,isCollapsed:n,onClick:()=>e(xe.ADMIN)},xe.ADMIN)]}),g.jsxs("div",{className:"mt-auto space-y-4",children:[g.jsx("button",{onClick:()=>i(u=>!u),className:"w-full flex items-center justify-center p-2 rounded-lg text-[rgb(var(--color-text-secondary))] hover:bg-slate-700/50 hover:text-white transition-colors",title:n?"Expand Sidebar":"Collapse Sidebar",children:n?g.jsx(iD,{}):g.jsx(nD,{})}),g.jsx(tD,{isCollapsed:n}),g.jsx("div",{className:`text-xs text-slate-500 text-center transition-opacity duration-300 ${n?"opacity-0":"opacity-100"}`,children:g.jsx("p",{children:"© 2024 AI Learning Platform"})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oD,rD;function aD(){return{geminiUrl:oD,vertexUrl:rD}}function lD(t,e,n,i){var o,a;if(!(t!=null&&t.baseUrl)){const u=aD();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ns{}function be(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[h])){const p=t[h];if(Array.isArray(n))for(let m=0;m<p.length;m++){const y=p[m];d(y,e.slice(a+1),n[m])}else for(const m of p)d(m,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in t||(t[h]=[{}]);const p=t[h];d(p[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function c(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(u=>c(u,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rh(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var d0;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(d0||(d0={}));var f0;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(f0||(f0={}));var _t;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(_t||(_t={}));var h0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(h0||(h0={}));var p0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(p0||(p0={}));var m0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(m0||(m0={}));var g0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(g0||(g0={}));var y0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(y0||(y0={}));var v0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(v0||(v0={}));var x0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(x0||(x0={}));var b0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(b0||(b0={}));var T0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(T0||(T0={}));var S0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(S0||(S0={}));var w0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(w0||(w0={}));var _0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_0||(_0={}));var bu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(bu||(bu={}));var C0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(C0||(C0={}));var ah;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ah||(ah={}));var E0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(E0||(E0={}));var A0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(A0||(A0={}));var N0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(N0||(N0={}));var M0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(M0||(M0={}));var R0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(R0||(R0={}));var k0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(k0||(k0={}));var D0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(D0||(D0={}));var I0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(I0||(I0={}));var P0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(P0||(P0={}));var L0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(L0||(L0={}));var U0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(U0||(U0={}));var V0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(V0||(V0={}));var j0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(j0||(j0={}));var B0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(B0||(B0={}));var O0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(O0||(O0={}));var q0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(q0||(q0={}));var z0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(z0||(z0={}));var G0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(G0||(G0={}));var H0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(H0||(H0={}));var $0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})($0||($0={}));var F0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(F0||(F0={}));var Y0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Y0||(Y0={}));var J0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(J0||(J0={}));var K0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(K0||(K0={}));var Q0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Q0||(Q0={}));var W0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(W0||(W0={}));var X0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(X0||(X0={}));var Po;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Po||(Po={}));class lh{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zr{get text(){var e,n,i,o,a,u,h,p;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",y=!1;const x=[];for(const T of(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[w,_]of Object.entries(T))w!=="text"&&w!=="thought"&&(_!==null||_!==void 0)&&x.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,m+=T.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?m:void 0}get data(){var e,n,i,o,a,u,h,p;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const y=[];for(const x of(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[T,w]of Object.entries(x))T!=="inlineData"&&(w!==null||w!==void 0)&&y.push(T);x.inlineData&&typeof x.inlineData.data=="string"&&(m+=atob(x.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,i,o,a,u,h,p;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,i,o,a,u,h,p,m;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,i,o,a,u,h,p,m;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(h=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.output}}class Z0{}class eb{}class uD{}class cD{}class dD{}class fD{}class tb{}class nb{}class ib{}class hD{}class sb{}class Tu{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new Tu;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,n){const o=e.response;if(o){const a=new sb,u=o.videos;a.generatedVideos=u==null?void 0:u.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?rh(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),a.raiMediaFilteredCount=o.raiMediaFilteredCount,a.raiMediaFilteredReasons=o.raiMediaFilteredReasons,i.response=a}}else{const o=e.response;if(o){const a=new sb,u=o.generateVideoResponse,h=u==null?void 0:u.generatedSamples;a.generatedVideos=h==null?void 0:h.map(p=>{const m=p.video;return{video:{uri:m==null?void 0:m.uri,videoBytes:m!=null&&m.encodedVideo?rh(m==null?void 0:m.encodedVideo):void 0,mimeType:p.encoding}}}),a.raiMediaFilteredCount=u==null?void 0:u.raiMediaFilteredCount,a.raiMediaFilteredReasons=u==null?void 0:u.raiMediaFilteredReasons,i.response=a}}return i}}class ob{}class rb{}class ab{}class pD{}class mD{}class gD{}class lb{}class yD{get text(){var e,n,i;let o="",a=!1;const u=[];for(const h of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(h))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,o+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[h,p]of Object.entries(u))h!=="inlineData"&&p!==null&&a.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class vD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HS(t,e){const n=Ke(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function $S(t){return Array.isArray(t)?t.map(e=>Su(e)):[Su(t)]}function Su(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function FS(t){const e=Su(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YS(t){const e=Su(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ub(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function JS(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ub(e)):[ub(t)]}function uh(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function cb(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function db(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Yt(t){if(t==null)throw new Error("ContentUnion is required");return uh(t)?t:{role:"user",parts:JS(t)}}function KS(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Yt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Yt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Yt(n)):[Yt(e)]}function En(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(cb(t)||db(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yt(t)]}const e=[],n=[],i=uh(t[0]);for(const o of t){const a=uh(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(cb(o)||db(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:JS(n)}),e}function xD(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(_t).includes(n[0].toUpperCase())?n[0].toUpperCase():_t.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(_t).includes(i.toUpperCase())?i.toUpperCase():_t.TYPE_UNSPECIFIED})}}function Lo(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&xD(t.type,e);for(const[u,h]of Object.entries(t))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(_t).includes(h.toUpperCase())?h.toUpperCase():_t.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Lo(h);else if(i.includes(u)){const p=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}p.push(Lo(m))}e[u]=p}else if(o.includes(u)){const p={};for(const[m,y]of Object.entries(h))p[m]=Lo(y);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=h}return e}function rp(t){return Lo(t)}function ap(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function lp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ko(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Lo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Lo(e.response));return t}function Qo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function bD(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function yi(t,e){if(typeof e!="string")throw new Error("name must be a string");return bD(t,e,"cachedContents")}function QS(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ms(t){return rh(t)}function TD(t){return t!=null&&typeof t=="object"&&"name"in t}function SD(t){return t!=null&&typeof t=="object"&&"video"in t}function wD(t){return t!=null&&typeof t=="object"&&"uri"in t}function WS(t){var e;let n;if(TD(t)&&(n=t.name),!(wD(t)&&(n=t.uri,n===void 0))&&!(SD(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function XS(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function ZS(t){for(const e of["models","tunedModels","publisherModels"])if(_D(t,e))return t[e];return[]}function _D(t,e){return t!==null&&typeof t=="object"&&e in t}function CD(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function ED(t,e={}){const n=[],i=new Set;for(const o of t){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=CD(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function ew(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function AD(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Wo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tw(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ND(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function MD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function RD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function kD(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],ND(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],MD(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],RD(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function nw(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>kD(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function DD(t){const e={},n=c(t,["anyOf"]);n!=null&&d(e,["anyOf"],n);const i=c(t,["default"]);i!=null&&d(e,["default"],i);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const a=c(t,["enum"]);a!=null&&d(e,["enum"],a);const u=c(t,["example"]);u!=null&&d(e,["example"],u);const h=c(t,["format"]);h!=null&&d(e,["format"],h);const p=c(t,["items"]);p!=null&&d(e,["items"],p);const m=c(t,["maxItems"]);m!=null&&d(e,["maxItems"],m);const y=c(t,["maxLength"]);y!=null&&d(e,["maxLength"],y);const x=c(t,["maxProperties"]);x!=null&&d(e,["maxProperties"],x);const T=c(t,["maximum"]);T!=null&&d(e,["maximum"],T);const w=c(t,["minItems"]);w!=null&&d(e,["minItems"],w);const _=c(t,["minLength"]);_!=null&&d(e,["minLength"],_);const E=c(t,["minProperties"]);E!=null&&d(e,["minProperties"],E);const N=c(t,["minimum"]);N!=null&&d(e,["minimum"],N);const I=c(t,["nullable"]);I!=null&&d(e,["nullable"],I);const M=c(t,["pattern"]);M!=null&&d(e,["pattern"],M);const D=c(t,["properties"]);D!=null&&d(e,["properties"],D);const j=c(t,["propertyOrdering"]);j!=null&&d(e,["propertyOrdering"],j);const P=c(t,["required"]);P!=null&&d(e,["required"],P);const z=c(t,["title"]);z!=null&&d(e,["title"],z);const ee=c(t,["type"]);return ee!=null&&d(e,["type"],ee),e}function ID(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&d(e,["category"],n);const i=c(t,["threshold"]);return i!=null&&d(e,["threshold"],i),e}function PD(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&d(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&d(e,["responseJsonSchema"],p),e}function LD(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&d(e,["endTime"],i),e}function UD(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],LD(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function VD(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&d(e,["dynamicThreshold"],i),e}function jD(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],VD(n)),e}function BD(){return{}}function OD(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function qD(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>PD(m))),d(e,["functionDeclarations"],p)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&d(e,["googleSearch"],UD(i));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],jD(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],BD());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],OD(u));const h=c(t,["codeExecution"]);return h!=null&&d(e,["codeExecution"],h),e}function zD(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&d(e,["allowedFunctionNames"],i),e}function GD(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&d(e,["longitude"],i),e}function HD(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],GD(n));const i=c(t,["languageCode"]);return i!=null&&d(e,["languageCode"],i),e}function $D(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],zD(n));const i=c(t,["retrievalConfig"]);return i!=null&&d(e,["retrievalConfig"],HD(i)),e}function FD(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function iw(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],FD(n)),e}function YD(t){const e={},n=c(t,["speaker"]);n!=null&&d(e,["speaker"],n);const i=c(t,["voiceConfig"]);return i!=null&&d(e,["voiceConfig"],iw(i)),e}function JD(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>YD(o))),d(e,["speakerVoiceConfigs"],i)}return e}function KD(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],iw(n));const i=c(t,["multiSpeakerVoiceConfig"]);i!=null&&d(e,["multiSpeakerVoiceConfig"],JD(i));const o=c(t,["languageCode"]);return o!=null&&d(e,["languageCode"],o),e}function QD(t){const e={},n=c(t,["includeThoughts"]);n!=null&&d(e,["includeThoughts"],n);const i=c(t,["thinkingBudget"]);return i!=null&&d(e,["thinkingBudget"],i),e}function WD(t,e,n){const i={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],nw(Yt(o)));const a=c(e,["temperature"]);a!=null&&d(i,["temperature"],a);const u=c(e,["topP"]);u!=null&&d(i,["topP"],u);const h=c(e,["topK"]);h!=null&&d(i,["topK"],h);const p=c(e,["candidateCount"]);p!=null&&d(i,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&d(i,["maxOutputTokens"],m);const y=c(e,["stopSequences"]);y!=null&&d(i,["stopSequences"],y);const x=c(e,["responseLogprobs"]);x!=null&&d(i,["responseLogprobs"],x);const T=c(e,["logprobs"]);T!=null&&d(i,["logprobs"],T);const w=c(e,["presencePenalty"]);w!=null&&d(i,["presencePenalty"],w);const _=c(e,["frequencyPenalty"]);_!=null&&d(i,["frequencyPenalty"],_);const E=c(e,["seed"]);E!=null&&d(i,["seed"],E);const N=c(e,["responseMimeType"]);N!=null&&d(i,["responseMimeType"],N);const I=c(e,["responseSchema"]);I!=null&&d(i,["responseSchema"],DD(rp(I)));const M=c(e,["responseJsonSchema"]);if(M!=null&&d(i,["responseJsonSchema"],M),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=c(e,["safetySettings"]);if(n!==void 0&&D!=null){let ce=D;Array.isArray(ce)&&(ce=ce.map(ie=>ID(ie))),d(n,["safetySettings"],ce)}const j=c(e,["tools"]);if(n!==void 0&&j!=null){let ce=Qo(j);Array.isArray(ce)&&(ce=ce.map(ie=>qD(Ko(ie)))),d(n,["tools"],ce)}const P=c(e,["toolConfig"]);if(n!==void 0&&P!=null&&d(n,["toolConfig"],$D(P)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=c(e,["cachedContent"]);n!==void 0&&z!=null&&d(n,["cachedContent"],yi(t,z));const ee=c(e,["responseModalities"]);ee!=null&&d(i,["responseModalities"],ee);const Z=c(e,["mediaResolution"]);Z!=null&&d(i,["mediaResolution"],Z);const re=c(e,["speechConfig"]);if(re!=null&&d(i,["speechConfig"],KD(ap(re))),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ye=c(e,["thinkingConfig"]);return ye!=null&&d(i,["thinkingConfig"],QD(ye)),i}function XD(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["request","model"],Ke(t,i));const o=c(e,["contents"]);if(o!=null){let u=En(o);Array.isArray(u)&&(u=u.map(h=>nw(h))),d(n,["request","contents"],u)}const a=c(e,["config"]);return a!=null&&d(n,["request","generationConfig"],WD(t,a,n)),n}function ZD(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&d(n,["fileName"],i);const o=c(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>XD(t,u))),d(n,["requests","requests"],a)}return n}function e2(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&d(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function fb(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["src"]);o!=null&&d(n,["batch","inputConfig"],ZD(t,ew(t,o)));const a=c(e,["config"]);return a!=null&&d(n,["config"],e2(a,n)),n}function t2(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],Wo(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function n2(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],Wo(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function i2(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);if(e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function s2(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],i2(n,e)),e}function o2(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],Wo(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function r2(t){const e={},n=c(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&d(e,["gcsSource","uris"],i);const o=c(t,["bigqueryUri"]);if(o!=null&&d(e,["bigquerySource","inputUri"],o),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function a2(t){const e={},n=c(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&d(e,["gcsDestination","outputUriPrefix"],i);const o=c(t,["bigqueryUri"]);if(o!=null&&d(e,["bigqueryDestination","outputUri"],o),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function l2(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=c(t,["dest"]);return e!==void 0&&o!=null&&d(e,["outputConfig"],a2(AD(o))),n}function u2(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["model"],Ke(t,i));const o=c(e,["src"]);o!=null&&d(n,["inputConfig"],r2(ew(t,o)));const a=c(e,["config"]);return a!=null&&d(n,["config"],l2(a,n)),n}function c2(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],Wo(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function d2(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],Wo(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function f2(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&d(e,["_query","filter"],a),n}function h2(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],f2(n,e)),e}function p2(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],Wo(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function m2(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function g2(t){const e={},n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function y2(t){const e={},n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function v2(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],m2(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],g2(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],y2(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function x2(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>v2(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function b2(t){const e={},n=c(t,["citationSources"]);return n!=null&&d(e,["citations"],n),e}function T2(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&d(e,["retrievedUrl"],n);const i=c(t,["urlRetrievalStatus"]);return i!=null&&d(e,["urlRetrievalStatus"],i),e}function S2(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>T2(o))),d(e,["urlMetadata"],i)}return e}function w2(t){const e={},n=c(t,["content"]);n!=null&&d(e,["content"],x2(n));const i=c(t,["citationMetadata"]);i!=null&&d(e,["citationMetadata"],b2(i));const o=c(t,["tokenCount"]);o!=null&&d(e,["tokenCount"],o);const a=c(t,["finishReason"]);a!=null&&d(e,["finishReason"],a);const u=c(t,["urlContextMetadata"]);u!=null&&d(e,["urlContextMetadata"],S2(u));const h=c(t,["avgLogprobs"]);h!=null&&d(e,["avgLogprobs"],h);const p=c(t,["groundingMetadata"]);p!=null&&d(e,["groundingMetadata"],p);const m=c(t,["index"]);m!=null&&d(e,["index"],m);const y=c(t,["logprobsResult"]);y!=null&&d(e,["logprobsResult"],y);const x=c(t,["safetyRatings"]);return x!=null&&d(e,["safetyRatings"],x),e}function _2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>w2(m))),d(e,["candidates"],p)}const o=c(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);const a=c(t,["promptFeedback"]);a!=null&&d(e,["promptFeedback"],a);const u=c(t,["responseId"]);u!=null&&d(e,["responseId"],u);const h=c(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function sw(t){const e={},n=c(t,["details"]);n!=null&&d(e,["details"],n);const i=c(t,["code"]);i!=null&&d(e,["code"],i);const o=c(t,["message"]);return o!=null&&d(e,["message"],o),e}function C2(t){const e={},n=c(t,["response"]);n!=null&&d(e,["response"],_2(n));const i=c(t,["error"]);return i!=null&&d(e,["error"],sw(i)),e}function E2(t){const e={},n=c(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>C2(a))),d(e,["inlinedResponses"],o)}return e}function lu(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&d(e,["displayName"],i);const o=c(t,["metadata","state"]);o!=null&&d(e,["state"],tw(o));const a=c(t,["metadata","createTime"]);a!=null&&d(e,["createTime"],a);const u=c(t,["metadata","endTime"]);u!=null&&d(e,["endTime"],u);const h=c(t,["metadata","updateTime"]);h!=null&&d(e,["updateTime"],h);const p=c(t,["metadata","model"]);p!=null&&d(e,["model"],p);const m=c(t,["metadata","output"]);return m!=null&&d(e,["dest"],E2(m)),e}function A2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>lu(u))),d(e,["batchJobs"],a)}return e}function N2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["done"]);o!=null&&d(e,["done"],o);const a=c(t,["error"]);return a!=null&&d(e,["error"],sw(a)),e}function ow(t){const e={},n=c(t,["details"]);n!=null&&d(e,["details"],n);const i=c(t,["code"]);i!=null&&d(e,["code"],i);const o=c(t,["message"]);return o!=null&&d(e,["message"],o),e}function M2(t){const e={},n=c(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&d(e,["gcsUri"],i);const o=c(t,["bigquerySource","inputUri"]);return o!=null&&d(e,["bigqueryUri"],o),e}function R2(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&d(e,["gcsUri"],i);const o=c(t,["bigqueryDestination","outputUri"]);return o!=null&&d(e,["bigqueryUri"],o),e}function ch(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["displayName"]);i!=null&&d(e,["displayName"],i);const o=c(t,["state"]);o!=null&&d(e,["state"],tw(o));const a=c(t,["error"]);a!=null&&d(e,["error"],ow(a));const u=c(t,["createTime"]);u!=null&&d(e,["createTime"],u);const h=c(t,["startTime"]);h!=null&&d(e,["startTime"],h);const p=c(t,["endTime"]);p!=null&&d(e,["endTime"],p);const m=c(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const y=c(t,["model"]);y!=null&&d(e,["model"],y);const x=c(t,["inputConfig"]);x!=null&&d(e,["src"],M2(x));const T=c(t,["outputConfig"]);return T!=null&&d(e,["dest"],R2(T)),e}function k2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>ch(u))),d(e,["batchJobs"],a)}return e}function D2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["done"]);o!=null&&d(e,["done"],o);const a=c(t,["error"]);return a!=null&&d(e,["error"],ow(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _s;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(_s||(_s={}));class Da{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I2 extends Ns{constructor(e){super(),this.apiClient=e,this.create=async n=>{var i,o;if(this.apiClient.isVertexAI()){const u=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${u}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let a="",u={};const h=fb(this.apiClient,n);a=be("{model}:batchGenerateContent",h._url),u=h._query;const y=h.batch.inputConfig.requests,x=y.requests,T=[];for(const _ of x){const E=_;if(E.systemInstruction){const N=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=N,E.request=I}T.push(E)}return y.requests=T,delete h.config,delete h._url,delete h._query,this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()).then(_=>lu(_))}return await this.createInternal(n)},this.list=async(n={})=>new Da(_s.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=u2(this.apiClient,e);return h=be("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>ch(y))}else{const m=fb(this.apiClient,e);return h=be("{model}:batchGenerateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>lu(y))}}async get(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=c2(this.apiClient,e);return h=be("batchPredictionJobs/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>ch(y))}else{const m=t2(this.apiClient,e);return h=be("batches/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>lu(y))}}async cancel(e){var n,i,o,a;let u="",h={};if(this.apiClient.isVertexAI()){const p=d2(this.apiClient,e);u=be("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=n2(this.apiClient,e);u=be("batches/{name}:cancel",p._url),h=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=h2(e);return h=be("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=k2(y),T=new lb;return Object.assign(T,x),T})}else{const m=s2(e);return h=be("batches",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=A2(y),T=new lb;return Object.assign(T,x),T})}}async delete(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=p2(this.apiClient,e);return h=be("batchPredictionJobs/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>D2(y))}else{const m=o2(this.apiClient,e);return h=be("batches/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>N2(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P2(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function L2(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function U2(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function V2(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],P2(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],L2(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],U2(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function hb(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>V2(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function j2(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&d(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&d(e,["responseJsonSchema"],p),e}function B2(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&d(e,["endTime"],i),e}function O2(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],B2(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function q2(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&d(e,["dynamicThreshold"],i),e}function z2(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],q2(n)),e}function G2(){return{}}function H2(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function $2(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>j2(m))),d(e,["functionDeclarations"],p)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&d(e,["googleSearch"],O2(i));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],z2(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],G2());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],H2(u));const h=c(t,["codeExecution"]);return h!=null&&d(e,["codeExecution"],h),e}function F2(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&d(e,["allowedFunctionNames"],i),e}function Y2(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&d(e,["longitude"],i),e}function J2(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],Y2(n));const i=c(t,["languageCode"]);return i!=null&&d(e,["languageCode"],i),e}function K2(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],F2(n));const i=c(t,["retrievalConfig"]);return i!=null&&d(e,["retrievalConfig"],J2(i)),e}function Q2(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const o=c(t,["expireTime"]);e!==void 0&&o!=null&&d(e,["expireTime"],o);const a=c(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const u=c(t,["contents"]);if(e!==void 0&&u!=null){let y=En(u);Array.isArray(y)&&(y=y.map(x=>hb(x))),d(e,["contents"],y)}const h=c(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],hb(Yt(h)));const p=c(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>$2(x))),d(e,["tools"],y)}const m=c(t,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],K2(m)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function W2(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["model"],HS(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],Q2(o,n)),n}function X2(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],yi(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function Z2(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],yi(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function eI(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const o=c(t,["expireTime"]);return e!==void 0&&o!=null&&d(e,["expireTime"],o),n}function tI(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],yi(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],eI(o,n)),n}function nI(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function iI(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],nI(n,e)),e}function sI(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function oI(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["data"]);i!=null&&d(e,["data"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function rI(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function aI(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],sI(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],oI(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],rI(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function pb(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>aI(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function lI(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["parameters"]);o!=null&&d(e,["parameters"],o);const a=c(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const u=c(t,["response"]);u!=null&&d(e,["response"],u);const h=c(t,["responseJsonSchema"]);return h!=null&&d(e,["responseJsonSchema"],h),e}function uI(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&d(e,["endTime"],i),e}function cI(t){const e={},n=c(t,["timeRangeFilter"]);n!=null&&d(e,["timeRangeFilter"],uI(n));const i=c(t,["excludeDomains"]);return i!=null&&d(e,["excludeDomains"],i),e}function dI(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&d(e,["dynamicThreshold"],i),e}function fI(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],dI(n)),e}function hI(t){const e={},n=c(t,["excludeDomains"]);return n!=null&&d(e,["excludeDomains"],n),e}function pI(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&d(e,["apiKeyString"],n),e}function mI(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&d(e,["apiKeyConfig"],pI(n));const i=c(t,["authType"]);i!=null&&d(e,["authType"],i);const o=c(t,["googleServiceAccountConfig"]);o!=null&&d(e,["googleServiceAccountConfig"],o);const a=c(t,["httpBasicAuthConfig"]);a!=null&&d(e,["httpBasicAuthConfig"],a);const u=c(t,["oauthConfig"]);u!=null&&d(e,["oauthConfig"],u);const h=c(t,["oidcConfig"]);return h!=null&&d(e,["oidcConfig"],h),e}function gI(t){const e={},n=c(t,["authConfig"]);return n!=null&&d(e,["authConfig"],mI(n)),e}function yI(){return{}}function vI(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function xI(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(T=>lI(T))),d(e,["functionDeclarations"],x)}const i=c(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const o=c(t,["googleSearch"]);o!=null&&d(e,["googleSearch"],cI(o));const a=c(t,["googleSearchRetrieval"]);a!=null&&d(e,["googleSearchRetrieval"],fI(a));const u=c(t,["enterpriseWebSearch"]);u!=null&&d(e,["enterpriseWebSearch"],hI(u));const h=c(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],gI(h)),c(t,["urlContext"])!=null&&d(e,["urlContext"],yI());const m=c(t,["computerUse"]);m!=null&&d(e,["computerUse"],vI(m));const y=c(t,["codeExecution"]);return y!=null&&d(e,["codeExecution"],y),e}function bI(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&d(e,["allowedFunctionNames"],i),e}function TI(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&d(e,["longitude"],i),e}function SI(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],TI(n));const i=c(t,["languageCode"]);return i!=null&&d(e,["languageCode"],i),e}function wI(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],bI(n));const i=c(t,["retrievalConfig"]);return i!=null&&d(e,["retrievalConfig"],SI(i)),e}function _I(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const o=c(t,["expireTime"]);e!==void 0&&o!=null&&d(e,["expireTime"],o);const a=c(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const u=c(t,["contents"]);if(e!==void 0&&u!=null){let x=En(u);Array.isArray(x)&&(x=x.map(T=>pb(T))),d(e,["contents"],x)}const h=c(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],pb(Yt(h)));const p=c(t,["tools"]);if(e!==void 0&&p!=null){let x=p;Array.isArray(x)&&(x=x.map(T=>xI(T))),d(e,["tools"],x)}const m=c(t,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],wI(m));const y=c(t,["kmsKeyName"]);return e!==void 0&&y!=null&&d(e,["encryption_spec","kmsKeyName"],y),n}function CI(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["model"],HS(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],_I(o,n)),n}function EI(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],yi(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function AI(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],yi(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function NI(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&d(e,["ttl"],i);const o=c(t,["expireTime"]);return e!==void 0&&o!=null&&d(e,["expireTime"],o),n}function MI(t,e){const n={},i=c(e,["name"]);i!=null&&d(n,["_url","name"],yi(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],NI(o,n)),n}function RI(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function kI(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],RI(n,e)),e}function uu(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["displayName"]);i!=null&&d(e,["displayName"],i);const o=c(t,["model"]);o!=null&&d(e,["model"],o);const a=c(t,["createTime"]);a!=null&&d(e,["createTime"],a);const u=c(t,["updateTime"]);u!=null&&d(e,["updateTime"],u);const h=c(t,["expireTime"]);h!=null&&d(e,["expireTime"],h);const p=c(t,["usageMetadata"]);return p!=null&&d(e,["usageMetadata"],p),e}function DI(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function II(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>uu(u))),d(e,["cachedContents"],a)}return e}function cu(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["displayName"]);i!=null&&d(e,["displayName"],i);const o=c(t,["model"]);o!=null&&d(e,["model"],o);const a=c(t,["createTime"]);a!=null&&d(e,["createTime"],a);const u=c(t,["updateTime"]);u!=null&&d(e,["updateTime"],u);const h=c(t,["expireTime"]);h!=null&&d(e,["expireTime"],h);const p=c(t,["usageMetadata"]);return p!=null&&d(e,["usageMetadata"],p),e}function PI(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function LI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>cu(u))),d(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UI extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Da(_s.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=CI(this.apiClient,e);return h=be("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>cu(y))}else{const m=W2(this.apiClient,e);return h=be("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>uu(y))}}async get(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=EI(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>cu(y))}else{const m=X2(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>uu(y))}}async delete(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=AI(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=PI(y),T=new rb;return Object.assign(T,x),T})}else{const m=Z2(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=DI(y),T=new rb;return Object.assign(T,x),T})}}async update(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=MI(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>cu(y))}else{const m=tI(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>uu(y))}}async listInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=kI(e);return h=be("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=LI(y),T=new ab;return Object.assign(T,x),T})}else{const m=iI(e);return h=be("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=II(y),T=new ab;return Object.assign(T,x),T})}}}function mb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(t){return this instanceof lt?(this.v=t,this):new lt(t)}function Uo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(_){return Promise.resolve(_).then(w,x)}}function h(w,_){i[w]&&(o[w]=function(E){return new Promise(function(N,I){a.push([w,E,N,I])>1||p(w,E)})},_&&(o[w]=_(o[w])))}function p(w,_){try{m(i[w](_))}catch(E){T(a[0][3],E)}}function m(w){w.value instanceof lt?Promise.resolve(w.value.v).then(y,x):T(a[0][2],w)}function y(w){p("next",w)}function x(w){p("throw",w)}function T(w,_){w(_),a.shift(),a.length&&p(a[0][0],a[0][1])}}function pa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof mb=="function"?mb(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(h,p){u=t[a](u),o(h,p,u.done,u.value)})}}function o(a,u,h,p){Promise.resolve(p).then(function(m){a({value:m,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VI(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:rw(n)}function rw(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function jI(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function gb(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!rw(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class BI{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new OI(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class OI{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),jI(a)}async sendMessage(e){var n;await this.sendPromise;const i=Yt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,h;const p=await o,m=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,y=p.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let T=[];y!=null&&(T=(h=y.slice(x))!==null&&h!==void 0?h:[]);const w=m?[m]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=Yt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?gb(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return Uo(this,arguments,function*(){var u,h,p,m;const y=[];try{for(var x=!0,T=pa(e),w;w=yield lt(T.next()),u=w.done,!u;x=!0){m=w.value,x=!1;const _=m;if(VI(_)){const E=(o=(i=_.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;E!==void 0&&y.push(E)}yield yield lt(_)}}catch(_){h={error:_}}finally{try{!x&&!u&&(p=T.return)&&(yield lt(p.call(T)))}finally{if(h)throw h.error}}this.recordHistory(n,y)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...gb(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Uu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qI(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function zI(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],qI(n,e)),e}function GI(t){const e={},n=c(t,["details"]);n!=null&&d(e,["details"],n);const i=c(t,["message"]);i!=null&&d(e,["message"],i);const o=c(t,["code"]);return o!=null&&d(e,["code"],o),e}function HI(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["displayName"]);i!=null&&d(e,["displayName"],i);const o=c(t,["mimeType"]);o!=null&&d(e,["mimeType"],o);const a=c(t,["sizeBytes"]);a!=null&&d(e,["sizeBytes"],a);const u=c(t,["createTime"]);u!=null&&d(e,["createTime"],u);const h=c(t,["expirationTime"]);h!=null&&d(e,["expirationTime"],h);const p=c(t,["updateTime"]);p!=null&&d(e,["updateTime"],p);const m=c(t,["sha256Hash"]);m!=null&&d(e,["sha256Hash"],m);const y=c(t,["uri"]);y!=null&&d(e,["uri"],y);const x=c(t,["downloadUri"]);x!=null&&d(e,["downloadUri"],x);const T=c(t,["state"]);T!=null&&d(e,["state"],T);const w=c(t,["source"]);w!=null&&d(e,["source"],w);const _=c(t,["videoMetadata"]);_!=null&&d(e,["videoMetadata"],_);const E=c(t,["error"]);return E!=null&&d(e,["error"],GI(E)),e}function $I(t){const e={},n=c(t,["file"]);n!=null&&d(e,["file"],HI(n));const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}function FI(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","file"],WS(n));const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}function YI(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","file"],WS(n));const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}function JI(t){const e={},n=c(t,["details"]);n!=null&&d(e,["details"],n);const i=c(t,["message"]);i!=null&&d(e,["message"],i);const o=c(t,["code"]);return o!=null&&d(e,["code"],o),e}function dh(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["displayName"]);i!=null&&d(e,["displayName"],i);const o=c(t,["mimeType"]);o!=null&&d(e,["mimeType"],o);const a=c(t,["sizeBytes"]);a!=null&&d(e,["sizeBytes"],a);const u=c(t,["createTime"]);u!=null&&d(e,["createTime"],u);const h=c(t,["expirationTime"]);h!=null&&d(e,["expirationTime"],h);const p=c(t,["updateTime"]);p!=null&&d(e,["updateTime"],p);const m=c(t,["sha256Hash"]);m!=null&&d(e,["sha256Hash"],m);const y=c(t,["uri"]);y!=null&&d(e,["uri"],y);const x=c(t,["downloadUri"]);x!=null&&d(e,["downloadUri"],x);const T=c(t,["state"]);T!=null&&d(e,["state"],T);const w=c(t,["source"]);w!=null&&d(e,["source"],w);const _=c(t,["videoMetadata"]);_!=null&&d(e,["videoMetadata"],_);const E=c(t,["error"]);return E!=null&&d(e,["error"],JI(E)),e}function KI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>dh(u))),d(e,["files"],a)}return e}function QI(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function WI(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XI extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Da(_s.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>dh(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=zI(e);return a=be("files",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),o.then(p=>{const m=KI(p),y=new pD;return Object.assign(y,m),y})}}async createInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$I(e);return a=be("upload/v1beta/files",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=QI(p),y=new mD;return Object.assign(y,m),y})}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=FI(e);return a=be("files/{file}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>dh(p))}}async delete(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=YI(e);return a=be("files/{file}",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),o.then(p=>{const m=WI(p),y=new gD;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZI(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function aw(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],ZI(n)),e}function eP(t){const e={},n=c(t,["speaker"]);n!=null&&d(e,["speaker"],n);const i=c(t,["voiceConfig"]);return i!=null&&d(e,["voiceConfig"],aw(i)),e}function tP(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>eP(o))),d(e,["speakerVoiceConfigs"],i)}return e}function nP(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],aw(n));const i=c(t,["multiSpeakerVoiceConfig"]);i!=null&&d(e,["multiSpeakerVoiceConfig"],tP(i));const o=c(t,["languageCode"]);return o!=null&&d(e,["languageCode"],o),e}function iP(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function sP(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function oP(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function rP(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],iP(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],sP(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],oP(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function aP(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>rP(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function lP(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&d(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&d(e,["responseJsonSchema"],p),e}function uP(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&d(e,["endTime"],i),e}function cP(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],uP(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function dP(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&d(e,["dynamicThreshold"],i),e}function fP(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],dP(n)),e}function hP(){return{}}function pP(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function mP(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>lP(m))),d(e,["functionDeclarations"],p)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&d(e,["googleSearch"],cP(i));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],fP(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],hP());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],pP(u));const h=c(t,["codeExecution"]);return h!=null&&d(e,["codeExecution"],h),e}function gP(t){const e={},n=c(t,["handle"]);if(n!=null&&d(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yb(){return{}}function yP(t){const e={},n=c(t,["disabled"]);n!=null&&d(e,["disabled"],n);const i=c(t,["startOfSpeechSensitivity"]);i!=null&&d(e,["startOfSpeechSensitivity"],i);const o=c(t,["endOfSpeechSensitivity"]);o!=null&&d(e,["endOfSpeechSensitivity"],o);const a=c(t,["prefixPaddingMs"]);a!=null&&d(e,["prefixPaddingMs"],a);const u=c(t,["silenceDurationMs"]);return u!=null&&d(e,["silenceDurationMs"],u),e}function vP(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&d(e,["automaticActivityDetection"],yP(n));const i=c(t,["activityHandling"]);i!=null&&d(e,["activityHandling"],i);const o=c(t,["turnCoverage"]);return o!=null&&d(e,["turnCoverage"],o),e}function xP(t){const e={},n=c(t,["targetTokens"]);return n!=null&&d(e,["targetTokens"],n),e}function bP(t){const e={},n=c(t,["triggerTokens"]);n!=null&&d(e,["triggerTokens"],n);const i=c(t,["slidingWindow"]);return i!=null&&d(e,["slidingWindow"],xP(i)),e}function TP(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&d(e,["proactiveAudio"],n),e}function SP(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);const a=c(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const u=c(t,["topP"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","topP"],u);const h=c(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const y=c(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const x=c(t,["speechConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","speechConfig"],nP(lp(x)));const T=c(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],T);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],aP(Yt(w)));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let P=Qo(_);Array.isArray(P)&&(P=P.map(z=>mP(Ko(z)))),d(e,["setup","tools"],P)}const E=c(t,["sessionResumption"]);e!==void 0&&E!=null&&d(e,["setup","sessionResumption"],gP(E));const N=c(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&d(e,["setup","inputAudioTranscription"],yb());const I=c(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],yb());const M=c(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&d(e,["setup","realtimeInputConfig"],vP(M));const D=c(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],bP(D));const j=c(t,["proactivity"]);return e!==void 0&&j!=null&&d(e,["setup","proactivity"],TP(j)),n}function wP(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["setup","model"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],SP(o,n)),n}function _P(){return{}}function CP(){return{}}function EP(t){const e={},n=c(t,["media"]);n!=null&&d(e,["mediaChunks"],$S(n));const i=c(t,["audio"]);i!=null&&d(e,["audio"],YS(i));const o=c(t,["audioStreamEnd"]);o!=null&&d(e,["audioStreamEnd"],o);const a=c(t,["video"]);a!=null&&d(e,["video"],FS(a));const u=c(t,["text"]);return u!=null&&d(e,["text"],u),c(t,["activityStart"])!=null&&d(e,["activityStart"],_P()),c(t,["activityEnd"])!=null&&d(e,["activityEnd"],CP()),e}function lw(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const i=c(t,["weight"]);return i!=null&&d(e,["weight"],i),e}function AP(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lw(o))),d(e,["weightedPrompts"],i)}return e}function uw(t){const e={},n=c(t,["temperature"]);n!=null&&d(e,["temperature"],n);const i=c(t,["topK"]);i!=null&&d(e,["topK"],i);const o=c(t,["seed"]);o!=null&&d(e,["seed"],o);const a=c(t,["guidance"]);a!=null&&d(e,["guidance"],a);const u=c(t,["bpm"]);u!=null&&d(e,["bpm"],u);const h=c(t,["density"]);h!=null&&d(e,["density"],h);const p=c(t,["brightness"]);p!=null&&d(e,["brightness"],p);const m=c(t,["scale"]);m!=null&&d(e,["scale"],m);const y=c(t,["muteBass"]);y!=null&&d(e,["muteBass"],y);const x=c(t,["muteDrums"]);x!=null&&d(e,["muteDrums"],x);const T=c(t,["onlyBassAndDrums"]);T!=null&&d(e,["onlyBassAndDrums"],T);const w=c(t,["musicGenerationMode"]);return w!=null&&d(e,["musicGenerationMode"],w),e}function NP(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],uw(n)),e}function cw(t){const e={},n=c(t,["model"]);return n!=null&&d(e,["model"],n),e}function dw(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lw(o))),d(e,["weightedPrompts"],i)}return e}function fh(t){const e={},n=c(t,["setup"]);n!=null&&d(e,["setup"],cw(n));const i=c(t,["clientContent"]);i!=null&&d(e,["clientContent"],dw(i));const o=c(t,["musicGenerationConfig"]);o!=null&&d(e,["musicGenerationConfig"],uw(o));const a=c(t,["playbackControl"]);return a!=null&&d(e,["playbackControl"],a),e}function MP(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function RP(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],MP(n)),e}function kP(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&d(e,["voiceConfig"],RP(n)),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(t,["languageCode"]);return i!=null&&d(e,["languageCode"],i),e}function DP(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function IP(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["data"]);i!=null&&d(e,["data"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function PP(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function LP(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],DP(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],IP(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],PP(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function UP(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>LP(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function VP(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["parameters"]);o!=null&&d(e,["parameters"],o);const a=c(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const u=c(t,["response"]);u!=null&&d(e,["response"],u);const h=c(t,["responseJsonSchema"]);return h!=null&&d(e,["responseJsonSchema"],h),e}function jP(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&d(e,["endTime"],i),e}function BP(t){const e={},n=c(t,["timeRangeFilter"]);n!=null&&d(e,["timeRangeFilter"],jP(n));const i=c(t,["excludeDomains"]);return i!=null&&d(e,["excludeDomains"],i),e}function OP(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&d(e,["dynamicThreshold"],i),e}function qP(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],OP(n)),e}function zP(t){const e={},n=c(t,["excludeDomains"]);return n!=null&&d(e,["excludeDomains"],n),e}function GP(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&d(e,["apiKeyString"],n),e}function HP(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&d(e,["apiKeyConfig"],GP(n));const i=c(t,["authType"]);i!=null&&d(e,["authType"],i);const o=c(t,["googleServiceAccountConfig"]);o!=null&&d(e,["googleServiceAccountConfig"],o);const a=c(t,["httpBasicAuthConfig"]);a!=null&&d(e,["httpBasicAuthConfig"],a);const u=c(t,["oauthConfig"]);u!=null&&d(e,["oauthConfig"],u);const h=c(t,["oidcConfig"]);return h!=null&&d(e,["oidcConfig"],h),e}function $P(t){const e={},n=c(t,["authConfig"]);return n!=null&&d(e,["authConfig"],HP(n)),e}function FP(){return{}}function YP(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function JP(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(T=>VP(T))),d(e,["functionDeclarations"],x)}const i=c(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const o=c(t,["googleSearch"]);o!=null&&d(e,["googleSearch"],BP(o));const a=c(t,["googleSearchRetrieval"]);a!=null&&d(e,["googleSearchRetrieval"],qP(a));const u=c(t,["enterpriseWebSearch"]);u!=null&&d(e,["enterpriseWebSearch"],zP(u));const h=c(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],$P(h)),c(t,["urlContext"])!=null&&d(e,["urlContext"],FP());const m=c(t,["computerUse"]);m!=null&&d(e,["computerUse"],YP(m));const y=c(t,["codeExecution"]);return y!=null&&d(e,["codeExecution"],y),e}function KP(t){const e={},n=c(t,["handle"]);n!=null&&d(e,["handle"],n);const i=c(t,["transparent"]);return i!=null&&d(e,["transparent"],i),e}function vb(){return{}}function QP(t){const e={},n=c(t,["disabled"]);n!=null&&d(e,["disabled"],n);const i=c(t,["startOfSpeechSensitivity"]);i!=null&&d(e,["startOfSpeechSensitivity"],i);const o=c(t,["endOfSpeechSensitivity"]);o!=null&&d(e,["endOfSpeechSensitivity"],o);const a=c(t,["prefixPaddingMs"]);a!=null&&d(e,["prefixPaddingMs"],a);const u=c(t,["silenceDurationMs"]);return u!=null&&d(e,["silenceDurationMs"],u),e}function WP(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&d(e,["automaticActivityDetection"],QP(n));const i=c(t,["activityHandling"]);i!=null&&d(e,["activityHandling"],i);const o=c(t,["turnCoverage"]);return o!=null&&d(e,["turnCoverage"],o),e}function XP(t){const e={},n=c(t,["targetTokens"]);return n!=null&&d(e,["targetTokens"],n),e}function ZP(t){const e={},n=c(t,["triggerTokens"]);n!=null&&d(e,["triggerTokens"],n);const i=c(t,["slidingWindow"]);return i!=null&&d(e,["slidingWindow"],XP(i)),e}function eL(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&d(e,["proactiveAudio"],n),e}function tL(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);const a=c(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const u=c(t,["topP"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","topP"],u);const h=c(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const y=c(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const x=c(t,["speechConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","speechConfig"],kP(lp(x)));const T=c(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],T);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],UP(Yt(w)));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let P=Qo(_);Array.isArray(P)&&(P=P.map(z=>JP(Ko(z)))),d(e,["setup","tools"],P)}const E=c(t,["sessionResumption"]);e!==void 0&&E!=null&&d(e,["setup","sessionResumption"],KP(E));const N=c(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&d(e,["setup","inputAudioTranscription"],vb());const I=c(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],vb());const M=c(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&d(e,["setup","realtimeInputConfig"],WP(M));const D=c(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],ZP(D));const j=c(t,["proactivity"]);return e!==void 0&&j!=null&&d(e,["setup","proactivity"],eL(j)),n}function nL(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["setup","model"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],tL(o,n)),n}function iL(){return{}}function sL(){return{}}function oL(t){const e={},n=c(t,["media"]);n!=null&&d(e,["mediaChunks"],$S(n));const i=c(t,["audio"]);i!=null&&d(e,["audio"],YS(i));const o=c(t,["audioStreamEnd"]);o!=null&&d(e,["audioStreamEnd"],o);const a=c(t,["video"]);a!=null&&d(e,["video"],FS(a));const u=c(t,["text"]);return u!=null&&d(e,["text"],u),c(t,["activityStart"])!=null&&d(e,["activityStart"],iL()),c(t,["activityEnd"])!=null&&d(e,["activityEnd"],sL()),e}function rL(){return{}}function aL(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function lL(t){const e={},n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function uL(t){const e={},n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function cL(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],aL(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],lL(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],uL(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function dL(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>cL(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function xb(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const i=c(t,["finished"]);return i!=null&&d(e,["finished"],i),e}function fL(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&d(e,["retrievedUrl"],n);const i=c(t,["urlRetrievalStatus"]);return i!=null&&d(e,["urlRetrievalStatus"],i),e}function hL(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>fL(o))),d(e,["urlMetadata"],i)}return e}function pL(t){const e={},n=c(t,["modelTurn"]);n!=null&&d(e,["modelTurn"],dL(n));const i=c(t,["turnComplete"]);i!=null&&d(e,["turnComplete"],i);const o=c(t,["interrupted"]);o!=null&&d(e,["interrupted"],o);const a=c(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);const u=c(t,["generationComplete"]);u!=null&&d(e,["generationComplete"],u);const h=c(t,["inputTranscription"]);h!=null&&d(e,["inputTranscription"],xb(h));const p=c(t,["outputTranscription"]);p!=null&&d(e,["outputTranscription"],xb(p));const m=c(t,["urlContextMetadata"]);return m!=null&&d(e,["urlContextMetadata"],hL(m)),e}function mL(t){const e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);const i=c(t,["args"]);i!=null&&d(e,["args"],i);const o=c(t,["name"]);return o!=null&&d(e,["name"],o),e}function gL(t){const e={},n=c(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>mL(o))),d(e,["functionCalls"],i)}return e}function yL(t){const e={},n=c(t,["ids"]);return n!=null&&d(e,["ids"],n),e}function nu(t){const e={},n=c(t,["modality"]);n!=null&&d(e,["modality"],n);const i=c(t,["tokenCount"]);return i!=null&&d(e,["tokenCount"],i),e}function vL(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&d(e,["cachedContentTokenCount"],i);const o=c(t,["responseTokenCount"]);o!=null&&d(e,["responseTokenCount"],o);const a=c(t,["toolUsePromptTokenCount"]);a!=null&&d(e,["toolUsePromptTokenCount"],a);const u=c(t,["thoughtsTokenCount"]);u!=null&&d(e,["thoughtsTokenCount"],u);const h=c(t,["totalTokenCount"]);h!=null&&d(e,["totalTokenCount"],h);const p=c(t,["promptTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(w=>nu(w))),d(e,["promptTokensDetails"],T)}const m=c(t,["cacheTokensDetails"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(w=>nu(w))),d(e,["cacheTokensDetails"],T)}const y=c(t,["responseTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>nu(w))),d(e,["responseTokensDetails"],T)}const x=c(t,["toolUsePromptTokensDetails"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(w=>nu(w))),d(e,["toolUsePromptTokensDetails"],T)}return e}function xL(t){const e={},n=c(t,["timeLeft"]);return n!=null&&d(e,["timeLeft"],n),e}function bL(t){const e={},n=c(t,["newHandle"]);n!=null&&d(e,["newHandle"],n);const i=c(t,["resumable"]);i!=null&&d(e,["resumable"],i);const o=c(t,["lastConsumedClientMessageIndex"]);return o!=null&&d(e,["lastConsumedClientMessageIndex"],o),e}function TL(t){const e={};c(t,["setupComplete"])!=null&&d(e,["setupComplete"],rL());const i=c(t,["serverContent"]);i!=null&&d(e,["serverContent"],pL(i));const o=c(t,["toolCall"]);o!=null&&d(e,["toolCall"],gL(o));const a=c(t,["toolCallCancellation"]);a!=null&&d(e,["toolCallCancellation"],yL(a));const u=c(t,["usageMetadata"]);u!=null&&d(e,["usageMetadata"],vL(u));const h=c(t,["goAway"]);h!=null&&d(e,["goAway"],xL(h));const p=c(t,["sessionResumptionUpdate"]);return p!=null&&d(e,["sessionResumptionUpdate"],bL(p)),e}function SL(){return{}}function wL(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const i=c(t,["weight"]);return i!=null&&d(e,["weight"],i),e}function _L(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>wL(o))),d(e,["weightedPrompts"],i)}return e}function CL(t){const e={},n=c(t,["temperature"]);n!=null&&d(e,["temperature"],n);const i=c(t,["topK"]);i!=null&&d(e,["topK"],i);const o=c(t,["seed"]);o!=null&&d(e,["seed"],o);const a=c(t,["guidance"]);a!=null&&d(e,["guidance"],a);const u=c(t,["bpm"]);u!=null&&d(e,["bpm"],u);const h=c(t,["density"]);h!=null&&d(e,["density"],h);const p=c(t,["brightness"]);p!=null&&d(e,["brightness"],p);const m=c(t,["scale"]);m!=null&&d(e,["scale"],m);const y=c(t,["muteBass"]);y!=null&&d(e,["muteBass"],y);const x=c(t,["muteDrums"]);x!=null&&d(e,["muteDrums"],x);const T=c(t,["onlyBassAndDrums"]);T!=null&&d(e,["onlyBassAndDrums"],T);const w=c(t,["musicGenerationMode"]);return w!=null&&d(e,["musicGenerationMode"],w),e}function EL(t){const e={},n=c(t,["clientContent"]);n!=null&&d(e,["clientContent"],_L(n));const i=c(t,["musicGenerationConfig"]);return i!=null&&d(e,["musicGenerationConfig"],CL(i)),e}function AL(t){const e={},n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);i!=null&&d(e,["mimeType"],i);const o=c(t,["sourceMetadata"]);return o!=null&&d(e,["sourceMetadata"],EL(o)),e}function NL(t){const e={},n=c(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>AL(o))),d(e,["audioChunks"],i)}return e}function ML(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const i=c(t,["filteredReason"]);return i!=null&&d(e,["filteredReason"],i),e}function RL(t){const e={};c(t,["setupComplete"])!=null&&d(e,["setupComplete"],SL());const i=c(t,["serverContent"]);i!=null&&d(e,["serverContent"],NL(i));const o=c(t,["filteredPrompt"]);return o!=null&&d(e,["filteredPrompt"],ML(o)),e}function kL(t){const e={},n=c(t,["sessionId"]);return n!=null&&d(e,["sessionId"],n),e}function DL(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function IL(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["data"]);i!=null&&d(e,["data"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function PL(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function LL(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],DL(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],IL(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],PL(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function UL(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>LL(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function bb(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const i=c(t,["finished"]);return i!=null&&d(e,["finished"],i),e}function VL(t){const e={},n=c(t,["modelTurn"]);n!=null&&d(e,["modelTurn"],UL(n));const i=c(t,["turnComplete"]);i!=null&&d(e,["turnComplete"],i);const o=c(t,["interrupted"]);o!=null&&d(e,["interrupted"],o);const a=c(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);const u=c(t,["generationComplete"]);u!=null&&d(e,["generationComplete"],u);const h=c(t,["inputTranscription"]);h!=null&&d(e,["inputTranscription"],bb(h));const p=c(t,["outputTranscription"]);return p!=null&&d(e,["outputTranscription"],bb(p)),e}function jL(t){const e={},n=c(t,["args"]);n!=null&&d(e,["args"],n);const i=c(t,["name"]);return i!=null&&d(e,["name"],i),e}function BL(t){const e={},n=c(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jL(o))),d(e,["functionCalls"],i)}return e}function OL(t){const e={},n=c(t,["ids"]);return n!=null&&d(e,["ids"],n),e}function iu(t){const e={},n=c(t,["modality"]);n!=null&&d(e,["modality"],n);const i=c(t,["tokenCount"]);return i!=null&&d(e,["tokenCount"],i),e}function qL(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&d(e,["cachedContentTokenCount"],i);const o=c(t,["candidatesTokenCount"]);o!=null&&d(e,["responseTokenCount"],o);const a=c(t,["toolUsePromptTokenCount"]);a!=null&&d(e,["toolUsePromptTokenCount"],a);const u=c(t,["thoughtsTokenCount"]);u!=null&&d(e,["thoughtsTokenCount"],u);const h=c(t,["totalTokenCount"]);h!=null&&d(e,["totalTokenCount"],h);const p=c(t,["promptTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(_=>iu(_))),d(e,["promptTokensDetails"],w)}const m=c(t,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(_=>iu(_))),d(e,["cacheTokensDetails"],w)}const y=c(t,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(_=>iu(_))),d(e,["responseTokensDetails"],w)}const x=c(t,["toolUsePromptTokensDetails"]);if(x!=null){let w=x;Array.isArray(w)&&(w=w.map(_=>iu(_))),d(e,["toolUsePromptTokensDetails"],w)}const T=c(t,["trafficType"]);return T!=null&&d(e,["trafficType"],T),e}function zL(t){const e={},n=c(t,["timeLeft"]);return n!=null&&d(e,["timeLeft"],n),e}function GL(t){const e={},n=c(t,["newHandle"]);n!=null&&d(e,["newHandle"],n);const i=c(t,["resumable"]);i!=null&&d(e,["resumable"],i);const o=c(t,["lastConsumedClientMessageIndex"]);return o!=null&&d(e,["lastConsumedClientMessageIndex"],o),e}function HL(t){const e={},n=c(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],kL(n));const i=c(t,["serverContent"]);i!=null&&d(e,["serverContent"],VL(i));const o=c(t,["toolCall"]);o!=null&&d(e,["toolCall"],BL(o));const a=c(t,["toolCallCancellation"]);a!=null&&d(e,["toolCallCancellation"],OL(a));const u=c(t,["usageMetadata"]);u!=null&&d(e,["usageMetadata"],qL(u));const h=c(t,["goAway"]);h!=null&&d(e,["goAway"],zL(h));const p=c(t,["sessionResumptionUpdate"]);return p!=null&&d(e,["sessionResumptionUpdate"],GL(p)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $L(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function FL(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function YL(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function JL(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],$L(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],FL(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],YL(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function Vu(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>JL(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function KL(t){const e={},n=c(t,["anyOf"]);n!=null&&d(e,["anyOf"],n);const i=c(t,["default"]);i!=null&&d(e,["default"],i);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const a=c(t,["enum"]);a!=null&&d(e,["enum"],a);const u=c(t,["example"]);u!=null&&d(e,["example"],u);const h=c(t,["format"]);h!=null&&d(e,["format"],h);const p=c(t,["items"]);p!=null&&d(e,["items"],p);const m=c(t,["maxItems"]);m!=null&&d(e,["maxItems"],m);const y=c(t,["maxLength"]);y!=null&&d(e,["maxLength"],y);const x=c(t,["maxProperties"]);x!=null&&d(e,["maxProperties"],x);const T=c(t,["maximum"]);T!=null&&d(e,["maximum"],T);const w=c(t,["minItems"]);w!=null&&d(e,["minItems"],w);const _=c(t,["minLength"]);_!=null&&d(e,["minLength"],_);const E=c(t,["minProperties"]);E!=null&&d(e,["minProperties"],E);const N=c(t,["minimum"]);N!=null&&d(e,["minimum"],N);const I=c(t,["nullable"]);I!=null&&d(e,["nullable"],I);const M=c(t,["pattern"]);M!=null&&d(e,["pattern"],M);const D=c(t,["properties"]);D!=null&&d(e,["properties"],D);const j=c(t,["propertyOrdering"]);j!=null&&d(e,["propertyOrdering"],j);const P=c(t,["required"]);P!=null&&d(e,["required"],P);const z=c(t,["title"]);z!=null&&d(e,["title"],z);const ee=c(t,["type"]);return ee!=null&&d(e,["type"],ee),e}function QL(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&d(e,["category"],n);const i=c(t,["threshold"]);return i!=null&&d(e,["threshold"],i),e}function WL(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&d(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&d(e,["responseJsonSchema"],p),e}function XL(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&d(e,["endTime"],i),e}function ZL(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],XL(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function eU(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&d(e,["dynamicThreshold"],i),e}function tU(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],eU(n)),e}function nU(){return{}}function iU(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function sU(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>WL(m))),d(e,["functionDeclarations"],p)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&d(e,["googleSearch"],ZL(i));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],tU(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],nU());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],iU(u));const h=c(t,["codeExecution"]);return h!=null&&d(e,["codeExecution"],h),e}function oU(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&d(e,["allowedFunctionNames"],i),e}function rU(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&d(e,["longitude"],i),e}function aU(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],rU(n));const i=c(t,["languageCode"]);return i!=null&&d(e,["languageCode"],i),e}function lU(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],oU(n));const i=c(t,["retrievalConfig"]);return i!=null&&d(e,["retrievalConfig"],aU(i)),e}function uU(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function fw(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],uU(n)),e}function cU(t){const e={},n=c(t,["speaker"]);n!=null&&d(e,["speaker"],n);const i=c(t,["voiceConfig"]);return i!=null&&d(e,["voiceConfig"],fw(i)),e}function dU(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>cU(o))),d(e,["speakerVoiceConfigs"],i)}return e}function fU(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],fw(n));const i=c(t,["multiSpeakerVoiceConfig"]);i!=null&&d(e,["multiSpeakerVoiceConfig"],dU(i));const o=c(t,["languageCode"]);return o!=null&&d(e,["languageCode"],o),e}function hU(t){const e={},n=c(t,["includeThoughts"]);n!=null&&d(e,["includeThoughts"],n);const i=c(t,["thinkingBudget"]);return i!=null&&d(e,["thinkingBudget"],i),e}function pU(t,e,n){const i={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],Vu(Yt(o)));const a=c(e,["temperature"]);a!=null&&d(i,["temperature"],a);const u=c(e,["topP"]);u!=null&&d(i,["topP"],u);const h=c(e,["topK"]);h!=null&&d(i,["topK"],h);const p=c(e,["candidateCount"]);p!=null&&d(i,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&d(i,["maxOutputTokens"],m);const y=c(e,["stopSequences"]);y!=null&&d(i,["stopSequences"],y);const x=c(e,["responseLogprobs"]);x!=null&&d(i,["responseLogprobs"],x);const T=c(e,["logprobs"]);T!=null&&d(i,["logprobs"],T);const w=c(e,["presencePenalty"]);w!=null&&d(i,["presencePenalty"],w);const _=c(e,["frequencyPenalty"]);_!=null&&d(i,["frequencyPenalty"],_);const E=c(e,["seed"]);E!=null&&d(i,["seed"],E);const N=c(e,["responseMimeType"]);N!=null&&d(i,["responseMimeType"],N);const I=c(e,["responseSchema"]);I!=null&&d(i,["responseSchema"],KL(rp(I)));const M=c(e,["responseJsonSchema"]);if(M!=null&&d(i,["responseJsonSchema"],M),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=c(e,["safetySettings"]);if(n!==void 0&&D!=null){let ce=D;Array.isArray(ce)&&(ce=ce.map(ie=>QL(ie))),d(n,["safetySettings"],ce)}const j=c(e,["tools"]);if(n!==void 0&&j!=null){let ce=Qo(j);Array.isArray(ce)&&(ce=ce.map(ie=>sU(Ko(ie)))),d(n,["tools"],ce)}const P=c(e,["toolConfig"]);if(n!==void 0&&P!=null&&d(n,["toolConfig"],lU(P)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=c(e,["cachedContent"]);n!==void 0&&z!=null&&d(n,["cachedContent"],yi(t,z));const ee=c(e,["responseModalities"]);ee!=null&&d(i,["responseModalities"],ee);const Z=c(e,["mediaResolution"]);Z!=null&&d(i,["mediaResolution"],Z);const re=c(e,["speechConfig"]);if(re!=null&&d(i,["speechConfig"],fU(ap(re))),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ye=c(e,["thinkingConfig"]);return ye!=null&&d(i,["thinkingConfig"],hU(ye)),i}function Tb(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["contents"]);if(o!=null){let u=En(o);Array.isArray(u)&&(u=u.map(h=>Vu(h))),d(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&d(n,["generationConfig"],pU(t,a,n)),n}function mU(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&d(e,["requests[]","taskType"],i);const o=c(t,["title"]);e!==void 0&&o!=null&&d(e,["requests[]","title"],o);const a=c(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&d(e,["requests[]","outputDimensionality"],a),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function gU(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["contents"]);o!=null&&d(n,["requests[]","content"],KS(t,o));const a=c(e,["config"]);a!=null&&d(n,["config"],mU(a,n));const u=c(e,["model"]);return u!==void 0&&d(n,["requests[]","model"],Ke(t,u)),n}function yU(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);if(e!==void 0&&a!=null&&d(e,["parameters","guidanceScale"],a),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&d(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const y=c(t,["language"]);e!==void 0&&y!=null&&d(e,["parameters","language"],y);const x=c(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const T=c(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&d(e,["parameters","outputOptions","compressionQuality"],T),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const w=c(t,["imageSize"]);if(e!==void 0&&w!=null&&d(e,["parameters","sampleImageSize"],w),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function vU(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const a=c(e,["config"]);return a!=null&&d(n,["config"],yU(a,n)),n}function xU(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","name"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function bU(t,e,n){const i={},o=c(e,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const a=c(e,["pageToken"]);n!==void 0&&a!=null&&d(n,["_query","pageToken"],a);const u=c(e,["filter"]);n!==void 0&&u!=null&&d(n,["_query","filter"],u);const h=c(e,["queryBase"]);return n!==void 0&&h!=null&&d(n,["_url","models_url"],XS(t,h)),i}function TU(t,e){const n={},i=c(e,["config"]);return i!=null&&d(n,["config"],bU(t,i,n)),n}function SU(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=c(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const a=c(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&d(e,["defaultCheckpointId"],a),n}function wU(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","name"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],SU(o,n)),n}function _U(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","name"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function CU(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function EU(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["contents"]);if(o!=null){let u=En(o);Array.isArray(u)&&(u=u.map(h=>Vu(h))),d(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&d(n,["config"],CU(a)),n}function hw(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],Ms(n));const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function AU(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=c(t,["image"]);if(e!==void 0&&o!=null&&d(e,["instances[0]","image"],hw(o)),c(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function NU(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=c(t,["durationSeconds"]);if(e!==void 0&&o!=null&&d(e,["parameters","durationSeconds"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["aspectRatio"]);if(e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a),c(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=c(t,["negativePrompt"]);e!==void 0&&h!=null&&d(e,["parameters","negativePrompt"],h);const p=c(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&d(e,["parameters","enhancePrompt"],p),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(c(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(c(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function MU(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const a=c(e,["image"]);if(a!=null&&d(n,["instances[0]","image"],hw(a)),c(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const u=c(e,["source"]);u!=null&&d(n,["config"],AU(u,n));const h=c(e,["config"]);return h!=null&&d(n,["config"],NU(h,n)),n}function RU(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function kU(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["data"]);i!=null&&d(e,["data"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function DU(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function IU(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],RU(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],kU(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],DU(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function Xo(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>IU(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function PU(t){const e={},n=c(t,["anyOf"]);n!=null&&d(e,["anyOf"],n);const i=c(t,["default"]);i!=null&&d(e,["default"],i);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const a=c(t,["enum"]);a!=null&&d(e,["enum"],a);const u=c(t,["example"]);u!=null&&d(e,["example"],u);const h=c(t,["format"]);h!=null&&d(e,["format"],h);const p=c(t,["items"]);p!=null&&d(e,["items"],p);const m=c(t,["maxItems"]);m!=null&&d(e,["maxItems"],m);const y=c(t,["maxLength"]);y!=null&&d(e,["maxLength"],y);const x=c(t,["maxProperties"]);x!=null&&d(e,["maxProperties"],x);const T=c(t,["maximum"]);T!=null&&d(e,["maximum"],T);const w=c(t,["minItems"]);w!=null&&d(e,["minItems"],w);const _=c(t,["minLength"]);_!=null&&d(e,["minLength"],_);const E=c(t,["minProperties"]);E!=null&&d(e,["minProperties"],E);const N=c(t,["minimum"]);N!=null&&d(e,["minimum"],N);const I=c(t,["nullable"]);I!=null&&d(e,["nullable"],I);const M=c(t,["pattern"]);M!=null&&d(e,["pattern"],M);const D=c(t,["properties"]);D!=null&&d(e,["properties"],D);const j=c(t,["propertyOrdering"]);j!=null&&d(e,["propertyOrdering"],j);const P=c(t,["required"]);P!=null&&d(e,["required"],P);const z=c(t,["title"]);z!=null&&d(e,["title"],z);const ee=c(t,["type"]);return ee!=null&&d(e,["type"],ee),e}function LU(t){const e={},n=c(t,["featureSelectionPreference"]);return n!=null&&d(e,["featureSelectionPreference"],n),e}function UU(t){const e={},n=c(t,["method"]);n!=null&&d(e,["method"],n);const i=c(t,["category"]);i!=null&&d(e,["category"],i);const o=c(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function VU(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["parameters"]);o!=null&&d(e,["parameters"],o);const a=c(t,["parametersJsonSchema"]);a!=null&&d(e,["parametersJsonSchema"],a);const u=c(t,["response"]);u!=null&&d(e,["response"],u);const h=c(t,["responseJsonSchema"]);return h!=null&&d(e,["responseJsonSchema"],h),e}function jU(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&d(e,["endTime"],i),e}function BU(t){const e={},n=c(t,["timeRangeFilter"]);n!=null&&d(e,["timeRangeFilter"],jU(n));const i=c(t,["excludeDomains"]);return i!=null&&d(e,["excludeDomains"],i),e}function OU(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&d(e,["dynamicThreshold"],i),e}function qU(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],OU(n)),e}function zU(t){const e={},n=c(t,["excludeDomains"]);return n!=null&&d(e,["excludeDomains"],n),e}function GU(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&d(e,["apiKeyString"],n),e}function HU(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&d(e,["apiKeyConfig"],GU(n));const i=c(t,["authType"]);i!=null&&d(e,["authType"],i);const o=c(t,["googleServiceAccountConfig"]);o!=null&&d(e,["googleServiceAccountConfig"],o);const a=c(t,["httpBasicAuthConfig"]);a!=null&&d(e,["httpBasicAuthConfig"],a);const u=c(t,["oauthConfig"]);u!=null&&d(e,["oauthConfig"],u);const h=c(t,["oidcConfig"]);return h!=null&&d(e,["oidcConfig"],h),e}function $U(t){const e={},n=c(t,["authConfig"]);return n!=null&&d(e,["authConfig"],HU(n)),e}function FU(){return{}}function YU(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function pw(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(T=>VU(T))),d(e,["functionDeclarations"],x)}const i=c(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const o=c(t,["googleSearch"]);o!=null&&d(e,["googleSearch"],BU(o));const a=c(t,["googleSearchRetrieval"]);a!=null&&d(e,["googleSearchRetrieval"],qU(a));const u=c(t,["enterpriseWebSearch"]);u!=null&&d(e,["enterpriseWebSearch"],zU(u));const h=c(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],$U(h)),c(t,["urlContext"])!=null&&d(e,["urlContext"],FU());const m=c(t,["computerUse"]);m!=null&&d(e,["computerUse"],YU(m));const y=c(t,["codeExecution"]);return y!=null&&d(e,["codeExecution"],y),e}function JU(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["allowedFunctionNames"]);return i!=null&&d(e,["allowedFunctionNames"],i),e}function KU(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const i=c(t,["longitude"]);return i!=null&&d(e,["longitude"],i),e}function QU(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],KU(n));const i=c(t,["languageCode"]);return i!=null&&d(e,["languageCode"],i),e}function WU(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],JU(n));const i=c(t,["retrievalConfig"]);return i!=null&&d(e,["retrievalConfig"],QU(i)),e}function XU(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function ZU(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],XU(n)),e}function eV(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&d(e,["voiceConfig"],ZU(n)),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(t,["languageCode"]);return i!=null&&d(e,["languageCode"],i),e}function tV(t){const e={},n=c(t,["includeThoughts"]);n!=null&&d(e,["includeThoughts"],n);const i=c(t,["thinkingBudget"]);return i!=null&&d(e,["thinkingBudget"],i),e}function nV(t,e,n){const i={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],Xo(Yt(o)));const a=c(e,["temperature"]);a!=null&&d(i,["temperature"],a);const u=c(e,["topP"]);u!=null&&d(i,["topP"],u);const h=c(e,["topK"]);h!=null&&d(i,["topK"],h);const p=c(e,["candidateCount"]);p!=null&&d(i,["candidateCount"],p);const m=c(e,["maxOutputTokens"]);m!=null&&d(i,["maxOutputTokens"],m);const y=c(e,["stopSequences"]);y!=null&&d(i,["stopSequences"],y);const x=c(e,["responseLogprobs"]);x!=null&&d(i,["responseLogprobs"],x);const T=c(e,["logprobs"]);T!=null&&d(i,["logprobs"],T);const w=c(e,["presencePenalty"]);w!=null&&d(i,["presencePenalty"],w);const _=c(e,["frequencyPenalty"]);_!=null&&d(i,["frequencyPenalty"],_);const E=c(e,["seed"]);E!=null&&d(i,["seed"],E);const N=c(e,["responseMimeType"]);N!=null&&d(i,["responseMimeType"],N);const I=c(e,["responseSchema"]);I!=null&&d(i,["responseSchema"],PU(rp(I)));const M=c(e,["responseJsonSchema"]);M!=null&&d(i,["responseJsonSchema"],M);const D=c(e,["routingConfig"]);D!=null&&d(i,["routingConfig"],D);const j=c(e,["modelSelectionConfig"]);j!=null&&d(i,["modelConfig"],LU(j));const P=c(e,["safetySettings"]);if(n!==void 0&&P!=null){let oe=P;Array.isArray(oe)&&(oe=oe.map(U=>UU(U))),d(n,["safetySettings"],oe)}const z=c(e,["tools"]);if(n!==void 0&&z!=null){let oe=Qo(z);Array.isArray(oe)&&(oe=oe.map(U=>pw(Ko(U)))),d(n,["tools"],oe)}const ee=c(e,["toolConfig"]);n!==void 0&&ee!=null&&d(n,["toolConfig"],WU(ee));const Z=c(e,["labels"]);n!==void 0&&Z!=null&&d(n,["labels"],Z);const re=c(e,["cachedContent"]);n!==void 0&&re!=null&&d(n,["cachedContent"],yi(t,re));const ye=c(e,["responseModalities"]);ye!=null&&d(i,["responseModalities"],ye);const ce=c(e,["mediaResolution"]);ce!=null&&d(i,["mediaResolution"],ce);const ie=c(e,["speechConfig"]);ie!=null&&d(i,["speechConfig"],eV(ap(ie)));const Y=c(e,["audioTimestamp"]);Y!=null&&d(i,["audioTimestamp"],Y);const de=c(e,["thinkingConfig"]);return de!=null&&d(i,["thinkingConfig"],tV(de)),i}function Sb(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["contents"]);if(o!=null){let u=En(o);Array.isArray(u)&&(u=u.map(h=>Xo(h))),d(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&d(n,["generationConfig"],nV(t,a,n)),n}function iV(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&d(e,["instances[]","task_type"],i);const o=c(t,["title"]);e!==void 0&&o!=null&&d(e,["instances[]","title"],o);const a=c(t,["outputDimensionality"]);e!==void 0&&a!=null&&d(e,["parameters","outputDimensionality"],a);const u=c(t,["mimeType"]);e!==void 0&&u!=null&&d(e,["instances[]","mimeType"],u);const h=c(t,["autoTruncate"]);return e!==void 0&&h!=null&&d(e,["parameters","autoTruncate"],h),n}function sV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["contents"]);o!=null&&d(n,["instances[]","content"],KS(t,o));const a=c(e,["config"]);return a!=null&&d(n,["config"],iV(a,n)),n}function oV(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=c(t,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);const a=c(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const u=c(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const h=c(t,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const p=c(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const m=c(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const y=c(t,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const x=c(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&d(e,["parameters","includeSafetyAttributes"],x);const T=c(t,["includeRaiReason"]);e!==void 0&&T!=null&&d(e,["parameters","includeRaiReason"],T);const w=c(t,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);const _=c(t,["outputMimeType"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","mimeType"],_);const E=c(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E);const N=c(t,["addWatermark"]);e!==void 0&&N!=null&&d(e,["parameters","addWatermark"],N);const I=c(t,["imageSize"]);e!==void 0&&I!=null&&d(e,["parameters","sampleImageSize"],I);const M=c(t,["enhancePrompt"]);return e!==void 0&&M!=null&&d(e,["parameters","enhancePrompt"],M),n}function rV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const a=c(e,["config"]);return a!=null&&d(n,["config"],oV(a,n)),n}function Yn(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&d(e,["bytesBase64Encoded"],Ms(i));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function aV(t){const e={},n=c(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&d(e,["maskClasses"],i);const o=c(t,["maskDilation"]);return o!=null&&d(e,["dilation"],o),e}function lV(t){const e={},n=c(t,["controlType"]);n!=null&&d(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&d(e,["computeControl"],i),e}function uV(t){const e={},n=c(t,["styleDescription"]);return n!=null&&d(e,["styleDescription"],n),e}function cV(t){const e={},n=c(t,["subjectType"]);n!=null&&d(e,["subjectType"],n);const i=c(t,["subjectDescription"]);return i!=null&&d(e,["subjectDescription"],i),e}function dV(t){const e={},n=c(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],Yn(n));const i=c(t,["referenceId"]);i!=null&&d(e,["referenceId"],i);const o=c(t,["referenceType"]);o!=null&&d(e,["referenceType"],o);const a=c(t,["maskImageConfig"]);a!=null&&d(e,["maskImageConfig"],aV(a));const u=c(t,["controlImageConfig"]);u!=null&&d(e,["controlImageConfig"],lV(u));const h=c(t,["styleImageConfig"]);h!=null&&d(e,["styleImageConfig"],uV(h));const p=c(t,["subjectImageConfig"]);return p!=null&&d(e,["subjectImageConfig"],cV(p)),e}function fV(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=c(t,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);const a=c(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const u=c(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const h=c(t,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const p=c(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const m=c(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const y=c(t,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const x=c(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&d(e,["parameters","includeSafetyAttributes"],x);const T=c(t,["includeRaiReason"]);e!==void 0&&T!=null&&d(e,["parameters","includeRaiReason"],T);const w=c(t,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);const _=c(t,["outputMimeType"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","mimeType"],_);const E=c(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E);const N=c(t,["addWatermark"]);e!==void 0&&N!=null&&d(e,["parameters","addWatermark"],N);const I=c(t,["editMode"]);e!==void 0&&I!=null&&d(e,["parameters","editMode"],I);const M=c(t,["baseSteps"]);return e!==void 0&&M!=null&&d(e,["parameters","editConfig","baseSteps"],M),n}function hV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const a=c(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(p=>dV(p))),d(n,["instances[0]","referenceImages"],h)}const u=c(e,["config"]);return u!=null&&d(n,["config"],fV(u,n)),n}function pV(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=c(t,["includeRaiReason"]);e!==void 0&&o!=null&&d(e,["parameters","includeRaiReason"],o);const a=c(t,["outputMimeType"]);e!==void 0&&a!=null&&d(e,["parameters","outputOptions","mimeType"],a);const u=c(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&d(e,["parameters","outputOptions","compressionQuality"],u);const h=c(t,["enhanceInputImage"]);e!==void 0&&h!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],h);const p=c(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=c(t,["numberOfImages"]);e!==void 0&&m!=null&&d(e,["parameters","sampleCount"],m);const y=c(t,["mode"]);return e!==void 0&&y!=null&&d(e,["parameters","mode"],y),n}function mV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["image"]);o!=null&&d(n,["instances[0]","image"],Yn(o));const a=c(e,["upscaleFactor"]);a!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=c(e,["config"]);return u!=null&&d(n,["config"],pV(u,n)),n}function gV(t){const e={},n=c(t,["productImage"]);return n!=null&&d(e,["image"],Yn(n)),e}function yV(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=c(t,["personImage"]);e!==void 0&&o!=null&&d(e,["instances[0]","personImage","image"],Yn(o));const a=c(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>gV(h))),d(e,["instances[0]","productImages"],u)}return n}function vV(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=c(t,["baseSteps"]);e!==void 0&&o!=null&&d(e,["parameters","editConfig","baseSteps"],o);const a=c(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const u=c(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const h=c(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const p=c(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const m=c(t,["addWatermark"]);e!==void 0&&m!=null&&d(e,["parameters","addWatermark"],m);const y=c(t,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const x=c(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","compressionQuality"],x);const T=c(t,["enhancePrompt"]);return e!==void 0&&T!=null&&d(e,["parameters","enhancePrompt"],T),n}function xV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["source"]);o!=null&&d(n,["config"],yV(o,n));const a=c(e,["config"]);return a!=null&&d(n,["config"],vV(a,n)),n}function bV(t){const e={},n=c(t,["image"]);return n!=null&&d(e,["image"],Yn(n)),e}function TV(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=c(t,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],Yn(o));const a=c(t,["scribbleImage"]);return e!==void 0&&a!=null&&d(e,["instances[0]","scribble"],bV(a)),n}function SV(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&d(e,["parameters","mode"],i);const o=c(t,["maxPredictions"]);e!==void 0&&o!=null&&d(e,["parameters","maxPredictions"],o);const a=c(t,["confidenceThreshold"]);e!==void 0&&a!=null&&d(e,["parameters","confidenceThreshold"],a);const u=c(t,["maskDilation"]);e!==void 0&&u!=null&&d(e,["parameters","maskDilation"],u);const h=c(t,["binaryColorThreshold"]);return e!==void 0&&h!=null&&d(e,["parameters","binaryColorThreshold"],h),n}function wV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["source"]);o!=null&&d(n,["config"],TV(o,n));const a=c(e,["config"]);return a!=null&&d(n,["config"],SV(a,n)),n}function _V(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","name"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function CV(t,e,n){const i={},o=c(e,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const a=c(e,["pageToken"]);n!==void 0&&a!=null&&d(n,["_query","pageToken"],a);const u=c(e,["filter"]);n!==void 0&&u!=null&&d(n,["_query","filter"],u);const h=c(e,["queryBase"]);return n!==void 0&&h!=null&&d(n,["_url","models_url"],XS(t,h)),i}function EV(t,e){const n={},i=c(e,["config"]);return i!=null&&d(n,["config"],CV(t,i,n)),n}function AV(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=c(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const a=c(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&d(e,["defaultCheckpointId"],a),n}function NV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],AV(o,n)),n}function MV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","name"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function RV(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&d(e,["systemInstruction"],Xo(Yt(i)));const o=c(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>pw(h))),d(e,["tools"],u)}const a=c(t,["generationConfig"]);return e!==void 0&&a!=null&&d(e,["generationConfig"],a),n}function kV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["contents"]);if(o!=null){let u=En(o);Array.isArray(u)&&(u=u.map(h=>Xo(h))),d(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&d(n,["config"],RV(a,n)),n}function DV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["contents"]);if(o!=null){let u=En(o);Array.isArray(u)&&(u=u.map(h=>Xo(h))),d(n,["contents"],u)}const a=c(e,["config"]);return a!=null&&d(n,["config"],a),n}function mw(t){const e={},n=c(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&d(e,["bytesBase64Encoded"],Ms(i));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function IV(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&d(e,["instances[0]","prompt"],i);const o=c(t,["image"]);e!==void 0&&o!=null&&d(e,["instances[0]","image"],Yn(o));const a=c(t,["video"]);return e!==void 0&&a!=null&&d(e,["instances[0]","video"],mw(a)),n}function PV(t){const e={},n=c(t,["image"]);n!=null&&d(e,["image"],Yn(n));const i=c(t,["referenceType"]);return i!=null&&d(e,["referenceType"],i),e}function LV(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const a=c(t,["fps"]);e!==void 0&&a!=null&&d(e,["parameters","fps"],a);const u=c(t,["durationSeconds"]);e!==void 0&&u!=null&&d(e,["parameters","durationSeconds"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const p=c(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const m=c(t,["resolution"]);e!==void 0&&m!=null&&d(e,["parameters","resolution"],m);const y=c(t,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const x=c(t,["pubsubTopic"]);e!==void 0&&x!=null&&d(e,["parameters","pubsubTopic"],x);const T=c(t,["negativePrompt"]);e!==void 0&&T!=null&&d(e,["parameters","negativePrompt"],T);const w=c(t,["enhancePrompt"]);e!==void 0&&w!=null&&d(e,["parameters","enhancePrompt"],w);const _=c(t,["generateAudio"]);e!==void 0&&_!=null&&d(e,["parameters","generateAudio"],_);const E=c(t,["lastFrame"]);e!==void 0&&E!=null&&d(e,["instances[0]","lastFrame"],Yn(E));const N=c(t,["referenceImages"]);if(e!==void 0&&N!=null){let M=N;Array.isArray(M)&&(M=M.map(D=>PV(D))),d(e,["instances[0]","referenceImages"],M)}const I=c(t,["compressionQuality"]);return e!==void 0&&I!=null&&d(e,["parameters","compressionQuality"],I),n}function UV(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["_url","model"],Ke(t,i));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const a=c(e,["image"]);a!=null&&d(n,["instances[0]","image"],Yn(a));const u=c(e,["video"]);u!=null&&d(n,["instances[0]","video"],mw(u));const h=c(e,["source"]);h!=null&&d(n,["config"],IV(h,n));const p=c(e,["config"]);return p!=null&&d(n,["config"],LV(p,n)),n}function VV(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function jV(t){const e={},n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function BV(t){const e={},n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function OV(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],VV(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],jV(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],BV(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function qV(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>OV(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function zV(t){const e={},n=c(t,["citationSources"]);return n!=null&&d(e,["citations"],n),e}function GV(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&d(e,["retrievedUrl"],n);const i=c(t,["urlRetrievalStatus"]);return i!=null&&d(e,["urlRetrievalStatus"],i),e}function HV(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>GV(o))),d(e,["urlMetadata"],i)}return e}function $V(t){const e={},n=c(t,["content"]);n!=null&&d(e,["content"],qV(n));const i=c(t,["citationMetadata"]);i!=null&&d(e,["citationMetadata"],zV(i));const o=c(t,["tokenCount"]);o!=null&&d(e,["tokenCount"],o);const a=c(t,["finishReason"]);a!=null&&d(e,["finishReason"],a);const u=c(t,["urlContextMetadata"]);u!=null&&d(e,["urlContextMetadata"],HV(u));const h=c(t,["avgLogprobs"]);h!=null&&d(e,["avgLogprobs"],h);const p=c(t,["groundingMetadata"]);p!=null&&d(e,["groundingMetadata"],p);const m=c(t,["index"]);m!=null&&d(e,["index"],m);const y=c(t,["logprobsResult"]);y!=null&&d(e,["logprobsResult"],y);const x=c(t,["safetyRatings"]);return x!=null&&d(e,["safetyRatings"],x),e}function wb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>$V(m))),d(e,["candidates"],p)}const o=c(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);const a=c(t,["promptFeedback"]);a!=null&&d(e,["promptFeedback"],a);const u=c(t,["responseId"]);u!=null&&d(e,["responseId"],u);const h=c(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function FV(t){const e={},n=c(t,["values"]);return n!=null&&d(e,["values"],n),e}function YV(){return{}}function JV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>FV(u))),d(e,["embeddings"],a)}return c(t,["metadata"])!=null&&d(e,["metadata"],YV()),e}function KV(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],Ms(n));const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function gw(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&d(e,["scores"],i);const o=c(t,["contentType"]);return o!=null&&d(e,["contentType"],o),e}function QV(t){const e={},n=c(t,["_self"]);n!=null&&d(e,["image"],KV(n));const i=c(t,["raiFilteredReason"]);i!=null&&d(e,["raiFilteredReason"],i);const o=c(t,["_self"]);return o!=null&&d(e,["safetyAttributes"],gw(o)),e}function WV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>QV(u))),d(e,["generatedImages"],a)}const o=c(t,["positivePromptSafetyAttributes"]);return o!=null&&d(e,["positivePromptSafetyAttributes"],gw(o)),e}function XV(t){const e={},n=c(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&d(e,["createTime"],i);const o=c(t,["updateTime"]);return o!=null&&d(e,["updateTime"],o),e}function hh(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["displayName"]);i!=null&&d(e,["displayName"],i);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const a=c(t,["version"]);a!=null&&d(e,["version"],a);const u=c(t,["_self"]);u!=null&&d(e,["tunedModelInfo"],XV(u));const h=c(t,["inputTokenLimit"]);h!=null&&d(e,["inputTokenLimit"],h);const p=c(t,["outputTokenLimit"]);p!=null&&d(e,["outputTokenLimit"],p);const m=c(t,["supportedGenerationMethods"]);return m!=null&&d(e,["supportedActions"],m),e}function ZV(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["_self"]);if(o!=null){let a=ZS(o);Array.isArray(a)&&(a=a.map(u=>hh(u))),d(e,["models"],a)}return e}function ej(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function tj(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&d(e,["totalTokens"],i);const o=c(t,["cachedContentTokenCount"]);return o!=null&&d(e,["cachedContentTokenCount"],o),e}function nj(t){const e={},n=c(t,["video","uri"]);n!=null&&d(e,["uri"],n);const i=c(t,["video","encodedVideo"]);i!=null&&d(e,["videoBytes"],Ms(i));const o=c(t,["encoding"]);return o!=null&&d(e,["mimeType"],o),e}function ij(t){const e={},n=c(t,["_self"]);return n!=null&&d(e,["video"],nj(n)),e}function sj(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>ij(u))),d(e,["generatedVideos"],a)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const o=c(t,["raiMediaFilteredReasons"]);return o!=null&&d(e,["raiMediaFilteredReasons"],o),e}function oj(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["metadata"]);i!=null&&d(e,["metadata"],i);const o=c(t,["done"]);o!=null&&d(e,["done"],o);const a=c(t,["error"]);a!=null&&d(e,["error"],a);const u=c(t,["response","generateVideoResponse"]);return u!=null&&d(e,["response"],sj(u)),e}function rj(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function aj(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["data"]);i!=null&&d(e,["data"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function lj(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function uj(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],rj(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],aj(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],lj(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function cj(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>uj(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function dj(t){const e={},n=c(t,["citations"]);return n!=null&&d(e,["citations"],n),e}function fj(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&d(e,["retrievedUrl"],n);const i=c(t,["urlRetrievalStatus"]);return i!=null&&d(e,["urlRetrievalStatus"],i),e}function hj(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>fj(o))),d(e,["urlMetadata"],i)}return e}function pj(t){const e={},n=c(t,["content"]);n!=null&&d(e,["content"],cj(n));const i=c(t,["citationMetadata"]);i!=null&&d(e,["citationMetadata"],dj(i));const o=c(t,["finishMessage"]);o!=null&&d(e,["finishMessage"],o);const a=c(t,["finishReason"]);a!=null&&d(e,["finishReason"],a);const u=c(t,["urlContextMetadata"]);u!=null&&d(e,["urlContextMetadata"],hj(u));const h=c(t,["avgLogprobs"]);h!=null&&d(e,["avgLogprobs"],h);const p=c(t,["groundingMetadata"]);p!=null&&d(e,["groundingMetadata"],p);const m=c(t,["index"]);m!=null&&d(e,["index"],m);const y=c(t,["logprobsResult"]);y!=null&&d(e,["logprobsResult"],y);const x=c(t,["safetyRatings"]);return x!=null&&d(e,["safetyRatings"],x),e}function _b(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(y=>pj(y))),d(e,["candidates"],m)}const o=c(t,["createTime"]);o!=null&&d(e,["createTime"],o);const a=c(t,["modelVersion"]);a!=null&&d(e,["modelVersion"],a);const u=c(t,["promptFeedback"]);u!=null&&d(e,["promptFeedback"],u);const h=c(t,["responseId"]);h!=null&&d(e,["responseId"],h);const p=c(t,["usageMetadata"]);return p!=null&&d(e,["usageMetadata"],p),e}function mj(t){const e={},n=c(t,["truncated"]);n!=null&&d(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&d(e,["tokenCount"],i),e}function gj(t){const e={},n=c(t,["values"]);n!=null&&d(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&d(e,["statistics"],mj(i)),e}function yj(t){const e={},n=c(t,["billableCharacterCount"]);return n!=null&&d(e,["billableCharacterCount"],n),e}function vj(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>gj(u))),d(e,["embeddings"],a)}const o=c(t,["metadata"]);return o!=null&&d(e,["metadata"],yj(o)),e}function yw(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&d(e,["imageBytes"],Ms(i));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function vw(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&d(e,["scores"],i);const o=c(t,["contentType"]);return o!=null&&d(e,["contentType"],o),e}function ju(t){const e={},n=c(t,["_self"]);n!=null&&d(e,["image"],yw(n));const i=c(t,["raiFilteredReason"]);i!=null&&d(e,["raiFilteredReason"],i);const o=c(t,["_self"]);o!=null&&d(e,["safetyAttributes"],vw(o));const a=c(t,["prompt"]);return a!=null&&d(e,["enhancedPrompt"],a),e}function xj(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ju(u))),d(e,["generatedImages"],a)}const o=c(t,["positivePromptSafetyAttributes"]);return o!=null&&d(e,["positivePromptSafetyAttributes"],vw(o)),e}function bj(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ju(a))),d(e,["generatedImages"],o)}return e}function Tj(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ju(a))),d(e,["generatedImages"],o)}return e}function Sj(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ju(o))),d(e,["generatedImages"],i)}return e}function wj(t){const e={},n=c(t,["label"]);n!=null&&d(e,["label"],n);const i=c(t,["score"]);return i!=null&&d(e,["score"],i),e}function _j(t){const e={},n=c(t,["_self"]);n!=null&&d(e,["mask"],yw(n));const i=c(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>wj(a))),d(e,["labels"],o)}return e}function Cj(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_j(o))),d(e,["generatedMasks"],i)}return e}function Ej(t){const e={},n=c(t,["endpoint"]);n!=null&&d(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&d(e,["deployedModelId"],i),e}function Aj(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&d(e,["createTime"],i);const o=c(t,["updateTime"]);return o!=null&&d(e,["updateTime"],o),e}function Nj(t){const e={},n=c(t,["checkpointId"]);n!=null&&d(e,["checkpointId"],n);const i=c(t,["epoch"]);i!=null&&d(e,["epoch"],i);const o=c(t,["step"]);return o!=null&&d(e,["step"],o),e}function ph(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["displayName"]);i!=null&&d(e,["displayName"],i);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const a=c(t,["versionId"]);a!=null&&d(e,["version"],a);const u=c(t,["deployedModels"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(T=>Ej(T))),d(e,["endpoints"],x)}const h=c(t,["labels"]);h!=null&&d(e,["labels"],h);const p=c(t,["_self"]);p!=null&&d(e,["tunedModelInfo"],Aj(p));const m=c(t,["defaultCheckpointId"]);m!=null&&d(e,["defaultCheckpointId"],m);const y=c(t,["checkpoints"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(T=>Nj(T))),d(e,["checkpoints"],x)}return e}function Mj(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["_self"]);if(o!=null){let a=ZS(o);Array.isArray(a)&&(a=a.map(u=>ph(u))),d(e,["models"],a)}return e}function Rj(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function kj(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&d(e,["totalTokens"],i),e}function Dj(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);return i!=null&&d(e,["tokensInfo"],i),e}function Ij(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&d(e,["videoBytes"],Ms(i));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Pj(t){const e={},n=c(t,["_self"]);return n!=null&&d(e,["video"],Ij(n)),e}function Lj(t){const e={},n=c(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Pj(u))),d(e,["generatedVideos"],a)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&d(e,["raiMediaFilteredCount"],i);const o=c(t,["raiMediaFilteredReasons"]);return o!=null&&d(e,["raiMediaFilteredReasons"],o),e}function Uj(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const i=c(t,["metadata"]);i!=null&&d(e,["metadata"],i);const o=c(t,["done"]);o!=null&&d(e,["done"],o);const a=c(t,["error"]);a!=null&&d(e,["error"],a);const u=c(t,["response"]);return u!=null&&d(e,["response"],Lj(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vj="Content-Type",jj="X-Server-Timeout",Bj="User-Agent",mh="x-goog-api-client",Oj="1.16.0",qj=`google-genai-sdk/${Oj}`,zj="v1beta1",Gj="v1beta",Cb=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Hj{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:zj,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Gj,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))o.searchParams.append(u,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&$j(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Eb(o),new lh(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Eb(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Uo(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:h,value:p}=yield lt(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p,{stream:!0});try{const x=JSON.parse(m);if("error"in x){const T=JSON.parse(JSON.stringify(x.error)),w=T.status,_=T.code,E=`got status: ${w}. ${JSON.stringify(x)}`;if(_>=400&&_<600)throw new Uu({message:E,status:_})}}catch(x){if(x.name==="ApiError")throw x}u+=m;let y=u.match(Cb);for(;y;){const x=y[1];try{const T=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield lt(new lh(T)),u=u.slice(y[0].length),y=u.match(Cb)}catch(T){throw new Error(`exception parsing stream chunk ${x}. ${T}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=qj+" "+this.clientOptions.userAgentExtra;return e[Bj]=n,e[mh]=n,e[Vj]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))n.append(i,o);e.timeout&&e.timeout>0&&n.append(jj,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const h=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=h;const p=await this.fetchUploadUrl(o,n);return a.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},u=await this.request({path:be("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function Eb(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Uu({message:o,status:n}):new Error(o)}}function $j(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const h=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],y=h[p];m&&typeof m=="object"&&!Array.isArray(m)&&y&&typeof y=="object"&&!Array.isArray(y)?h[p]=i(y,m):(y&&m&&typeof y!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof m}. Overwriting.`),h[p]=m)}return h}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fj="mcp_used/unknown";let Yj=!1;function xw(t){for(const e of t)if(Jj(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Yj}function bw(t){var e;const n=(e=t[mh])!==null&&e!==void 0?e:"";t[mh]=(n+` ${Fj}`).trimStart()}function Jj(t){return t!==null&&typeof t=="object"&&t instanceof up}function Kj(t,e=100){return Uo(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield lt(t.listTools({cursor:i}));for(const u of a.tools)yield yield lt(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class up{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new up(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const y of this.mcpClients)try{for(var h=!0,p=(n=void 0,pa(Kj(y))),m;m=await p.next(),e=m.done,!e;h=!0){o=m.value,h=!1;const x=o;u.push(x);const T=x.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=y}}catch(x){n={error:x}}finally{try{!h&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),ED(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Qj(t,e,n){const i=new vD;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const a=RL(o);Object.assign(i,a),e(i)}class Wj{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=e3(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const y=new Promise(D=>{m=D}),x=e.callbacks,T=function(){m({})},w=this.apiClient,_={onopen:T,onmessage:D=>{Qj(w,x.onmessage,D)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(D){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(D){}},E=this.webSocketFactory.create(p,Zj(u),_);E.connect(),await y;const N=Ke(this.apiClient,e.model),I=cw({model:N}),M=fh({setup:I});return E.send(JSON.stringify(M)),new Xj(E,this.apiClient)}}class Xj{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=AP(e),i=dw(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=NP(e),i=fh(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=fh({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Po.PLAY)}pause(){this.sendPlaybackControl(Po.PAUSE)}stop(){this.sendPlaybackControl(Po.STOP)}resetContext(){this.sendPlaybackControl(Po.RESET_CONTEXT)}close(){this.conn.close()}}function Zj(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function e3(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function n3(t,e,n){const i=new yD;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const a=JSON.parse(o);if(t.isVertexAI()){const u=HL(a);Object.assign(i,u)}else{const u=TL(a);Object.assign(i,u)}e(i)}class i3{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Wj(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let y;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&xw(e.config.tools)&&bw(x);const T=a3(x);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T);else{const re=this.apiClient.getApiKey();let ye="BidiGenerateContent",ce="key";re!=null&&re.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ye="BidiGenerateContentConstrained",ce="access_token"),y=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${ye}?${ce}=${re}`}let w=()=>{};const _=new Promise(re=>{w=re}),E=e.callbacks,N=function(){var re;(re=E==null?void 0:E.onopen)===null||re===void 0||re.call(E),w({})},I=this.apiClient,M={onopen:N,onmessage:re=>{n3(I,E.onmessage,re)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(re){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(re){}},D=this.webSocketFactory.create(y,r3(T),M);D.connect(),await _;let j=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const re=this.apiClient.getProject(),ye=this.apiClient.getLocation();j=`projects/${re}/locations/${ye}/`+j}let P={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[bu.AUDIO]}:e.config.responseModalities=[bu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],ee=[];for(const re of z)if(this.isCallableTool(re)){const ye=re;ee.push(await ye.tool())}else ee.push(re);ee.length>0&&(e.config.tools=ee);const Z={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=nL(this.apiClient,Z):P=wP(this.apiClient,Z),delete P.config,D.send(JSON.stringify(P)),new o3(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const s3={turnComplete:!0};class o3{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=En(n.turns),e.isVertexAI()?i=i.map(o=>Xo(o)):i=i.map(o=>Vu(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(t3)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},s3),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:oL(e)}:n={realtimeInput:EP(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function r3(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function a3(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ab=10;function Nb(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Vo(u)){o=!0;break}if(!o)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Vo(t){return"callTool"in t&&typeof t.callTool=="function"}function l3(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Vo(o)))!==null&&i!==void 0?i:!1}function u3(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>!Vo(o)))!==null&&i!==void 0?i:!1}function Mb(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c3 extends Ns{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,u,h;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!l3(n)||Nb(n.config))return await this.generateContentInternal(p);if(u3(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,y;const x=En(p.contents),T=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:Ab;let w=0;for(;w<T&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const _=m.candidates[0].content,E=[];for(const N of(h=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Vo(N)){const M=await N.callTool(m.functionCalls);E.push(...M)}w++,y={role:"user",parts:E},p.contents=En(p.contents),p.contents.push(_),p.contents.push(y),Mb(p.config)&&(x.push(_),x.push(y))}return Mb(p.config)&&(m.automaticFunctionCallingHistory=x),m},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Nb(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let h;return a?h={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},h}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Da(_s.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Vo(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&xw(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),bw(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var n,i,o;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Vo(u)){const h=u,p=await h.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,h)}}return a}async processAfcStream(e){var n,i,o;const a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Ab;let u=!1,h=0;const p=await this.initAfcToolsMap(e);return(function(m,y,x){var T,w;return Uo(this,arguments,function*(){for(var _,E,N,I;h<a;){u&&(h++,u=!1);const P=yield lt(m.processParamsMaybeAddMcpUsage(x)),z=yield lt(m.generateContentStreamInternal(P)),ee=[],Z=[];try{for(var M=!0,D=(E=void 0,pa(z)),j;j=yield lt(D.next()),_=j.done,!_;M=!0){I=j.value,M=!1;const re=I;if(yield yield lt(re),re.candidates&&(!((T=re.candidates[0])===null||T===void 0)&&T.content)){Z.push(re.candidates[0].content);for(const ye of(w=re.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(h<a&&ye.functionCall){if(!ye.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(ye.functionCall.name)){const ce=yield lt(y.get(ye.functionCall.name).callTool([ye.functionCall]));ee.push(...ce)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${ye.functionCall.name}`)}}}}catch(re){E={error:re}}finally{try{!M&&!_&&(N=D.return)&&(yield lt(N.call(D)))}finally{if(E)throw E.error}}if(ee.length>0){u=!0;const re=new Zr;re.candidates=[{content:{role:"user",parts:ee}}],yield yield lt(re);const ye=[];ye.push(...Z),ye.push({role:"user",parts:ee});const ce=En(x.contents).concat(ye);x.contents=ce}else break}})})(this,p,e)}async generateContentInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Sb(this.apiClient,e);return h=be("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=_b(y),T=new Zr;return Object.assign(T,x),T})}else{const m=Tb(this.apiClient,e);return h=be("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=wb(y),T=new Zr;return Object.assign(T,x),T})}}async generateContentStreamInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=Sb(this.apiClient,e);return h=be("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(x){return Uo(this,arguments,function*(){var T,w,_,E;try{for(var N=!0,I=pa(x),M;M=yield lt(I.next()),T=M.done,!T;N=!0){E=M.value,N=!1;const D=E,j=_b(yield lt(D.json()));j.sdkHttpResponse={headers:D.headers};const P=new Zr;Object.assign(P,j),yield yield lt(P)}}catch(D){w={error:D}}finally{try{!N&&!T&&(_=I.return)&&(yield lt(_.call(I)))}finally{if(w)throw w.error}}})})}else{const m=Tb(this.apiClient,e);return h=be("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(x){return Uo(this,arguments,function*(){var T,w,_,E;try{for(var N=!0,I=pa(x),M;M=yield lt(I.next()),T=M.done,!T;N=!0){E=M.value,N=!1;const D=E,j=wb(yield lt(D.json()));j.sdkHttpResponse={headers:D.headers};const P=new Zr;Object.assign(P,j),yield yield lt(P)}}catch(D){w={error:D}}finally{try{!N&&!T&&(_=I.return)&&(yield lt(_.call(I)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=sV(this.apiClient,e);return h=be("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=vj(y),T=new Z0;return Object.assign(T,x),T})}else{const m=gU(this.apiClient,e);return h=be("{model}:batchEmbedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=JV(y),T=new Z0;return Object.assign(T,x),T})}}async generateImagesInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=rV(this.apiClient,e);return h=be("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=xj(y),T=new eb;return Object.assign(T,x),T})}else{const m=vU(this.apiClient,e);return h=be("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=WV(y),T=new eb;return Object.assign(T,x),T})}}async editImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const h=hV(this.apiClient,e);return a=be("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),o.then(p=>{const m=bj(p),y=new uD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const h=mV(this.apiClient,e);return a=be("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),o.then(p=>{const m=Tj(p),y=new cD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const h=xV(this.apiClient,e);return a=be("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=Sj(p),y=new dD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const h=wV(this.apiClient,e);return a=be("{model}:predict",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=Cj(p),y=new fD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=_V(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>ph(y))}else{const m=xU(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>hh(y))}}async listInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=EV(this.apiClient,e);return h=be("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=Mj(y),T=new tb;return Object.assign(T,x),T})}else{const m=TU(this.apiClient,e);return h=be("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=ZV(y),T=new tb;return Object.assign(T,x),T})}}async update(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=NV(this.apiClient,e);return h=be("{model}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>ph(y))}else{const m=wU(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>hh(y))}}async delete(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=MV(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=Rj(y),T=new nb;return Object.assign(T,x),T})}else{const m=_U(this.apiClient,e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=ej(y),T=new nb;return Object.assign(T,x),T})}}async countTokens(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=kV(this.apiClient,e);return h=be("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=kj(y),T=new ib;return Object.assign(T,x),T})}else{const m=EU(this.apiClient,e);return h=be("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=tj(y),T=new ib;return Object.assign(T,x),T})}}async computeTokens(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const h=DV(this.apiClient,e);return a=be("{model}:computeTokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),o.then(p=>{const m=Dj(p),y=new hD;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=UV(this.apiClient,e);return h=be("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const x=Uj(y),T=new Tu;return Object.assign(T,x),T})}else{const m=MU(this.apiClient,e);return h=be("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>{const x=oj(y),T=new Tu;return Object.assign(T,x),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d3(t){const e={},n=c(t,["operationName"]);n!=null&&d(e,["_url","operationName"],n);const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}function f3(t){const e={},n=c(t,["operationName"]);n!=null&&d(e,["operationName"],n);const i=c(t,["resourceName"]);i!=null&&d(e,["_url","resourceName"],i);const o=c(t,["config"]);return o!=null&&d(e,["config"],o),e}function h3(t){const e={},n=c(t,["operationName"]);n!=null&&d(e,["_url","operationName"],n);const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p3 extends Ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=h3(e);return h=be("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u}else{const m=d3(e);return h=be("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const h=f3(e);return a=be("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m3(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function Tw(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],m3(n)),e}function g3(t){const e={},n=c(t,["speaker"]);n!=null&&d(e,["speaker"],n);const i=c(t,["voiceConfig"]);return i!=null&&d(e,["voiceConfig"],Tw(i)),e}function y3(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>g3(o))),d(e,["speakerVoiceConfigs"],i)}return e}function v3(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],Tw(n));const i=c(t,["multiSpeakerVoiceConfig"]);i!=null&&d(e,["multiSpeakerVoiceConfig"],y3(i));const o=c(t,["languageCode"]);return o!=null&&d(e,["languageCode"],o),e}function x3(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const i=c(t,["endOffset"]);i!=null&&d(e,["endOffset"],i);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function b3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function T3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function S3(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],x3(n));const i=c(t,["thought"]);i!=null&&d(e,["thought"],i);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],b3(o));const a=c(t,["fileData"]);a!=null&&d(e,["fileData"],T3(a));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const h=c(t,["codeExecutionResult"]);h!=null&&d(e,["codeExecutionResult"],h);const p=c(t,["executableCode"]);p!=null&&d(e,["executableCode"],p);const m=c(t,["functionCall"]);m!=null&&d(e,["functionCall"],m);const y=c(t,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const x=c(t,["text"]);return x!=null&&d(e,["text"],x),e}function w3(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>S3(a))),d(e,["parts"],o)}const i=c(t,["role"]);return i!=null&&d(e,["role"],i),e}function _3(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const h=c(t,["response"]);h!=null&&d(e,["response"],h);const p=c(t,["responseJsonSchema"]);return p!=null&&d(e,["responseJsonSchema"],p),e}function C3(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const i=c(t,["endTime"]);return i!=null&&d(e,["endTime"],i),e}function E3(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],C3(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function A3(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const i=c(t,["dynamicThreshold"]);return i!=null&&d(e,["dynamicThreshold"],i),e}function N3(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],A3(n)),e}function M3(){return{}}function R3(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function k3(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>_3(m))),d(e,["functionDeclarations"],p)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&d(e,["googleSearch"],E3(i));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],N3(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],M3());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],R3(u));const h=c(t,["codeExecution"]);return h!=null&&d(e,["codeExecution"],h),e}function D3(t){const e={},n=c(t,["handle"]);if(n!=null&&d(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Rb(){return{}}function I3(t){const e={},n=c(t,["disabled"]);n!=null&&d(e,["disabled"],n);const i=c(t,["startOfSpeechSensitivity"]);i!=null&&d(e,["startOfSpeechSensitivity"],i);const o=c(t,["endOfSpeechSensitivity"]);o!=null&&d(e,["endOfSpeechSensitivity"],o);const a=c(t,["prefixPaddingMs"]);a!=null&&d(e,["prefixPaddingMs"],a);const u=c(t,["silenceDurationMs"]);return u!=null&&d(e,["silenceDurationMs"],u),e}function P3(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&d(e,["automaticActivityDetection"],I3(n));const i=c(t,["activityHandling"]);i!=null&&d(e,["activityHandling"],i);const o=c(t,["turnCoverage"]);return o!=null&&d(e,["turnCoverage"],o),e}function L3(t){const e={},n=c(t,["targetTokens"]);return n!=null&&d(e,["targetTokens"],n),e}function U3(t){const e={},n=c(t,["triggerTokens"]);n!=null&&d(e,["triggerTokens"],n);const i=c(t,["slidingWindow"]);return i!=null&&d(e,["slidingWindow"],L3(i)),e}function V3(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&d(e,["proactiveAudio"],n),e}function j3(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig"],i);const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);const a=c(t,["temperature"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","temperature"],a);const u=c(t,["topP"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","topP"],u);const h=c(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const p=c(t,["maxOutputTokens"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","maxOutputTokens"],p);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const y=c(t,["seed"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","seed"],y);const x=c(t,["speechConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","speechConfig"],v3(lp(x)));const T=c(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],T);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],w3(Yt(w)));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let P=Qo(_);Array.isArray(P)&&(P=P.map(z=>k3(Ko(z)))),d(e,["setup","tools"],P)}const E=c(t,["sessionResumption"]);e!==void 0&&E!=null&&d(e,["setup","sessionResumption"],D3(E));const N=c(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&d(e,["setup","inputAudioTranscription"],Rb());const I=c(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],Rb());const M=c(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&d(e,["setup","realtimeInputConfig"],P3(M));const D=c(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],U3(D));const j=c(t,["proactivity"]);return e!==void 0&&j!=null&&d(e,["setup","proactivity"],V3(j)),n}function B3(t,e){const n={},i=c(e,["model"]);i!=null&&d(n,["setup","model"],Ke(t,i));const o=c(e,["config"]);return o!=null&&d(n,["config"],j3(o,n)),n}function O3(t,e,n){const i={},o=c(e,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);const a=c(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&d(n,["newSessionExpireTime"],a);const u=c(e,["uses"]);n!==void 0&&u!=null&&d(n,["uses"],u);const h=c(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&d(n,["bidiGenerateContentSetup"],B3(t,h));const p=c(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&d(n,["fieldMask"],p),i}function q3(t,e){const n={},i=c(e,["config"]);return i!=null&&d(n,["config"],O3(t,i,n)),n}function z3(t){const e={},n=c(t,["name"]);return n!=null&&d(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function H3(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=G3(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];o.length>0&&(h=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),h.length>0&&p.push(...h),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class $3 extends Ns{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=q3(this.apiClient,e);a=be("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const p=H3(h,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>z3(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F3(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}function Y3(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&d(e,["_query","filter"],a),n}function J3(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],Y3(n,e)),e}function K3(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}function Q3(t){const e={},n=c(t,["textInput"]);n!=null&&d(e,["textInput"],n);const i=c(t,["output"]);return i!=null&&d(e,["output"],i),e}function W3(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=c(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Q3(o))),d(e,["examples","examples"],i)}return e}function X3(t,e){const n={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&d(e,["displayName"],i),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(t,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);if(a!=null&&d(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&d(e,["tuningTask","hyperparameters","batchSize"],u);const h=c(t,["learningRate"]);return e!==void 0&&h!=null&&d(e,["tuningTask","hyperparameters","learningRate"],h),n}function Z3(t){const e={},n=c(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const i=c(t,["preTunedModel"]);i!=null&&d(e,["preTunedModel"],i);const o=c(t,["trainingDataset"]);o!=null&&d(e,["tuningTask","trainingData"],W3(o));const a=c(t,["config"]);return a!=null&&d(e,["config"],X3(a,e)),e}function eB(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}function tB(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const a=c(t,["filter"]);return e!==void 0&&a!=null&&d(e,["_query","filter"],a),n}function nB(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],tB(n,e)),e}function iB(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);const i=c(t,["config"]);return i!=null&&d(e,["config"],i),e}function sB(t,e){const n={},i=c(t,["gcsUri"]);e!==void 0&&i!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],i);const o=c(t,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],o),c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function oB(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&d(n,["validationDatasetUri"],i);const o=c(t,["vertexDatasetResource"]);return e!==void 0&&o!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],o),n}function rB(t,e){const n={},i=c(t,["validationDataset"]);e!==void 0&&i!=null&&d(e,["supervisedTuningSpec"],oB(i,n));const o=c(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);const a=c(t,["description"]);e!==void 0&&a!=null&&d(e,["description"],a);const u=c(t,["epochCount"]);e!==void 0&&u!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],u);const h=c(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const p=c(t,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const m=c(t,["preTunedModelCheckpointId"]);m!=null&&d(n,["preTunedModel","checkpointId"],m);const y=c(t,["adapterSize"]);if(e!==void 0&&y!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y),c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function aB(t){const e={},n=c(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const i=c(t,["preTunedModel"]);i!=null&&d(e,["preTunedModel"],i);const o=c(t,["trainingDataset"]);o!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],sB(o,e));const a=c(t,["config"]);return a!=null&&d(e,["config"],rB(a,e)),e}function lB(t){const e={},n=c(t,["name"]);n!=null&&d(e,["model"],n);const i=c(t,["name"]);return i!=null&&d(e,["endpoint"],i),e}function Sw(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["state"]);o!=null&&d(e,["state"],QS(o));const a=c(t,["createTime"]);a!=null&&d(e,["createTime"],a);const u=c(t,["tuningTask","startTime"]);u!=null&&d(e,["startTime"],u);const h=c(t,["tuningTask","completeTime"]);h!=null&&d(e,["endTime"],h);const p=c(t,["updateTime"]);p!=null&&d(e,["updateTime"],p);const m=c(t,["description"]);m!=null&&d(e,["description"],m);const y=c(t,["baseModel"]);y!=null&&d(e,["baseModel"],y);const x=c(t,["_self"]);x!=null&&d(e,["tunedModel"],lB(x));const T=c(t,["customBaseModel"]);T!=null&&d(e,["customBaseModel"],T);const w=c(t,["experiment"]);w!=null&&d(e,["experiment"],w);const _=c(t,["labels"]);_!=null&&d(e,["labels"],_);const E=c(t,["outputUri"]);E!=null&&d(e,["outputUri"],E);const N=c(t,["pipelineJob"]);N!=null&&d(e,["pipelineJob"],N);const I=c(t,["serviceAccount"]);I!=null&&d(e,["serviceAccount"],I);const M=c(t,["tunedModelDisplayName"]);return M!=null&&d(e,["tunedModelDisplayName"],M),e}function uB(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Sw(u))),d(e,["tuningJobs"],a)}return e}function cB(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const u=c(t,["error"]);return u!=null&&d(e,["error"],u),e}function dB(t){const e={},n=c(t,["checkpointId"]);n!=null&&d(e,["checkpointId"],n);const i=c(t,["epoch"]);i!=null&&d(e,["epoch"],i);const o=c(t,["step"]);o!=null&&d(e,["step"],o);const a=c(t,["endpoint"]);return a!=null&&d(e,["endpoint"],a),e}function fB(t){const e={},n=c(t,["model"]);n!=null&&d(e,["model"],n);const i=c(t,["endpoint"]);i!=null&&d(e,["endpoint"],i);const o=c(t,["checkpoints"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>dB(u))),d(e,["checkpoints"],a)}return e}function gh(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["state"]);o!=null&&d(e,["state"],QS(o));const a=c(t,["createTime"]);a!=null&&d(e,["createTime"],a);const u=c(t,["startTime"]);u!=null&&d(e,["startTime"],u);const h=c(t,["endTime"]);h!=null&&d(e,["endTime"],h);const p=c(t,["updateTime"]);p!=null&&d(e,["updateTime"],p);const m=c(t,["error"]);m!=null&&d(e,["error"],m);const y=c(t,["description"]);y!=null&&d(e,["description"],y);const x=c(t,["baseModel"]);x!=null&&d(e,["baseModel"],x);const T=c(t,["tunedModel"]);T!=null&&d(e,["tunedModel"],fB(T));const w=c(t,["preTunedModel"]);w!=null&&d(e,["preTunedModel"],w);const _=c(t,["supervisedTuningSpec"]);_!=null&&d(e,["supervisedTuningSpec"],_);const E=c(t,["tuningDataStats"]);E!=null&&d(e,["tuningDataStats"],E);const N=c(t,["encryptionSpec"]);N!=null&&d(e,["encryptionSpec"],N);const I=c(t,["partnerModelTuningSpec"]);I!=null&&d(e,["partnerModelTuningSpec"],I);const M=c(t,["customBaseModel"]);M!=null&&d(e,["customBaseModel"],M);const D=c(t,["experiment"]);D!=null&&d(e,["experiment"],D);const j=c(t,["labels"]);j!=null&&d(e,["labels"],j);const P=c(t,["outputUri"]);P!=null&&d(e,["outputUri"],P);const z=c(t,["pipelineJob"]);z!=null&&d(e,["pipelineJob"],z);const ee=c(t,["serviceAccount"]);ee!=null&&d(e,["serviceAccount"],ee);const Z=c(t,["tunedModelDisplayName"]);return Z!=null&&d(e,["tunedModelDisplayName"],Z),e}function hB(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&d(e,["nextPageToken"],i);const o=c(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>gh(u))),d(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pB extends Ns{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Da(_s.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel},o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:ah.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=eB(e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>gh(y))}else{const m=F3(e);return h=be("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>Sw(y))}}async listInternal(e){var n,i,o,a;let u,h="",p={};if(this.apiClient.isVertexAI()){const m=nB(e);return h=be("tuningJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=hB(y),T=new ob;return Object.assign(T,x),T})}else{const m=J3(e);return h=be("tunedModels",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(x=>{const T=x;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const x=uB(y),T=new ob;return Object.assign(T,x),T})}}async cancel(e){var n,i,o,a;let u="",h={};if(this.apiClient.isVertexAI()){const p=iB(e);u=be("{name}:cancel",p._url),h=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=K3(e);u=be("{name}:cancel",p._url),h=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const h=aB(e);return a=be("tuningJobs",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),o.then(p=>gh(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Z3(e);return a=be("tunedModels",h._url),u=h._query,delete h.config,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),o.then(p=>cB(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const gB=1024*1024*8,yB=3,vB=1e3,xB=2,Af="x-goog-upload-status";async function bB(t,e,n){var i,o,a;let u=0,h=0,p=new lh(new Response),m="upload";for(u=t.size;h<u;){const x=Math.min(gB,u-h),T=t.slice(h,h+x);h+x>=u&&(m+=", finalize");let w=0,_=vB;for(;w<yB&&(p=await n.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(h),"Content-Length":String(x)}}}),!(!((i=p==null?void 0:p.headers)===null||i===void 0)&&i[Af]));)w++,await SB(_),_=_*xB;if(h+=x,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[Af])!=="active")break;if(u<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(p==null?void 0:p.json());if(((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[Af])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function TB(t){return{size:t.size,type:t.type}}function SB(t){return new Promise(e=>setTimeout(e,t))}class wB{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bB(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _B{create(e,n,i){return new CB(e,n,i)}}class CB{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kb="x-goog-api-key";class EB{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(kb)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(kb,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AB="gl-node/";class NB{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=lD(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new EB(this.apiKey);this.apiClient=new Hj({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:AB+"web",uploader:new wB,downloader:new mB}),this.models=new c3(this.apiClient),this.live=new i3(this.apiClient,o,new _B),this.batches=new I2(this.apiClient),this.chats=new BI(this.models,this.apiClient),this.caches=new UI(this.apiClient),this.files=new XI(this.apiClient),this.operations=new p3(this.apiClient),this.authTokens=new $3(this.apiClient),this.tunings=new pB(this.apiClient)}}const wu="VERY IMPORTANT: Your output MUST be well-structured and easy to read. Use Markdown for formatting: headings (#, ##), bold (**text**), italics (*text*), lists (- item), and tables where appropriate (using pipes | for columns). **Crucially, ensure there is a blank line between paragraphs for better readability.** Use emojis to make the content engaging (e.g., 📚 for topics, 💡 for key ideas, ✅ for completed tasks). Do not include any HTML tags. Your tone should be that of an expert, encouraging tutor.",Db=`You are an expert tutor for ALL GOV examinations. Your responses must be accurate, detailed, and structured for easy learning. Maintain a formal and encouraging tone. When explaining concepts, break them down into simple parts. ${wu}`,MB=`You are a helpful AI assistant for a user studying for ALL GOV exams. The user will provide you with their current context (what they are looking at in the app). Use this context to provide relevant and concise help. Be friendly and supportive. ${wu}`,RB=t=>t.map(e=>({role:e.sender===Ot.USER?"user":"model",parts:[{text:e.text}]}));class vi{constructor(){const e=(typeof import.meta<"u"&&"AIzaSyBoA6F_0mXopEZ4DW_OXj1ibG56n43M3v4")??(typeof process<"u"?"AIzaSyBoA6F_0mXopEZ4DW_OXj1ibG56n43M3v4":void 0);if(!e)throw new Error("Gemini API key not found. Please set VITE_GEMINI_API_KEY in your Vite environment (e.g., .env.local) or set process.env.API_KEY.");this.ai=new NB({apiKey:e})}createChat(e,n){return this.ai.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:e},history:RB(n)})}getGeneralTutorChat(e){return this.createChat(Db,e)}getSubjectChat(e,n){const i=`You are an expert tutor for ALL GOV examinations, specializing in the subject of ${e}. Your responses must be accurate, detailed, and structured for easy learning. Use clear headings, bullet points, and provide examples where relevant. Maintain a formal and encouraging tone. When explaining concepts, break them down into simple parts. Focus strictly on ${e}. ${wu}`;return this.createChat(i,n)}getGlobalAssistantChat(e){return this.createChat(MB,e)}async explainTopic(e,n){const i=`
      Provide a detailed explanation of the following topic for an ALL GOV aspirant: "${e}".
      Tailor the explanation with the following parameters:
      - Depth/Level: ${n.depth}
      - Desired Format: ${n.format}
      ${n.focus?`- Specific Focus: ${n.focus}`:""}
      
      Structure the explanation with an introduction, key aspects, significance, and a conclusion.
    `;return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{systemInstruction:Db}})).text}async _generateQuiz(e){const n=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:_t.ARRAY,items:{type:_t.OBJECT,properties:{question:{type:_t.STRING},options:{type:_t.ARRAY,items:{type:_t.STRING}},correctAnswerIndex:{type:_t.INTEGER},explanation:{type:_t.STRING,description:"A brief explanation of the correct answer in Markdown format."}},required:["question","options","correctAnswerIndex","explanation"]}}}});try{const i=n.text.trim(),o=JSON.parse(i);if(Array.isArray(o)&&o.every(a=>"question"in a&&"options"in a&&"correctAnswerIndex"in a))return o;throw console.warn("Generated quiz data is not in the expected format.",o),new Error("Generated quiz data is not in the expected format.")}catch(i){throw console.error("Failed to parse quiz JSON:",i),new Error("Could not generate a valid quiz. The AI response was malformed.")}}async generateQuiz(e,n,i){const o=`Generate a ${n}-question multiple-choice quiz on the ALL GOV topic: "${e}". The difficulty level should be ${i}. For each question, provide 4 options, the index of the correct answer, and a brief explanation for the correct answer in Markdown format.`;return this._generateQuiz(o)}async generateSubjectQuiz(e,n,i){const o=`Generate a ${n}-question multiple-choice quiz on the ALL GOV subject: "${e}". The difficulty level should be ${i}. The questions should cover a wide range of topics within the subject. For each question, provide 4 options, the index of the correct answer, and a brief explanation for the correct answer in Markdown format.`;return this._generateQuiz(o)}async getCurrentAffairs(e){var h,p,m;const n=`
            Provide a comprehensive summary of current affairs relevant to ALL GOV examinations based on the following criteria:
            - Date: ${e.date}
            - Region: ${e.region}
            ${e.keywords?`- Keywords: ${e.keywords}`:""}
            
            Structure the summary with clear headings for different topics (e.g., Polity, Economy, International Relations) using Markdown.
            The summary should be objective, factual, and tailored for a competitive exam aspirant.
            Conclude with at least 5 key takeaways or bullet points.
        `,i=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{tools:[{googleSearch:{}}]}}),o=i.text,u=(((m=(p=(h=i.candidates)==null?void 0:h[0])==null?void 0:p.groundingMetadata)==null?void 0:m.groundingChunks)||[]).filter(y=>{var x,T;return"web"in y&&typeof((x=y.web)==null?void 0:x.uri)=="string"&&typeof((T=y.web)==null?void 0:T.title)=="string"}).map(y=>({web:{uri:y.web.uri,title:y.web.title}}));return{summary:o,sources:u}}async generateStudyPlan(e){const n=new Date().toISOString().split("T")[0],i=`
        Based on the user's request: "${e}", generate a structured study plan for an ALL GOV aspirant.
        Today's date is ${n}. All task dates MUST be in YYYY-MM-DD format, starting from today or a future date.
        For each task, provide:
        1. A concise 'title'.
        2. A specific 'date' in YYYY-MM-DD format.
        3. Detailed 'notes' in Markdown format, which should act as a mini-study guide for the task. The notes should be comprehensive enough for the user to study from. Include headings (#, ##), lists (-), and bolded (**key concepts**) in the notes.
    `,o=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{systemInstruction:`You are an expert ALL GOV study planner. ${wu}`,responseMimeType:"application/json",responseSchema:{type:_t.ARRAY,items:{type:_t.OBJECT,properties:{title:{type:_t.STRING,description:"A concise title for the study task."},date:{type:_t.STRING,description:`The date for the task in YYYY-MM-DD format. Must be today (${n}) or later.`},notes:{type:_t.STRING,description:"Detailed study notes for the task in Markdown format. Should be a comprehensive guide."}},required:["title","date","notes"]}}}});try{const a=o.text.trim(),u=JSON.parse(a);if(Array.isArray(u)&&u.every(h=>"title"in h&&"date"in h&&"notes"in h))return u;throw console.error("Generated plan is not in the expected format.",u),new Error("Generated plan data is not in the expected format.")}catch(a){throw console.error("Failed to parse study plan JSON:",a,o.text),new Error("Could not generate a valid study plan. The AI response was malformed.")}}}const kB=(t,e,n)=>{const i=t.map(o=>({role:o.sender===Ot.USER?"user":"assistant",content:o.text}));return n&&i.push({role:"user",content:n}),[{role:"system",content:e},...i]};class ww{constructor(e){if(this.apiUrl="https://api.openai.com/v1/chat/completions",!e)throw new Error("OpenAI API key is not provided");this.apiKey=e}async*sendMessageStream(e,n,i,o){var m,y,x,T;const a=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:e,messages:kB(n,i,o),stream:!0})});if(!a.ok){const w=await a.json();throw console.error("OpenAI API Error:",w),new Error(`OpenAI API request failed: ${((m=w.error)==null?void 0:m.message)||a.statusText}`)}const u=(y=a.body)==null?void 0:y.getReader();if(!u)throw new Error("Could not get reader from response body");const h=new TextDecoder;let p="";for(;;){const{done:w,value:_}=await u.read();if(w)break;p+=h.decode(_,{stream:!0});const E=p.split(`
`);p=E.pop()||"";for(const N of E)if(N.startsWith("data: ")){const I=N.substring(6);if(I==="[DONE]")return;try{const D=(T=(x=JSON.parse(I).choices[0])==null?void 0:x.delta)==null?void 0:T.content;D&&(yield D)}catch(M){console.error("Error parsing stream data:",M)}}}}}const cp=({className:t="w-6 h-6 text-white"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),wa=({className:t="w-6 h-6 text-white"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),dp=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),qt=({className:t="w-5 h-5"})=>g.jsxs("svg",{className:`animate-spin text-white ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Bu=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),fp=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),hp=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),DB=({className:t="w-5 h-5"})=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11V7a2 2 0 00-2-2H7a2 2 0 00-2 2v4m14 0a2 2 0 012 2v4a2 2 0 01-2 2H7a2 2 0 01-2-2v-4m14 0H5M19 11v2m-14-2v2"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 11h6v2H9z"})]});function pp(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Rs=pp();function _w(t){Rs=t}const Cw=/[&<>"']/,IB=new RegExp(Cw.source,"g"),Ew=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,PB=new RegExp(Ew.source,"g"),LB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ib=t=>LB[t];function cn(t,e){if(e){if(Cw.test(t))return t.replace(IB,Ib)}else if(Ew.test(t))return t.replace(PB,Ib);return t}const UB=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function VB(t){return t.replace(UB,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const jB=/(^|[^\[])\^/g;function nt(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const i={replace:(o,a)=>{let u=typeof a=="string"?a:a.source;return u=u.replace(jB,"$1"),n=n.replace(o,u),i},getRegex:()=>new RegExp(n,e)};return i}function Pb(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const ma={exec:()=>null};function Lb(t,e){const n=t.replace(/\|/g,(a,u,h)=>{let p=!1,m=u;for(;--m>=0&&h[m]==="\\";)p=!p;return p?"|":" |"}),i=n.split(/ \|/);let o=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(/\\\|/g,"|");return i}function ea(t,e,n){const i=t.length;if(i===0)return"";let o=0;for(;o<i&&t.charAt(i-o-1)===e;)o++;return t.slice(0,i-o)}function BB(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function Ub(t,e,n,i){const o=e.href,a=e.title?cn(e.title):null,u=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;const h={type:"link",raw:n,href:o,title:a,text:u,tokens:i.inlineTokens(u)};return i.state.inLink=!1,h}return{type:"image",raw:n,href:o,title:a,text:cn(u)}}function OB(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const i=n[1];return e.split(`
`).map(o=>{const a=o.match(/^\s+/);if(a===null)return o;const[u]=a;return u.length>=i.length?o.slice(i.length):o}).join(`
`)}class _u{constructor(e){rt(this,"options");rt(this,"rules");rt(this,"lexer");this.options=e||Rs}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:ea(i,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],o=OB(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const o=ea(i,"#");(this.options.pedantic||!o||/ $/.test(o))&&(i=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:ea(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let i=ea(n[0],`
`).split(`
`),o="",a="";const u=[];for(;i.length>0;){let h=!1;const p=[];let m;for(m=0;m<i.length;m++)if(/^ {0,3}>/.test(i[m]))p.push(i[m]),h=!0;else if(!h)p.push(i[m]);else break;i=i.slice(m);const y=p.join(`
`),x=y.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");o=o?`${o}
${y}`:y,a=a?`${a}
${x}`:x;const T=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(x,u,!0),this.lexer.state.top=T,i.length===0)break;const w=u[u.length-1];if((w==null?void 0:w.type)==="code")break;if((w==null?void 0:w.type)==="blockquote"){const _=w,E=_.raw+`
`+i.join(`
`),N=this.blockquote(E);u[u.length-1]=N,o=o.substring(0,o.length-_.raw.length)+N.raw,a=a.substring(0,a.length-_.text.length)+N.text;break}else if((w==null?void 0:w.type)==="list"){const _=w,E=_.raw+`
`+i.join(`
`),N=this.list(E);u[u.length-1]=N,o=o.substring(0,o.length-w.raw.length)+N.raw,a=a.substring(0,a.length-_.raw.length)+N.raw,i=E.substring(u[u.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:u,text:a}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i=n[1].trim();const o=i.length>1,a={type:"list",raw:"",ordered:o,start:o?+i.slice(0,-1):"",loose:!1,items:[]};i=o?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=o?i:"[*+-]");const u=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let h=!1;for(;e;){let p=!1,m="",y="";if(!(n=u.exec(e))||this.rules.block.hr.test(e))break;m=n[0],e=e.substring(m.length);let x=n[2].split(`
`,1)[0].replace(/^\t+/,I=>" ".repeat(3*I.length)),T=e.split(`
`,1)[0],w=!x.trim(),_=0;if(this.options.pedantic?(_=2,y=x.trimStart()):w?_=n[1].length+1:(_=n[2].search(/[^ ]/),_=_>4?1:_,y=x.slice(_),_+=n[1].length),w&&/^ *$/.test(T)&&(m+=T+`
`,e=e.substring(T.length+1),p=!0),!p){const I=new RegExp(`^ {0,${Math.min(3,_-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),M=new RegExp(`^ {0,${Math.min(3,_-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),D=new RegExp(`^ {0,${Math.min(3,_-1)}}(?:\`\`\`|~~~)`),j=new RegExp(`^ {0,${Math.min(3,_-1)}}#`);for(;e;){const P=e.split(`
`,1)[0];if(T=P,this.options.pedantic&&(T=T.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),D.test(T)||j.test(T)||I.test(T)||M.test(e))break;if(T.search(/[^ ]/)>=_||!T.trim())y+=`
`+T.slice(_);else{if(w||x.search(/[^ ]/)>=4||D.test(x)||j.test(x)||M.test(x))break;y+=`
`+T}!w&&!T.trim()&&(w=!0),m+=P+`
`,e=e.substring(P.length+1),x=T.slice(_)}}a.loose||(h?a.loose=!0:/\n *\n *$/.test(m)&&(h=!0));let E=null,N;this.options.gfm&&(E=/^\[[ xX]\] /.exec(y),E&&(N=E[0]!=="[ ] ",y=y.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:m,task:!!E,checked:N,loose:!1,text:y,tokens:[]}),a.raw+=m}a.items[a.items.length-1].raw=a.items[a.items.length-1].raw.trimEnd(),a.items[a.items.length-1].text=a.items[a.items.length-1].text.trimEnd(),a.raw=a.raw.trimEnd();for(let p=0;p<a.items.length;p++)if(this.lexer.state.top=!1,a.items[p].tokens=this.lexer.blockTokens(a.items[p].text,[]),!a.loose){const m=a.items[p].tokens.filter(x=>x.type==="space"),y=m.length>0&&m.some(x=>/\n.*\n/.test(x.raw));a.loose=y}if(a.loose)for(let p=0;p<a.items.length;p++)a.items[p].loose=!0;return a}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:o,title:a}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const i=Lb(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),a=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],u={type:"table",raw:n[0],header:[],align:[],rows:[]};if(i.length===o.length){for(const h of o)/^ *-+: *$/.test(h)?u.align.push("right"):/^ *:-+: *$/.test(h)?u.align.push("center"):/^ *:-+ *$/.test(h)?u.align.push("left"):u.align.push(null);for(let h=0;h<i.length;h++)u.header.push({text:i[h],tokens:this.lexer.inline(i[h]),header:!0,align:u.align[h]});for(const h of a)u.rows.push(Lb(h,u.header.length).map((p,m)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:u.align[m]})));return u}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:cn(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const u=ea(i.slice(0,-1),"\\");if((i.length-u.length)%2===0)return}else{const u=BB(n[2],"()");if(u>-1){const p=(n[0].indexOf("!")===0?5:4)+n[1].length+u;n[2]=n[2].substring(0,u),n[0]=n[0].substring(0,p).trim(),n[3]=""}}let o=n[2],a="";if(this.options.pedantic){const u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);u&&(o=u[1],a=u[3])}else a=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(i)?o=o.slice(1):o=o.slice(1,-1)),Ub(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const o=(i[2]||i[1]).replace(/\s+/g," "),a=n[o.toLowerCase()];if(!a){const u=i[0].charAt(0);return{type:"text",raw:u,text:u}}return Ub(i,a,i[0],this.lexer)}}emStrong(e,n,i=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!o||o[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const u=[...o[0]].length-1;let h,p,m=u,y=0;const x=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(x.lastIndex=0,n=n.slice(-1*e.length+u);(o=x.exec(n))!=null;){if(h=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!h)continue;if(p=[...h].length,o[3]||o[4]){m+=p;continue}else if((o[5]||o[6])&&u%3&&!((u+p)%3)){y+=p;continue}if(m-=p,m>0)continue;p=Math.min(p,p+m+y);const T=[...o[0]][0].length,w=e.slice(0,u+o.index+T+p);if(Math.min(u,p)%2){const E=w.slice(1,-1);return{type:"em",raw:w,text:E,tokens:this.lexer.inlineTokens(E)}}const _=w.slice(2,-2);return{type:"strong",raw:w,text:_,tokens:this.lexer.inlineTokens(_)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const o=/[^ ]/.test(i),a=/^ /.test(i)&&/ $/.test(i);return o&&a&&(i=i.substring(1,i.length-1)),i=cn(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let i,o;return n[2]==="@"?(i=cn(n[1]),o="mailto:"+i):(i=cn(n[1]),o=i),{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(e){var i;let n;if(n=this.rules.inline.url.exec(e)){let o,a;if(n[2]==="@")o=cn(n[0]),a="mailto:"+o;else{let u;do u=n[0],n[0]=((i=this.rules.inline._backpedal.exec(n[0]))==null?void 0:i[0])??"";while(u!==n[0]);o=cn(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:o,href:a,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=n[0]:i=cn(n[0]),{type:"text",raw:n[0],text:i}}}}const qB=/^(?: *(?:\n|$))+/,zB=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,GB=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ia=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,HB=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Aw=/(?:[*+-]|\d{1,9}[.)])/,Nw=nt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Aw).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),mp=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$B=/^[^\n]+/,gp=/(?!\s*\])(?:\\.|[^\[\]\\])+/,FB=nt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",gp).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),YB=nt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Aw).getRegex(),Ou="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",yp=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,JB=nt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",yp).replace("tag",Ou).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Mw=nt(mp).replace("hr",Ia).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ou).getRegex(),KB=nt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Mw).getRegex(),vp={blockquote:KB,code:zB,def:FB,fences:GB,heading:HB,hr:Ia,html:JB,lheading:Nw,list:YB,newline:qB,paragraph:Mw,table:ma,text:$B},Vb=nt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ia).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ou).getRegex(),QB={...vp,table:Vb,paragraph:nt(mp).replace("hr",Ia).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Vb).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ou).getRegex()},WB={...vp,html:nt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",yp).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ma,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:nt(mp).replace("hr",Ia).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Nw).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Rw=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,XB=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,kw=/^( {2,}|\\)\n(?!\s*$)/,ZB=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pa="\\p{P}\\p{S}",eO=nt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Pa).getRegex(),tO=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,nO=nt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Pa).getRegex(),iO=nt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Pa).getRegex(),sO=nt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Pa).getRegex(),oO=nt(/\\([punct])/,"gu").replace(/punct/g,Pa).getRegex(),rO=nt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),aO=nt(yp).replace("(?:-->|$)","-->").getRegex(),lO=nt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",aO).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Cu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,uO=nt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Cu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Dw=nt(/^!?\[(label)\]\[(ref)\]/).replace("label",Cu).replace("ref",gp).getRegex(),Iw=nt(/^!?\[(ref)\](?:\[\])?/).replace("ref",gp).getRegex(),cO=nt("reflink|nolink(?!\\()","g").replace("reflink",Dw).replace("nolink",Iw).getRegex(),xp={_backpedal:ma,anyPunctuation:oO,autolink:rO,blockSkip:tO,br:kw,code:XB,del:ma,emStrongLDelim:nO,emStrongRDelimAst:iO,emStrongRDelimUnd:sO,escape:Rw,link:uO,nolink:Iw,punctuation:eO,reflink:Dw,reflinkSearch:cO,tag:lO,text:ZB,url:ma},dO={...xp,link:nt(/^!?\[(label)\]\((.*?)\)/).replace("label",Cu).getRegex(),reflink:nt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Cu).getRegex()},yh={...xp,escape:nt(Rw).replace("])","~|])").getRegex(),url:nt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},fO={...yh,br:nt(kw).replace("{2,}","*").getRegex(),text:nt(yh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},su={normal:vp,gfm:QB,pedantic:WB},ta={normal:xp,gfm:yh,breaks:fO,pedantic:dO};class qn{constructor(e){rt(this,"tokens");rt(this,"options");rt(this,"state");rt(this,"tokenizer");rt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Rs,this.options.tokenizer=this.options.tokenizer||new _u,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:su.normal,inline:ta.normal};this.options.pedantic?(n.block=su.pedantic,n.inline=ta.pedantic):this.options.gfm&&(n.block=su.gfm,this.options.breaks?n.inline=ta.breaks:n.inline=ta.gfm),this.tokenizer.rules=n}static get rules(){return{block:su,inline:ta}}static lex(e,n){return new qn(n).lex(e)}static lexInline(e,n){return new qn(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(h,p,m)=>p+"    ".repeat(m.length));let o,a,u;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(h=>(o=h.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))){if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length),o.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length),a=n[n.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+o.raw,a.text+=`
`+o.text,this.inlineQueue[this.inlineQueue.length-1].src=a.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length),a=n[n.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+o.raw,a.text+=`
`+o.raw,this.inlineQueue[this.inlineQueue.length-1].src=a.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(u=e,this.options.extensions&&this.options.extensions.startBlock){let h=1/0;const p=e.slice(1);let m;this.options.extensions.startBlock.forEach(y=>{m=y.call({lexer:this},p),typeof m=="number"&&m>=0&&(h=Math.min(h,m))}),h<1/0&&h>=0&&(u=e.substring(0,h+1))}if(this.state.top&&(o=this.tokenizer.paragraph(u))){a=n[n.length-1],i&&(a==null?void 0:a.type)==="paragraph"?(a.raw+=`
`+o.raw,a.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):n.push(o),i=u.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length),a=n[n.length-1],a&&a.type==="text"?(a.raw+=`
`+o.raw,a.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):n.push(o);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,o,a,u=e,h,p,m;if(this.tokens.links){const y=Object.keys(this.tokens.links);if(y.length>0)for(;(h=this.tokenizer.rules.inline.reflinkSearch.exec(u))!=null;)y.includes(h[0].slice(h[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,h.index)+"["+"a".repeat(h[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(h=this.tokenizer.rules.inline.blockSkip.exec(u))!=null;)u=u.slice(0,h.index)+"["+"a".repeat(h[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(h=this.tokenizer.rules.inline.anyPunctuation.exec(u))!=null;)u=u.slice(0,h.index)+"++"+u.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(p||(m=""),p=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(y=>(i=y.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),o=n[n.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),o=n[n.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,u,m)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),n.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let y=1/0;const x=e.slice(1);let T;this.options.extensions.startInline.forEach(w=>{T=w.call({lexer:this},x),typeof T=="number"&&T>=0&&(y=Math.min(y,T))}),y<1/0&&y>=0&&(a=e.substring(0,y+1))}if(i=this.tokenizer.inlineText(a)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(m=i.raw.slice(-1)),p=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(e){const y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return n}}class Eu{constructor(e){rt(this,"options");rt(this,"parser");this.options=e||Rs}space(e){return""}code({text:e,lang:n,escaped:i}){var u;const o=(u=(n||"").match(/^\S*/))==null?void 0:u[0],a=e.replace(/\n$/,"")+`
`;return o?'<pre><code class="language-'+cn(o)+'">'+(i?a:cn(a,!0))+`</code></pre>
`:"<pre><code>"+(i?a:cn(a,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,i=e.start;let o="";for(let h=0;h<e.items.length;h++){const p=e.items[h];o+=this.listitem(p)}const a=n?"ol":"ul",u=n&&i!==1?' start="'+i+'"':"";return"<"+a+u+`>
`+o+"</"+a+`>
`}listitem(e){let n="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",i="";for(let a=0;a<e.header.length;a++)i+=this.tablecell(e.header[a]);n+=this.tablerow({text:i});let o="";for(let a=0;a<e.rows.length;a++){const u=e.rows[a];i="";for(let h=0;h<u.length;h++)i+=this.tablecell(u[h]);o+=this.tablerow({text:i})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+o+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+n+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:i}){const o=this.parser.parseInline(i),a=Pb(e);if(a===null)return o;e=a;let u='<a href="'+e+'"';return n&&(u+=' title="'+n+'"'),u+=">"+o+"</a>",u}image({href:e,title:n,text:i}){const o=Pb(e);if(o===null)return i;e=o;let a=`<img src="${e}" alt="${i}"`;return n&&(a+=` title="${n}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class bp{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class zn{constructor(e){rt(this,"options");rt(this,"renderer");rt(this,"textRenderer");this.options=e||Rs,this.options.renderer=this.options.renderer||new Eu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new bp}static parse(e,n){return new zn(n).parse(e)}static parseInline(e,n){return new zn(n).parseInline(e)}parse(e,n=!0){let i="";for(let o=0;o<e.length;o++){const a=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const h=a,p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){i+=p||"";continue}}const u=a;switch(u.type){case"space":{i+=this.renderer.space(u);continue}case"hr":{i+=this.renderer.hr(u);continue}case"heading":{i+=this.renderer.heading(u);continue}case"code":{i+=this.renderer.code(u);continue}case"table":{i+=this.renderer.table(u);continue}case"blockquote":{i+=this.renderer.blockquote(u);continue}case"list":{i+=this.renderer.list(u);continue}case"html":{i+=this.renderer.html(u);continue}case"paragraph":{i+=this.renderer.paragraph(u);continue}case"text":{let h=u,p=this.renderer.text(h);for(;o+1<e.length&&e[o+1].type==="text";)h=e[++o],p+=`
`+this.renderer.text(h);n?i+=this.renderer.paragraph({type:"paragraph",raw:p,text:p,tokens:[{type:"text",raw:p,text:p}]}):i+=p;continue}default:{const h='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return i}parseInline(e,n){n=n||this.renderer;let i="";for(let o=0;o<e.length;o++){const a=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const h=this.options.extensions.renderers[a.type].call({parser:this},a);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=h||"";continue}}const u=a;switch(u.type){case"escape":{i+=n.text(u);break}case"html":{i+=n.html(u);break}case"link":{i+=n.link(u);break}case"image":{i+=n.image(u);break}case"strong":{i+=n.strong(u);break}case"em":{i+=n.em(u);break}case"codespan":{i+=n.codespan(u);break}case"br":{i+=n.br(u);break}case"del":{i+=n.del(u);break}case"text":{i+=n.text(u);break}default:{const h='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return i}}class ga{constructor(e){rt(this,"options");this.options=e||Rs}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}rt(ga,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var gi,Pw,vh,Lw;class hO{constructor(...e){fv(this,gi);rt(this,"defaults",pp());rt(this,"options",this.setOptions);rt(this,"parse",Kr(this,gi,vh).call(this,qn.lex,zn.parse));rt(this,"parseInline",Kr(this,gi,vh).call(this,qn.lexInline,zn.parseInline));rt(this,"Parser",zn);rt(this,"Renderer",Eu);rt(this,"TextRenderer",bp);rt(this,"Lexer",qn);rt(this,"Tokenizer",_u);rt(this,"Hooks",ga);this.use(...e)}walkTokens(e,n){var o,a;let i=[];for(const u of e)switch(i=i.concat(n.call(this,u)),u.type){case"table":{const h=u;for(const p of h.header)i=i.concat(this.walkTokens(p.tokens,n));for(const p of h.rows)for(const m of p)i=i.concat(this.walkTokens(m.tokens,n));break}case"list":{const h=u;i=i.concat(this.walkTokens(h.items,n));break}default:{const h=u;(a=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&a[h.type]?this.defaults.extensions.childTokens[h.type].forEach(p=>{const m=h[p].flat(1/0);i=i.concat(this.walkTokens(m,n))}):h.tokens&&(i=i.concat(this.walkTokens(h.tokens,n)))}}return i}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const o={...i};if(o.async=this.defaults.async||o.async||!1,i.extensions&&(i.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const u=n.renderers[a.name];u?n.renderers[a.name]=function(...h){let p=a.renderer.apply(this,h);return p===!1&&(p=u.apply(this,h)),p}:n.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const u=n[a.level];u?u.unshift(a.tokenizer):n[a.level]=[a.tokenizer],a.start&&(a.level==="block"?n.startBlock?n.startBlock.push(a.start):n.startBlock=[a.start]:a.level==="inline"&&(n.startInline?n.startInline.push(a.start):n.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(n.childTokens[a.name]=a.childTokens)}),o.extensions=n),i.renderer){const a=this.defaults.renderer||new Eu(this.defaults);for(const u in i.renderer){if(!(u in a))throw new Error(`renderer '${u}' does not exist`);if(["options","parser"].includes(u))continue;const h=u;let p=i.renderer[h];i.useNewRenderer||(p=Kr(this,gi,Pw).call(this,p,h,a));const m=a[h];a[h]=(...y)=>{let x=p.apply(a,y);return x===!1&&(x=m.apply(a,y)),x||""}}o.renderer=a}if(i.tokenizer){const a=this.defaults.tokenizer||new _u(this.defaults);for(const u in i.tokenizer){if(!(u in a))throw new Error(`tokenizer '${u}' does not exist`);if(["options","rules","lexer"].includes(u))continue;const h=u,p=i.tokenizer[h],m=a[h];a[h]=(...y)=>{let x=p.apply(a,y);return x===!1&&(x=m.apply(a,y)),x}}o.tokenizer=a}if(i.hooks){const a=this.defaults.hooks||new ga;for(const u in i.hooks){if(!(u in a))throw new Error(`hook '${u}' does not exist`);if(u==="options")continue;const h=u,p=i.hooks[h],m=a[h];ga.passThroughHooks.has(u)?a[h]=y=>{if(this.defaults.async)return Promise.resolve(p.call(a,y)).then(T=>m.call(a,T));const x=p.call(a,y);return m.call(a,x)}:a[h]=(...y)=>{let x=p.apply(a,y);return x===!1&&(x=m.apply(a,y)),x}}o.hooks=a}if(i.walkTokens){const a=this.defaults.walkTokens,u=i.walkTokens;o.walkTokens=function(h){let p=[];return p.push(u.call(this,h)),a&&(p=p.concat(a.call(this,h))),p}}this.defaults={...this.defaults,...o}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return qn.lex(e,n??this.defaults)}parser(e,n){return zn.parse(e,n??this.defaults)}}gi=new WeakSet,Pw=function(e,n,i){switch(n){case"heading":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,i.parser.parseInline(o.tokens),o.depth,VB(i.parser.parseInline(o.tokens,i.parser.textRenderer)))};case"code":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text,o.lang,!!o.escaped)};case"table":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);let a="",u="";for(let p=0;p<o.header.length;p++)u+=this.tablecell({text:o.header[p].text,tokens:o.header[p].tokens,header:!0,align:o.align[p]});a+=this.tablerow({text:u});let h="";for(let p=0;p<o.rows.length;p++){const m=o.rows[p];u="";for(let y=0;y<m.length;y++)u+=this.tablecell({text:m[y].text,tokens:m[y].tokens,header:!1,align:o.align[y]});h+=this.tablerow({text:u})}return e.call(this,a,h)};case"blockquote":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);const a=this.parser.parse(o.tokens);return e.call(this,a)};case"list":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);const a=o.ordered,u=o.start,h=o.loose;let p="";for(let m=0;m<o.items.length;m++){const y=o.items[m],x=y.checked,T=y.task;let w="";if(y.task){const _=this.checkbox({checked:!!x});h?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=_+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=_+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:_+" "}):w+=_+" "}w+=this.parser.parse(y.tokens,h),p+=this.listitem({type:"list_item",raw:w,text:w,task:T,checked:!!x,loose:h,tokens:y.tokens})}return e.call(this,p,a,u)};case"html":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text,o.block)};case"paragraph":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"escape":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)};case"link":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.href,o.title,this.parser.parseInline(o.tokens))};case"image":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.href,o.title,o.text)};case"strong":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"em":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"codespan":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)};case"del":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"text":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)}}return e},vh=function(e,n){return(i,o)=>{const a={...o},u={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(u.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),u.async=!0);const h=Kr(this,gi,Lw).call(this,!!u.silent,!!u.async);if(typeof i>"u"||i===null)return h(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return h(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(u.hooks&&(u.hooks.options=u),u.async)return Promise.resolve(u.hooks?u.hooks.preprocess(i):i).then(p=>e(p,u)).then(p=>u.hooks?u.hooks.processAllTokens(p):p).then(p=>u.walkTokens?Promise.all(this.walkTokens(p,u.walkTokens)).then(()=>p):p).then(p=>n(p,u)).then(p=>u.hooks?u.hooks.postprocess(p):p).catch(h);try{u.hooks&&(i=u.hooks.preprocess(i));let p=e(i,u);u.hooks&&(p=u.hooks.processAllTokens(p)),u.walkTokens&&this.walkTokens(p,u.walkTokens);let m=n(p,u);return u.hooks&&(m=u.hooks.postprocess(m)),m}catch(p){return h(p)}}},Lw=function(e,n){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const o="<p>An error occurred:</p><pre>"+cn(i.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(i);throw i}};const Cs=new hO;function Xe(t,e){return Cs.parse(t,e)}Xe.options=Xe.setOptions=function(t){return Cs.setOptions(t),Xe.defaults=Cs.defaults,_w(Xe.defaults),Xe};Xe.getDefaults=pp;Xe.defaults=Rs;Xe.use=function(...t){return Cs.use(...t),Xe.defaults=Cs.defaults,_w(Xe.defaults),Xe};Xe.walkTokens=function(t,e){return Cs.walkTokens(t,e)};Xe.parseInline=Cs.parseInline;Xe.Parser=zn;Xe.parser=zn.parse;Xe.Renderer=Eu;Xe.TextRenderer=bp;Xe.Lexer=qn;Xe.lexer=qn.lex;Xe.Tokenizer=_u;Xe.Hooks=ga;Xe.parse=Xe;Xe.options;Xe.setOptions;Xe.use;Xe.walkTokens;Xe.parseInline;zn.parse;qn.lex;const pO=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),mO=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),$n=({content:t,className:e=""})=>{const[n,i]=Th.useState(!1),o=A.useMemo(()=>Xe.parse(t||""),[t]),a=A.useCallback(()=>{navigator.clipboard.writeText(t).then(()=>{i(!0),setTimeout(()=>i(!1),2e3)})},[t]);return g.jsxs("div",{className:"relative group pb-8",children:[g.jsx("div",{className:`prose prose-invert max-w-none prose-p:my-2 prose-strong:text-slate-100 prose-h2:text-[rgb(var(--color-accent))] ${e}`,dangerouslySetInnerHTML:{__html:o}}),g.jsx("div",{className:"absolute bottom-0 right-0",children:g.jsx("button",{onClick:a,className:"p-1.5 bg-[rgb(var(--color-card))] border border-[rgb(var(--color-border))] rounded-md text-[rgb(var(--color-text-secondary))] opacity-0 group-hover:opacity-100 transition-all hover:text-white hover:border-[rgb(var(--color-primary))]","aria-label":"Copy to clipboard",children:n?g.jsx(mO,{className:"w-4 h-4 text-green-400"}):g.jsx(pO,{className:"w-4 h-4"})})})]})},Go=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),Ho=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),jb="easyway-tutor-chat-sessions",Bb=()=>{const[t,e]=A.useState([]),[n,i]=A.useState(null),[o,a]=A.useState(""),[u,h]=A.useState(!1),[p,m]=A.useState(null),[y,x]=A.useState(""),[T,w]=A.useState(!1),{apiKeys:_}=Fn(),E=A.useMemo(()=>new vi,[]),N=A.useMemo(()=>_.openai?new ww(_.openai):null,[_.openai]),I=A.useRef(null);A.useEffect(()=>{try{const Y=localStorage.getItem(jb),de=Y?JSON.parse(Y):[];e(de),de.length>0?i(de[0].id):z()}catch(Y){console.error("Failed to load chat sessions:",Y),z()}},[]),A.useEffect(()=>{try{localStorage.setItem(jb,JSON.stringify(t))}catch(Y){console.error("Failed to save chat sessions:",Y)}},[t]);const M=t.find(Y=>Y.id===n),D=()=>{var Y;(Y=I.current)==null||Y.scrollIntoView({behavior:"smooth"})};A.useEffect(D,[M==null?void 0:M.messages]);const j=(Y,de)=>{e(oe=>oe.map(U=>U.id===Y?de(U):U))},P=Y=>{n&&j(n,de=>({...de,messages:Y(de.messages)}))},z=A.useCallback(()=>{const Y={id:`session-${Date.now()}`,name:`New Chat ${t.length+1}`,messages:[],createdAt:Date.now(),model:"gemini-2.5-flash"};e(de=>[Y,...de]),i(Y.id)},[t.length]),ee=A.useCallback(async()=>{if(o.trim()===""||u||!M)return;const Y=M.model;if(Y.startsWith("gpt")&&!N){alert("OpenAI API key is not set. Please add it in settings.");return}const de={sender:Ot.USER,text:o},oe=o;a(""),P(U=>[...U,de]),h(!0),P(U=>[...U,{sender:Ot.AI,text:""}]);try{let U;Y.startsWith("gpt")?U=N.sendMessageStream(Y,M.messages,"You are an expert tutor for ALL GOV examinations."):U=await E.getGeneralTutorChat(M.messages).sendMessageStream({message:oe});for await(const G of U){const fe=typeof G=="string"?G:G.text;P(ge=>{const R=ge[ge.length-1],K=[...ge];return K[ge.length-1]={...R,text:R.text+fe},K})}}catch(U){console.error("Error streaming response:",U),P(G=>{const fe=G[G.length-1],ge=[...G];return ge[G.length-1]={...fe,text:"Sorry, I encountered an error. Please check your API key and try again."},ge})}finally{h(!1)}},[o,u,M,E,N]),Z=Y=>{if(e(de=>de.filter(oe=>oe.id!==Y)),n===Y){const de=t.filter(oe=>oe.id!==Y);i(de.length>0?de[0].id:null)}},re=Y=>{m(Y.id),x(Y.name)},ye=()=>{p&&j(p,Y=>({...Y,name:y})),m(null)},ce=Y=>{if(n){const de=Y.target.value;j(n,oe=>({...oe,model:de}))}},ie=({message:Y})=>{const de=Y.sender===Ot.USER,oe=Y.sender===Ot.AI&&Y.text===""&&u;return g.jsxs(Fe.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:400,damping:25},className:`flex items-start gap-3 my-4 ${de?"flex-row-reverse":""}`,children:[g.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${de?"bg-gradient-to-br from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))]":"bg-[rgb(var(--color-input))]"}`,children:de?g.jsx(cp,{}):g.jsx(wa,{})}),g.jsx("div",{className:`p-4 rounded-xl max-w-2xl ${de?"bg-gradient-to-br from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] animated-gradient-bg text-white":"bg-[rgb(var(--color-input))] text-[rgb(var(--color-text-primary))]"}`,children:oe?g.jsx(qt,{}):de?g.jsx("div",{className:"whitespace-pre-wrap",children:Y.text}):g.jsx($n,{content:Y.text})})]})};return g.jsxs("div",{className:"flex h-full bg-transparent",children:[g.jsxs("div",{className:`bg-[rgba(var(--color-card),0.5)] border-r border-[rgb(var(--color-border))] flex flex-col transition-all duration-300 ease-in-out ${T?"w-16":"w-72"}`,children:[g.jsxs("div",{className:`p-2 flex-1 overflow-hidden ${T?"flex flex-col items-center":""}`,children:[g.jsx("div",{className:`flex items-center mb-4 ${T?"flex-col gap-4":"justify-between"}`,children:g.jsxs("button",{onClick:z,className:`flex items-center justify-center gap-2 p-2 text-white rounded-md hover:opacity-90 transition-opacity w-full ${T?"":"bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] animated-gradient-bg"}`,title:"New Chat",children:[g.jsx(Bu,{}),!T&&g.jsx("span",{className:"flex-1",children:"New Chat"})]})}),!T&&g.jsx("div",{className:"flex-1 overflow-y-auto",children:t.map(Y=>g.jsx("div",{className:`p-2 rounded-md mb-2 cursor-pointer group flex justify-between items-center ${n===Y.id?"bg-[rgb(var(--color-card))] border border-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-input))]"}`,onClick:()=>i(Y.id),children:p===Y.id?g.jsx("input",{type:"text",value:y,onChange:de=>x(de.target.value),onBlur:ye,onKeyDown:de=>de.key==="Enter"&&ye(),className:"bg-[rgb(var(--color-input))] text-white p-1 rounded w-full",autoFocus:!0}):g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-sm truncate flex-1",children:Y.name}),g.jsxs("div",{className:"flex opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:de=>{de.stopPropagation(),re(Y)},className:"p-1 hover:text-white",children:g.jsx(hp,{className:"w-4 h-4"})}),g.jsx("button",{onClick:de=>{de.stopPropagation(),Z(Y.id)},className:"p-1 hover:text-red-500",children:g.jsx(fp,{className:"w-4 h-4"})})]})]})},Y.id))})]}),g.jsx("button",{onClick:()=>w(Y=>!Y),className:"p-2 flex items-center justify-center text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-input))] border-t border-[rgb(var(--color-border))]",children:T?g.jsx(Ho,{}):g.jsx(Go,{})})]}),g.jsxs("div",{className:"flex flex-col flex-1 p-6",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto pr-4",children:[!M||M.messages.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[rgb(var(--color-text-secondary))]",children:[g.jsx(Pu,{className:"w-16 h-16 mb-4"}),g.jsx("h2",{className:"text-2xl font-semibold",children:"EASYWAY AI Tutor"}),g.jsx("p",{className:"mt-2",children:"Ask me anything about the ALL GOV syllabus!"})]}):M.messages.map((Y,de)=>g.jsx(ie,{message:Y},de)),g.jsx("div",{ref:I})]}),g.jsxs("div",{className:"mt-6",children:[g.jsxs("div",{className:"flex items-center bg-[rgb(var(--color-input))] rounded-lg p-2 border border-[rgb(var(--color-border))] focus-within:ring-2 focus-within:ring-[rgb(var(--color-primary))] transition-all",children:[g.jsx("input",{type:"text",value:o,onChange:Y=>a(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&ee(),placeholder:"Type your question here...",className:"flex-1 bg-transparent border-none focus:ring-0 text-[rgb(var(--color-text-primary))] placeholder-[rgb(var(--color-text-secondary))]",disabled:u||!M}),g.jsx("button",{onClick:ee,disabled:u||o.trim()===""||!M,className:"p-2 rounded-md bg-[rgb(var(--color-primary))] text-white disabled:bg-slate-600 disabled:cursor-not-allowed hover:bg-[rgb(var(--color-primary-hover))] transition-colors","aria-label":"Send message",children:u?g.jsx(qt,{}):g.jsx(dp,{})})]}),g.jsxs("div",{className:"flex items-center justify-end mt-2 gap-2 text-xs",children:[g.jsx(DB,{className:"w-4 h-4 text-[rgb(var(--color-text-secondary))]"}),g.jsxs("select",{value:(M==null?void 0:M.model)||"gemini-2.5-flash",onChange:ce,disabled:!M||u,className:"bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-md py-1 pl-2 pr-8 text-[rgb(var(--color-text-secondary))] text-xs focus:ring-1 focus:ring-[rgb(var(--color-primary))] focus:outline-none",children:[g.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),g.jsx("option",{value:"gpt-4o",disabled:!N,children:"OpenAI GPT-4o"}),g.jsx("option",{value:"gpt-3.5-turbo",disabled:!N,children:"OpenAI GPT-3.5"})]})]})]})]})]})},Uw=({className:t="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),qu=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Nf=({children:t,speed:e=50,direction:n="left"})=>{const i=A.useRef(null),[o,a]=A.useState(0),u=Y1(),h=A.useCallback(p=>{if(p>0){const m=n==="left"?[0,-p]:[-p,0];u.start({x:m,transition:{ease:"linear",duration:p/e,repeat:1/0}})}},[u,e,n]);return A.useEffect(()=>{const p=()=>{if(i.current){const y=i.current.scrollWidth/2;a(y),h(y)}},m=setTimeout(p,100);return window.addEventListener("resize",p),()=>{clearTimeout(m),window.removeEventListener("resize",p),u.stop()}},[t,e,h]),g.jsx("div",{className:"w-full overflow-hidden cursor-grab",children:g.jsx(Fe.div,{className:"inline-flex",drag:"x",dragConstraints:{right:0,left:-o},animate:u,onHoverStart:()=>u.stop(),onHoverEnd:()=>h(o),whileTap:{cursor:"grabbing"},children:g.jsxs("div",{ref:i,className:"flex whitespace-nowrap",children:[t,t]})})})},gO="easyway-tutor-topic-explainer-sessions",Tp=["DPSP vs Fundamental Rights","Monetary Policy Committee (MPC)","Panchayati Raj System","Indus Valley Civilization","The Revolt of 1857","El Niño and La Niña","Basic Structure Doctrine","Parliamentary vs Presidential System","Goods and Services Tax (GST)","Non-Cooperation Movement","Functions of the RBI","India's Nuclear Doctrine","The Partition of India","Green Revolution in India","Major Ports of India","Climate Change and India's Role","Judicial Review in India","Anti-Defection Law","National Emergency Provisions","Make in India Initiative","Buddhism and Jainism","The Mughal Empire","India's Foreign Policy","Insolvency and Bankruptcy Code","Election Commission of India"],yO=Tp.slice(0,9),vO=Tp.slice(9,17),xO=Tp.slice(17),bO=()=>{const[t,e]=Pn(gO,[]),[n,i]=A.useState(null),{user:o,signInWithGoogle:a}=hn(),{explainerPrefillTopic:u,setExplainerPrefillTopic:h}=Fn(),[p,m]=A.useState(""),[y,x]=A.useState(null),[T,w]=A.useState(!1),[_,E]=A.useState(!1),[N,I]=A.useState({depth:"Intermediate",format:"Detailed Paragraphs",focus:""}),[M,D]=A.useState(!1),[j,P]=A.useState(null),z=A.useRef(null),[ee,Z]=A.useState(!1),[re,ye]=A.useState(!1),[ce,ie]=A.useState(!1),Y=A.useCallback(async()=>{try{const W=(n==null?void 0:n.explanation)||"";if(!W)return;await navigator.clipboard.writeText(W),alert("Copied to clipboard")}catch{alert("Copy failed")}},[n]),de=A.useCallback(()=>{const W=(n==null?void 0:n.explanation)||"";if(!W)return;const le=new Blob([W],{type:"text/markdown;charset=utf-8"}),J=URL.createObjectURL(le),B=document.createElement("a");B.href=J;const me=((n==null?void 0:n.topic)||"topic-explainer").replace(/[^a-z0-9-_]+/gi,"-").toLowerCase();B.download=`${me}.md`,document.body.appendChild(B),B.click(),B.remove(),URL.revokeObjectURL(J)},[n]),oe=A.useMemo(()=>new vi,[]);A.useEffect(()=>{u&&(m(u),x(u),i(null),E(!1),h(null))},[u,h]);const U=W=>{W.trim()!==""&&(m(W),i(null),x(W),E(!1))},G=async()=>{if(!n)return;if(!o){await a();return}const W=n.topic||"Explainer Note",le=window.prompt("Save note title:",W)||W,{error:J}=await je.from("notes").insert({user_id:o.id,title:le,content:n.explanation,source:"explainer"});alert(J?"Failed to save note: "+J.message:"Saved to Notes")},fe=()=>{x(null),w(!0)},ge=A.useCallback(async()=>{w(!1),D(!0),P(null);try{const W=await oe.explainTopic(p,N),le={id:`session-${Date.now()}`,topic:p,config:N,explanation:W,timestamp:Date.now()};e(J=>[le,...J].slice(0,20)),i(le)}catch(W){P("Failed to fetch explanation. Please check your API key and try again."),console.error(W)}finally{D(!1)}},[oe,p,N,e]),R=W=>{m(W.topic),I(W.config),i(W),x(null),w(!1),E(!1)},K=()=>{i(null),x(null),w(!1),P(null)},pe=()=>{if(M)return g.jsx("div",{children:g.jsxs("div",{className:"flex justify-center items-center gap-3",children:[g.jsx(qt,{}),g.jsxs("p",{children:['Generating explanation for "',p,'"...']})]})});if(j)return g.jsx("div",{children:g.jsx("p",{className:"text-red-400 text-center",children:j})});if(n)return g.jsx($n,{content:n.explanation});if(y)return g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold text-center mb-4",children:"Confirm Topic"}),g.jsxs("p",{className:"text-center text-[rgb(var(--color-text-secondary))] mb-6",children:['Generate an explanation for "',y,'"?']}),g.jsxs("div",{className:"flex justify-center gap-4",children:[g.jsx("button",{onClick:()=>x(null),className:"px-6 py-2 bg-[rgb(var(--color-input))] rounded-lg hover:bg-slate-700",children:"Cancel"}),g.jsx("button",{onClick:fe,className:"px-6 py-2 bg-[rgb(var(--color-primary))] text-white rounded-lg hover:bg-[rgb(var(--color-primary-hover))]",children:"Confirm"})]})]});if(T){const W="w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-2 text-[rgb(var(--color-text-primary))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--color-background-start))] focus-visible:ring-[rgb(var(--color-primary))]";return g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Refine Explanation"}),g.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-6",children:["Topic: ",g.jsx("span",{className:"font-bold text-slate-300",children:p})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-1",children:"Depth"}),g.jsxs("select",{value:N.depth,onChange:le=>I(J=>({...J,depth:le.target.value})),className:W,children:[g.jsx("option",{children:"Beginner"}),g.jsx("option",{children:"Intermediate"}),g.jsx("option",{children:"Expert"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-1",children:"Format"}),g.jsxs("select",{value:N.format,onChange:le=>I(J=>({...J,format:le.target.value})),className:W,children:[g.jsx("option",{children:"Detailed Paragraphs"}),g.jsx("option",{children:"Bullet Points"}),g.jsx("option",{children:"Q&A Format"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-1",children:"Specific Focus (optional)"}),g.jsx("input",{type:"text",value:N.focus,onChange:le=>I(J=>({...J,focus:le.target.value})),placeholder:"e.g., Economic Impact, Constitutional Articles",className:W})]}),g.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[g.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2 bg-[rgb(var(--color-input))] rounded-lg hover:bg-slate-700",children:"Cancel"}),g.jsx("button",{onClick:ge,className:"px-6 py-2 bg-[rgb(var(--color-primary))] text-white rounded-lg hover:bg-[rgb(var(--color-primary-hover))]",children:"Generate"})]})]})]})}return null},he=W=>g.jsx("button",{onClick:()=>U(W),disabled:M||T||!!y,className:"mx-4 px-5 py-2 whitespace-nowrap bg-[rgb(var(--color-input))] text-[rgb(var(--color-text-secondary))] rounded-full text-sm hover:bg-[rgb(var(--color-primary))] hover:text-white transition-colors disabled:bg-slate-800 disabled:text-slate-500 disabled:cursor-not-allowed",children:W},W),ae=M||!!j||!!n||!!y||T;return g.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-start pt-16 relative",children:[g.jsxs(Fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative z-20 w-full max-w-3xl px-4 text-center",children:[g.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Topic Explainer"}),g.jsx("p",{className:"text-base text-[rgb(var(--color-text-secondary))] mb-6",children:"Dive deep into any ALL GOV topic."}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:p,onChange:W=>m(W.target.value),placeholder:"e.g., 'Indian President'",className:"w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-2.5 text-base text-[rgb(var(--color-text-primary))] placeholder-[rgb(var(--color-text-secondary))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgb(var(--color-primary))]",disabled:M||T||!!y,onKeyDown:W=>W.key==="Enter"&&U(p)}),g.jsx("button",{onClick:()=>U(p),disabled:M||p.trim()===""||T||!!y,className:"px-4 py-2.5 bg-[rgb(var(--color-primary))] text-white font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-hover))] disabled:bg-slate-600 disabled:cursor-not-allowed text-base",children:"Explain"})]})]},"main-content-area"),g.jsxs(Fe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"relative z-10 w-full mt-10 space-y-4",children:[g.jsx(Nf,{speed:40,direction:"left",children:yO.map(he)}),g.jsx(Nf,{speed:45,direction:"right",children:vO.map(he)}),g.jsx(Nf,{speed:40,direction:"left",children:xO.map(he)})]}),g.jsx("button",{onClick:()=>E(!0),className:"absolute top-6 right-6 z-30 p-3 rounded-full bg-[rgb(var(--color-card))]/50 hover:bg-[rgb(var(--color-card))] transition-colors","aria-label":"View History",children:g.jsx(Uw,{})}),g.jsx(di,{children:_&&g.jsxs(Fe.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"absolute top-0 right-0 bottom-0 w-full max-w-md bg-[rgb(var(--color-sidebar))] z-50 border-l border-[rgb(var(--color-border))] shadow-2xl flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-[rgb(var(--color-border))] flex-shrink-0",children:[g.jsx("h2",{className:"text-xl font-bold",children:"History"}),g.jsx("button",{onClick:()=>E(!1),className:"p-2 rounded-full hover:bg-[rgb(var(--color-input))]",children:g.jsx(qu,{})})]}),g.jsx("div",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:t.length>0?t.map(W=>g.jsxs("div",{onClick:()=>R(W),className:`p-3 rounded-md cursor-pointer transition-colors ${(n==null?void 0:n.id)===W.id?"bg-slate-700":"bg-slate-800 hover:bg-slate-700"}`,children:[g.jsx("p",{className:"font-semibold truncate",children:W.topic}),g.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:new Date(W.timestamp).toLocaleString()})]},W.id)):g.jsxs("div",{className:"text-center text-sm text-[rgb(var(--color-text-secondary))] pt-8",children:[g.jsx(ep,{className:"w-8 h-8 mx-auto mb-2"}),g.jsx("p",{children:"No history yet."})]})})]})}),ae&&g.jsxs("div",{className:`relative z-20 w-full ${ce?"max-w-none px-0":"max-w-4xl px-4"} mt-8`,children:[g.jsx("div",{className:`${ce?"fixed inset-0 z-40 p-4 md:p-8":""}`,children:g.jsxs("div",{className:`p-4 rounded-xl border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/70 backdrop-blur ${ce?"h-full max-h-none shadow-2xl":""}`,children:[g.jsxs("div",{className:"sticky top-0 z-10 -mx-4 px-4 py-2.5 mb-2 flex items-center justify-between border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/80 backdrop-blur rounded-t-xl",children:[g.jsx("h3",{className:"text-base font-semibold",children:"Result"}),g.jsxs("div",{className:"flex items-center gap-2",children:[n&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:Y,className:"px-3 py-1.5 text-xs rounded-md bg-[rgb(var(--color-input))] hover:bg-slate-600",children:"Copy"}),g.jsx("button",{onClick:de,className:"px-3 py-1.5 text-xs rounded-md bg-[rgb(var(--color-input))] hover:bg-slate-600",children:"Export MD"}),g.jsx("button",{onClick:G,className:"px-3 py-1.5 text-xs rounded-md bg-[rgb(var(--color-primary))] text-white",children:"Save to Notes"})]}),g.jsx("button",{onClick:()=>ie(W=>!W),className:"px-3 py-1.5 text-xs rounded-md bg-[rgb(var(--color-input))]",children:ce?"Exit Fullscreen":"Fullscreen"}),g.jsx("button",{onClick:K,className:"px-3 py-1.5 text-xs rounded-md bg-[rgb(var(--color-input))]",children:"Close"})]})]}),g.jsx("div",{ref:z,className:`${ce?"h-[calc(100%-56px)]":""} max-h-[72vh] md:max-h-[78vh] overflow-y-auto pr-2 overscroll-contain`,onScroll:W=>{const le=W.currentTarget;Z(le.scrollTop>200),ye(le.scrollHeight-le.scrollTop-le.clientHeight>200)},children:g.jsx(di,{mode:"wait",children:g.jsx(Fe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:pe()},(n==null?void 0:n.id)||(y?`confirm-${y}`:T?"form":M?"loading":"error"))})}),g.jsx("div",{className:"pointer-events-none sticky bottom-0 -mx-5 h-10 bg-gradient-to-t from-[rgb(var(--color-card))]/90 to-transparent"})]})}),ee&&g.jsx(Fe.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},whileHover:{scale:1.05},whileTap:{scale:.96},className:"fixed bottom-6 right-6 z-50 px-3 py-2 rounded-full bg-[rgb(var(--color-primary))] text-white shadow-lg",onClick:()=>{const W=z.current;W&&W.scrollTo({top:0,behavior:"smooth"})},children:"↑ Top"}),re&&g.jsx(Fe.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},whileHover:{scale:1.05},whileTap:{scale:.96},className:"fixed bottom-6 right-24 z-50 px-3 py-2 rounded-full bg-[rgb(var(--color-input))] text-white shadow-lg",onClick:()=>{const W=z.current;W&&W.scrollBy({top:300,behavior:"smooth"})},children:"↓ More"})]})]})},Je=({children:t,className:e="",...n})=>g.jsx(Fe.div,{className:`bg-[rgb(var(--color-card))] border border-[rgb(var(--color-border))] rounded-xl p-6 ${e}`,whileHover:{y:-4,transition:{type:"spring",stiffness:300}},...n,children:t}),TO=90,SO="easyway-tutor-quiz-results",wO=t=>{const e=Math.floor(t/3600).toString().padStart(2,"0"),n=Math.floor(t%3600/60).toString().padStart(2,"0"),i=(t%60).toString().padStart(2,"0");return`${e}:${n}:${i}`},_O=({score:t})=>{const e=V1(0,{stiffness:100,damping:30}),n=z1(e,i=>Math.round(i));return A.useEffect(()=>{e.set(t)},[t,e]),g.jsx(Fe.span,{children:n})},CO=()=>{const[t,e]=A.useState(""),[n,i]=A.useState(10),[o,a]=A.useState("Medium"),[u,h]=A.useState([]),[p,m]=A.useState(0),[y,x]=A.useState([]),[T,w]=A.useState(!1),[_,E]=A.useState(!1),[N,I]=A.useState(null),[M,D]=A.useState(0),[j,P]=Pn(SO,[]),[z,ee]=A.useState(!1),[Z,re]=A.useState(null),ye=A.useMemo(()=>new vi,[]),{user:ce,signInWithGoogle:ie}=hn(),Y=A.useCallback(async()=>{if(u.length===0)return;const ae=y.reduce((le,J,B)=>{var me;return J===((me=u[B])==null?void 0:me.correctAnswerIndex)?le+1:le},0),W={id:`quiz-${Date.now()}`,topicOrSubject:t,difficulty:o,score:ae,totalQuestions:u.length,timestamp:Date.now(),questions:u,userAnswers:y};P(le=>[W,...le].slice(0,50));try{if(Mt&&ce){const le=Math.round(ae/Math.max(1,u.length)*100),{data:J,error:B}=await je.from("tests").insert({user_id:ce.id,subject:t||"General",topic:t||null,score:le}).select("id").single();if(B)throw B;const me=J==null?void 0:J.id;if(me){const Le=u.map((se,ke)=>({test_id:me,user_id:ce.id,subject:t||"General",topic:t||null,question:se.question,chosen_index:y[ke],correct_index:se.correctAnswerIndex,is_correct:y[ke]===se.correctAnswerIndex}));await je.from("test_attempts").insert(Le)}}}catch(le){console.warn("Failed to persist quiz result to Supabase",le)}},[u,y,t,o,P,ce]),de=A.useCallback(async()=>{if(w(!0),!ce&&Mt)try{await ie()}catch{}await Y()},[Y,ce,ie]);A.useEffect(()=>{if(u.length>0&&!T){const ae=setInterval(()=>{D(W=>W<=1?(clearInterval(ae),de(),0):W-1)},1e3);return()=>clearInterval(ae)}},[u.length,T,de]);const oe=A.useCallback(async()=>{if(t.trim()==="")return;E(!0),I(null),h([]),w(!1),x([]),m(0);const ae=n*TO;D(ae);try{const W=await ye.generateQuiz(t,n,o);h(W),x(new Array(W.length).fill(null))}catch(W){I("Failed to generate quiz. Please try again or rephrase your topic."),console.error(W)}finally{E(!1)}},[t,n,o,ye]),U=ae=>{const W=[...y];W[p]=ae,x(W)},G=()=>{p<u.length-1?m(ae=>ae+1):de()},fe=()=>{e(""),h([]),w(!1),re(null)},ge=ae=>{re(ae),ee(!1)},R=Z?Z.score:y.reduce((ae,W,le)=>{var J;return W===((J=u[le])==null?void 0:J.correctAnswerIndex)?ae+1:ae},0),K=Z?Z.questions:u,pe=Z?Z.userAnswers:y,he=Z?Z.topicOrSubject:t;return T||Z?g.jsx("div",{className:"p-6 h-full overflow-y-auto",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[Z&&g.jsx("button",{onClick:()=>{re(null),ee(!0)},className:"mb-4 text-[rgb(var(--color-accent))] hover:brightness-90",children:"← Back to History"}),g.jsxs("h1",{className:"text-3xl font-bold text-[rgb(var(--color-text-primary))] mb-4",children:['Quiz Results for "',he,'"']}),g.jsx(Je,{children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-lg text-[rgb(var(--color-text-secondary))]",children:"Your Score"}),g.jsxs("p",{className:"text-6xl font-bold text-[rgb(var(--color-accent))] my-2",children:[g.jsx(_O,{score:R}),g.jsxs("span",{className:"text-3xl text-[rgb(var(--color-text-secondary))]",children:[" / ",K.length]})]}),g.jsxs("p",{className:"text-lg text-[rgb(var(--color-text-secondary))]",children:["Accuracy: ",(R/K.length*100).toFixed(2),"%"]})]})}),g.jsx("div",{className:"mt-6 space-y-4",children:K.map((ae,W)=>{const le=pe[W],J=le===ae.correctAnswerIndex;return g.jsxs(Je,{children:[g.jsxs("p",{className:"font-semibold mb-2",children:[W+1,". ",ae.question]}),g.jsx("div",{className:"space-y-2",children:ae.options.map((B,me)=>{let Le="border-[rgb(var(--color-border))] text-[rgb(var(--color-text-primary))]";return me===ae.correctAnswerIndex?Le="border-green-500 bg-green-500/20 text-green-300":me===le&&!J&&(Le="border-red-500 bg-red-500/20 text-red-300"),g.jsx("div",{className:`p-2 rounded-md border ${Le}`,children:B},me)})}),g.jsxs("p",{className:`mt-3 text-sm ${J?"text-green-400":"text-red-400"}`,children:["Your answer: ",le!==null?ae.options[le]:"Not answered",!J&&g.jsxs("span",{className:"block",children:["Correct answer: ",ae.options[ae.correctAnswerIndex]]})]}),g.jsxs("div",{className:"mt-2 text-xs text-[rgb(var(--color-text-secondary))] bg-[rgb(var(--color-input))] p-2 rounded-md",children:[g.jsx("p",{className:"font-semibold mb-1 text-slate-300",children:"Explanation:"}),g.jsx($n,{content:ae.explanation,className:"prose-sm"})]})]},W)})}),g.jsx("button",{onClick:fe,className:"mt-6 w-full px-6 py-3 bg-[rgb(var(--color-primary))] text-white font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-hover))] transition-colors",children:"Start New Quiz"})]})}):g.jsxs("div",{className:"p-6 h-full overflow-y-auto",children:[g.jsx("div",{className:"max-w-4xl mx-auto",children:u.length===0?g.jsxs(Je,{children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"space-y-6 flex-1",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"topic",className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-2",children:"Topic"}),g.jsx("input",{id:"topic",type:"text",value:t,onChange:ae=>e(ae.target.value),placeholder:"e.g., 'Fundamental Rights'",className:"w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-3 text-[rgb(var(--color-text-primary))] placeholder-[rgb(var(--color-text-secondary))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--color-background-start))] focus-visible:ring-[rgb(var(--color-primary))] transition-all duration-200",disabled:_})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"numQuestions",className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-2",children:"Number of Questions"}),g.jsxs("select",{id:"numQuestions",value:n,onChange:ae=>i(Number(ae.target.value)),disabled:_,className:"w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-3 text-[rgb(var(--color-text-primary))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--color-background-start))] focus-visible:ring-[rgb(var(--color-primary))] transition-all duration-200",children:[g.jsx("option",{value:5,children:"5"}),g.jsx("option",{value:10,children:"10"}),g.jsx("option",{value:25,children:"25"}),g.jsx("option",{value:50,children:"50"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"difficulty",className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-2",children:"Difficulty"}),g.jsxs("select",{id:"difficulty",value:o,onChange:ae=>a(ae.target.value),disabled:_,className:"w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-3 text-[rgb(var(--color-text-primary))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--color-background-start))] focus-visible:ring-[rgb(var(--color-primary))] transition-all duration-200",children:[g.jsx("option",{value:"Easy",children:"Easy"}),g.jsx("option",{value:"Medium",children:"Medium"}),g.jsx("option",{value:"Hard",children:"Hard"})]})]})]}),g.jsx("button",{onClick:oe,disabled:_||t.trim()==="",className:"w-full px-6 py-3 text-lg bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] text-white font-semibold rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity duration-200 animated-gradient-bg",children:_?g.jsx(qt,{}):"Generate Quiz"})]}),g.jsx("button",{onClick:()=>ee(!0),className:"ml-4 p-2 text-[rgb(var(--color-text-secondary))] hover:text-white transition-colors",title:"History & Stats",children:g.jsx(Uw,{})})]}),N&&g.jsx(Je,{className:"mt-4",children:g.jsx("p",{className:"text-red-400",children:N})}),_&&!N&&g.jsx(Je,{className:"mt-4",children:g.jsxs("div",{className:"flex justify-center items-center gap-3",children:[g.jsx(qt,{}),g.jsxs("p",{children:["Generating ",n," questions... This may take a moment."]})]})}),!_&&!N&&g.jsxs("div",{className:"text-center text-[rgb(var(--color-text-secondary))] py-16",children:[g.jsx(Ta,{className:"mx-auto w-12 h-12 mb-4"}),g.jsx("p",{children:"Configure your quiz above and start learning."})]})]}):g.jsxs("div",{children:[g.jsx(Je,{className:"sticky top-0 z-10 mb-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h2",{className:"text-xl font-bold text-[rgb(var(--color-accent))]",children:['Quiz on "',t,'"']}),g.jsx("div",{className:"text-lg font-mono bg-[rgb(var(--color-input))] text-[rgb(var(--color-text-primary))] px-3 py-1 rounded-md",children:wO(M)})]})}),g.jsxs(Je,{children:[g.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-2",children:["Question ",p+1,"/",u.length]}),g.jsx("p",{className:"text-lg text-[rgb(var(--color-text-primary))] mb-4 font-semibold",children:u[p].question}),g.jsx("div",{className:"space-y-3",children:u[p].options.map((ae,W)=>g.jsx("button",{onClick:()=>U(W),className:`w-full text-left p-3 rounded-lg border-2 transition-colors ${y[p]===W?"border-[rgb(var(--color-accent))] bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] animated-gradient-bg text-white":"bg-[rgb(var(--color-input))] border-[rgb(var(--color-border))] hover:border-[rgb(var(--color-accent))]"}`,children:ae},W))})]}),g.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[g.jsxs("div",{className:"text-[rgb(var(--color-text-secondary))]",children:["Question ",p+1," of ",u.length]}),g.jsx("button",{onClick:G,disabled:y[p]===null,className:"px-6 py-3 bg-[rgb(var(--color-primary))] text-white font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-hover))] disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors",children:p<u.length-1?"Next Question":"Show Results"})]})]})}),g.jsx(di,{children:z&&g.jsx(EO,{history:j,onReview:ge,onClose:()=>ee(!1)})})]})},EO=({history:t,onReview:e,onClose:n})=>{const i=A.useMemo(()=>{if(t.length===0)return null;const o=t.length,a=t.reduce((p,m)=>p+m.totalQuestions,0),u=t.reduce((p,m)=>p+m.score,0),h=a>0?u/a*100:0;return{totalQuizzes:o,avgScore:h.toFixed(2)}},[t]);return g.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-md z-40 flex items-center justify-center p-4",children:g.jsxs(Fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[rgb(var(--color-card))] w-full max-w-4xl rounded-xl border border-[rgb(var(--color-border))] shadow-2xl flex flex-col max-h-[90vh]",children:[g.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-bold",children:"Quiz History & Stats"}),g.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-[rgb(var(--color-input))]",children:g.jsx(qu,{})})]}),t.length>0&&i?g.jsxs("div",{className:"p-4 grid grid-cols-2 gap-4 border-b border-[rgb(var(--color-border))]",children:[g.jsxs("div",{className:"bg-[rgb(var(--color-input))] p-4 rounded-lg text-center",children:[g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Total Quizzes"}),g.jsx("p",{className:"text-2xl font-bold",children:i.totalQuizzes})]}),g.jsxs("div",{className:"bg-[rgb(var(--color-input))] p-4 rounded-lg text-center",children:[g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Average Score"}),g.jsxs("p",{className:"text-2xl font-bold",children:[i.avgScore,"%"]})]})]}):null,g.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:t.length>0?g.jsx("div",{className:"space-y-3",children:t.map(o=>g.jsxs("div",{className:"p-3 bg-[rgb(var(--color-input))] rounded-lg flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold truncate",children:o.topicOrSubject}),g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:new Date(o.timestamp).toLocaleString()})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("p",{className:"font-bold text-lg",children:[o.score,"/",o.totalQuestions]}),g.jsx("button",{onClick:()=>e(o),className:"px-3 py-1 bg-[rgb(var(--color-primary))] text-white text-sm rounded-md hover:bg-[rgb(var(--color-primary-hover))]",children:"Review"})]})]},o.id))}):g.jsxs("div",{className:"text-center text-[rgb(var(--color-text-secondary))] py-16",children:[g.jsx(Yf,{className:"mx-auto w-12 h-12 mb-4"}),g.jsx("p",{children:"No quiz history yet. Take a quiz to see your stats!"})]})})]})})};class AO{constructor(e){if(this.apiUrl="https://api.perplexity.ai/chat/completions",!e)throw new Error("Perplexity API key not provided.");this.apiKey=e}async getCurrentAffairs(e){var h,p,m;const n=`
            Provide a comprehensive summary of current affairs relevant to ALL GOV examinations based on the following criteria:
            - Date: ${e.date}
            - Region: ${e.region}
            ${e.keywords?`- Keywords: ${e.keywords}`:""}
            
            Structure the summary with clear headings for different topics (e.g., Polity, Economy, International Relations).
            The summary should be objective, factual, and tailored for a competitive exam aspirant.
            Format the entire output using Markdown for clear structure (headings, lists, bold text).
            Ensure there is a blank line between paragraphs for better readability.
            Conclude with at least 5 key takeaways or bullet points.
            Do not include any introductory or concluding conversational text. Just provide the summary.
        `,i=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"llama-3-sonar-large-32k-online",messages:[{role:"system",content:"You are an expert news analyst for ALL GOV exam aspirants."},{role:"user",content:n}]})});if(!i.ok){const y=await i.json();throw console.error("Perplexity API Error:",y),new Error(`Perplexity API request failed: ${((h=y.error)==null?void 0:h.message)||i.statusText}`)}return{summary:((m=(p=(await i.json()).choices[0])==null?void 0:p.message)==null?void 0:m.content)||"No summary could be generated.",sources:[]}}}const NO="easyway-tutor-current-affairs-sessions",MO=()=>{const[t,e]=Pn(NO,[]),[n,i]=A.useState(null),[o,a]=A.useState(!1),[u,h]=A.useState({date:new Date().toISOString().split("T")[0],keywords:"",region:"National"}),[p,m]=A.useState(!1),[y,x]=A.useState(null),{apiKeys:T}=Fn(),w=A.useMemo(()=>T.perplexity?new AO(T.perplexity):new vi,[T.perplexity]),_=A.useCallback(async M=>{m(!0),x(null),i(null);try{const{summary:D,sources:j}=await w.getCurrentAffairs(M),P={id:`session-${Date.now()}`,query:M,summary:D,sources:j,timestamp:Date.now()};e(z=>[P,...z].slice(0,20)),i(P)}catch(D){x("Failed to fetch current affairs. Please check your API key and try again."),console.error(D)}finally{m(!1)}},[w,e]),E=M=>{h(M.query),i(M)},N=()=>p?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[g.jsx(qt,{className:"w-12 h-12 mb-4"}),g.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))]",children:['Fetching news for "',u.keywords||u.date,'"...']})]}):y?g.jsx(Je,{children:g.jsx("p",{className:"text-red-400",children:y})}):n?g.jsxs(Je,{children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 text-[rgb(var(--color-accent))]",children:["Summary for ",new Date(n.query.date+"T12:00:00Z").toLocaleDateString()]}),g.jsx($n,{content:n.summary}),n.sources.length>0&&g.jsxs("div",{className:"mt-6 border-t border-[rgb(var(--color-border))] pt-4",children:[g.jsx("h3",{className:"font-semibold text-lg text-[rgb(var(--color-text-secondary))] mb-2",children:"Sources:"}),g.jsx("ul",{className:"list-disc list-inside space-y-2",children:n.sources.map((M,D)=>g.jsx("li",{children:g.jsx("a",{href:M.web.uri,target:"_blank",rel:"noopener noreferrer",className:"text-[rgb(var(--color-accent))] hover:underline",children:M.web.title||M.web.uri})},D))})]})]}):g.jsxs("div",{className:"text-center text-[rgb(var(--color-text-secondary))] py-16",children:[g.jsx(TS,{className:"mx-auto w-12 h-12 mb-4"}),g.jsx("p",{children:"Use the form to get the latest current affairs summary."}),!T.perplexity&&g.jsx("p",{className:"mt-4 text-yellow-400 text-sm",children:"Gemini is available by default. Add a Perplexity API key in settings for an alternative news source."})]}),I="w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-2 text-[rgb(var(--color-text-primary))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--color-background-start))] focus-visible:ring-[rgb(var(--color-primary))] transition-all duration-200";return g.jsx("div",{className:"p-6 h-full overflow-y-auto",children:g.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 relative",children:[g.jsx("button",{onClick:()=>a(M=>!M),className:"absolute -left-4 top-2 z-10 lg:hidden p-2 bg-[rgb(var(--color-card))] rounded-full border border-[rgb(var(--color-border))]",children:o?g.jsx(Ho,{}):g.jsx(Go,{})}),g.jsxs("div",{className:`lg:col-span-1 flex-col gap-6 transition-all duration-300 ${o?"hidden lg:flex":"flex"}`,children:[g.jsxs(Je,{children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h2",{className:"text-xl font-bold",children:"Search Current Affairs"}),g.jsx("button",{onClick:()=>a(M=>!M),className:"hidden lg:block p-1 text-[rgb(var(--color-text-secondary))] hover:text-white",children:g.jsx(Go,{})})]}),g.jsxs("form",{onSubmit:M=>{M.preventDefault(),_(u)},className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-1",children:"Date"}),g.jsx("input",{type:"date",id:"date",value:u.date,onChange:M=>h(D=>({...D,date:M.target.value})),className:I})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"keywords",className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-1",children:"Keywords (optional)"}),g.jsx("input",{type:"text",id:"keywords",value:u.keywords,onChange:M=>h(D=>({...D,keywords:M.target.value})),placeholder:"e.g., 'RBI monetary policy'",className:I})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"region",className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-1",children:"Region"}),g.jsxs("select",{id:"region",value:u.region,onChange:M=>h(D=>({...D,region:M.target.value})),className:I,children:[g.jsx("option",{children:"National"}),g.jsx("option",{children:"International"}),g.jsx("option",{children:"Global"})]})]}),g.jsx("button",{type:"submit",disabled:p,className:"w-full p-2 bg-[rgb(var(--color-primary))] text-white font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-hover))] disabled:bg-slate-600",children:p?g.jsx(qt,{}):"Get Summary"})]})]}),g.jsxs(Je,{className:"flex-1",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:"History"}),g.jsx("div",{className:"space-y-2 overflow-y-auto max-h-96",children:t.length>0?t.map(M=>g.jsxs("div",{onClick:()=>E(M),className:`p-2 rounded-md cursor-pointer transition-colors ${(n==null?void 0:n.id)===M.id?"bg-slate-700":"bg-slate-800 hover:bg-slate-700"}`,children:[g.jsx("p",{className:"font-semibold text-sm truncate",children:M.query.keywords||"General Summary"}),g.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:new Date(M.query.date+"T12:00:00Z").toLocaleDateString()})]},M.id)):g.jsx("p",{className:"text-sm text-center text-[rgb(var(--color-text-secondary))]",children:"No search history yet."})})]})]}),g.jsxs("div",{className:`${o?"lg:col-span-3":"lg:col-span-2"}`,children:[o&&g.jsx("button",{onClick:()=>a(!1),className:"hidden lg:block absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 z-10 p-2 bg-[rgb(var(--color-card))] rounded-full border border-[rgb(var(--color-border))]",children:g.jsx(Ho,{})}),N()]})]})})},RO=({subject:t,onBack:e})=>{const n=`easyway-tutor-subject-chat-sessions-${t.replace(/\s+/g,"-")}`,[i,o]=A.useState([]),[a,u]=A.useState(null),[h,p]=A.useState(""),[m,y]=A.useState(!1),[x,T]=A.useState(null),[w,_]=A.useState(""),[E,N]=A.useState(!1),I=A.useMemo(()=>new vi,[]),M=A.useRef(null),D=A.useCallback(()=>{const ie={id:`session-${Date.now()}`,name:`New ${t} Chat`,messages:[],createdAt:Date.now(),model:"gemini-2.5-flash"};o(Y=>[ie,...Y]),u(ie.id)},[t]);A.useEffect(()=>{try{const ie=localStorage.getItem(n),Y=ie?JSON.parse(ie):[];o(Y),Y.length>0?u(Y[0].id):setTimeout(()=>D(),0)}catch(ie){console.error(`Failed to load chat sessions for ${t}:`,ie)}},[n,D]),A.useEffect(()=>{try{localStorage.setItem(n,JSON.stringify(i))}catch(ie){console.error(`Failed to save chat sessions for ${t}:`,ie)}},[i,n]);const j=i.find(ie=>ie.id===a),P=()=>{var ie;(ie=M.current)==null||ie.scrollIntoView({behavior:"smooth"})};A.useEffect(P,[j==null?void 0:j.messages]);const z=ie=>{o(Y=>Y.map(de=>de.id===a?{...de,messages:ie(de.messages)}:de))},ee=A.useCallback(async()=>{if(h.trim()===""||m||!j)return;const ie={sender:Ot.USER,text:h},Y=h;p(""),z(de=>[...de,ie]),y(!0),z(de=>[...de,{sender:Ot.AI,text:""}]);try{const oe=await I.getSubjectChat(t,j.messages).sendMessageStream({message:Y});for await(const U of oe)z(G=>{const fe=G[G.length-1],ge=[...G];return ge[G.length-1]={...fe,text:fe.text+U.text},ge})}catch(de){console.error("Error streaming response:",de),z(oe=>{const U=oe[oe.length-1],G=[...oe];return G[oe.length-1]={...U,text:"Sorry, I encountered an error. Please try again."},G})}finally{y(!1)}},[h,m,j,t,I]),Z=ie=>{if(o(Y=>Y.filter(de=>de.id!==ie)),a===ie){const Y=i.filter(de=>de.id!==ie);u(Y.length>0?Y[0].id:null)}},re=ie=>{T(ie.id),_(ie.name)},ye=()=>{o(ie=>ie.map(Y=>Y.id===x?{...Y,name:w}:Y)),T(null)},ce=({message:ie})=>{const Y=ie.sender===Ot.USER,de=ie.sender===Ot.AI&&ie.text===""&&m;return g.jsxs(Fe.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:400,damping:25},className:`flex items-start gap-3 my-4 ${Y?"flex-row-reverse":""}`,children:[g.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${Y?"bg-gradient-to-br from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))]":"bg-[rgb(var(--color-input))]"}`,children:Y?g.jsx(cp,{}):g.jsx(wa,{})}),g.jsx("div",{className:`p-4 rounded-xl max-w-2xl ${Y?"bg-gradient-to-br from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] animated-gradient-bg text-white":"bg-[rgb(var(--color-input))] text-[rgb(var(--color-text-primary))]"}`,children:de?g.jsx(qt,{}):Y?g.jsx("div",{className:"whitespace-pre-wrap",children:ie.text}):g.jsx($n,{content:ie.text})})]})};return g.jsxs("div",{className:"flex flex-col h-full bg-transparent",children:[g.jsx("div",{className:"px-6 pt-6",children:g.jsxs("button",{onClick:e,className:"mb-4 text-[rgb(var(--color-accent))] hover:brightness-90",children:["← Back to ",t]})}),g.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[g.jsxs("div",{className:`bg-[rgba(var(--color-card),0.5)] border-r border-[rgb(var(--color-border))] flex flex-col transition-all duration-300 ease-in-out ${E?"w-16":"w-72"}`,children:[g.jsxs("div",{className:`p-2 flex-1 overflow-hidden ${E?"flex flex-col items-center":""}`,children:[g.jsxs("button",{onClick:D,className:`flex items-center justify-center gap-2 p-2 mb-4 text-white rounded-md hover:opacity-90 transition-opacity w-full ${E?"":"bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] animated-gradient-bg"}`,title:"New Chat",children:[g.jsx(Bu,{}),!E&&g.jsx("span",{className:"flex-1",children:"New Chat"})]}),!E&&g.jsx("div",{className:"flex-1 overflow-y-auto",children:i.map(ie=>g.jsx("div",{className:`p-2 rounded-md mb-2 cursor-pointer group flex justify-between items-center ${a===ie.id?"bg-slate-700":"hover:bg-slate-800"}`,onClick:()=>u(ie.id),children:x===ie.id?g.jsx("input",{type:"text",value:w,onChange:Y=>_(Y.target.value),onBlur:ye,onKeyDown:Y=>Y.key==="Enter"&&ye(),className:"bg-slate-600 text-white p-1 rounded w-full",autoFocus:!0}):g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-sm truncate flex-1",children:ie.name}),g.jsxs("div",{className:"flex opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:Y=>{Y.stopPropagation(),re(ie)},className:"p-1 hover:text-white",children:g.jsx(hp,{className:"w-4 h-4"})}),g.jsx("button",{onClick:Y=>{Y.stopPropagation(),Z(ie.id)},className:"p-1 hover:text-red-500",children:g.jsx(fp,{className:"w-4 h-4"})})]})]})},ie.id))})]}),g.jsx("button",{onClick:()=>N(ie=>!ie),className:"p-2 flex items-center justify-center text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-input))] border-t border-[rgb(var(--color-border))]",children:E?g.jsx(Ho,{}):g.jsx(Go,{})})]}),g.jsxs("div",{className:"flex flex-col flex-1 pl-6 pb-6 pr-6",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto pr-4",children:[!j||j.messages.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[rgb(var(--color-text-secondary))]",children:[g.jsx(wa,{className:"w-16 h-16 mb-4"}),g.jsxs("h2",{className:"text-2xl font-semibold",children:[t," Expert"]}),g.jsxs("p",{className:"mt-2",children:["Ask me any question about ",t,"!"]})]}):j.messages.map((ie,Y)=>g.jsx(ce,{message:ie},Y)),g.jsx("div",{ref:M})]}),g.jsx("div",{className:"mt-6",children:g.jsxs("div",{className:"flex items-center bg-[rgb(var(--color-input))] rounded-lg p-2 border border-[rgb(var(--color-border))] focus-within:ring-2 focus-within:ring-[rgb(var(--color-primary))] transition-all",children:[g.jsx("input",{type:"text",value:h,onChange:ie=>p(ie.target.value),onKeyDown:ie=>ie.key==="Enter"&&ee(),placeholder:`Ask about ${t}...`,className:"flex-1 bg-transparent border-none focus:ring-0 text-[rgb(var(--color-text-primary))] placeholder-[rgb(var(--color-text-secondary))]",disabled:m||!j}),g.jsx("button",{onClick:ee,disabled:m||h.trim()===""||!j,className:"p-2 rounded-md bg-[rgb(var(--color-primary))] text-white disabled:bg-slate-600 disabled:cursor-not-allowed hover:bg-[rgb(var(--color-primary-hover))] transition-colors","aria-label":"Send message",children:m?g.jsx(qt,{}):g.jsx(dp,{})})]})})]})]})]})},kO="easyway-tutor-quiz-results",DO=90,IO=t=>{const e=Math.floor(t/3600).toString().padStart(2,"0"),n=Math.floor(t%3600/60).toString().padStart(2,"0"),i=(t%60).toString().padStart(2,"0");return`${e}:${n}:${i}`},PO=({subject:t,onBack:e})=>{const[n,i]=A.useState(10),[o,a]=A.useState("Medium"),[u,h]=A.useState([]),[p,m]=A.useState(0),[y,x]=A.useState([]),[T,w]=A.useState(!1),[_,E]=A.useState(!1),[N,I]=A.useState(null),[M,D]=A.useState(0),[,j]=Pn(kO,[]),P=A.useMemo(()=>new vi,[]),{user:z,signInWithGoogle:ee}=hn(),Z=A.useCallback(async()=>{if(u.length===0)return;const oe=y.reduce((G,fe,ge)=>{var R;return fe===((R=u[ge])==null?void 0:R.correctAnswerIndex)?G+1:G},0),U={id:`quiz-${Date.now()}`,topicOrSubject:t,difficulty:o,score:oe,totalQuestions:u.length,timestamp:Date.now(),questions:u,userAnswers:y};j(G=>[U,...G].slice(0,50));try{if(Mt&&z){const G=Math.round(oe/Math.max(1,u.length)*100);await je.from("tests").insert({user_id:z.id,subject:t,topic:null,score:G})}}catch(G){console.warn("Failed to persist subject test result to Supabase",G)}},[u,y,t,o,j,z]),re=A.useCallback(async()=>{if(w(!0),!z&&Mt)try{await ee()}catch{}await Z()},[Z,z,ee]);A.useEffect(()=>{if(u.length>0&&!T){const oe=setInterval(()=>{D(U=>U<=1?(clearInterval(oe),re(),0):U-1)},1e3);return()=>clearInterval(oe)}},[u.length,T,re]);const ye=A.useCallback(async()=>{E(!0),I(null),h([]),w(!1),x([]),m(0),D(n*DO);try{const oe=await P.generateSubjectQuiz(t,n,o);h(oe),x(new Array(oe.length).fill(null))}catch(oe){I("Failed to generate quiz for this subject. Please try again."),console.error(oe)}finally{E(!1)}},[t,n,o,P]),ce=oe=>{const U=[...y];U[p]=oe,x(U)},ie=()=>{p<u.length-1?m(oe=>oe+1):re()},Y=()=>{h([]),w(!1),I(null)},de=y.reduce((oe,U,G)=>{var fe;return U===((fe=u[G])==null?void 0:fe.correctAnswerIndex)?oe+1:oe},0);return T?g.jsx("div",{className:"p-6 h-full overflow-y-auto",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("button",{onClick:e,className:"mb-4 text-[rgb(var(--color-accent))] hover:brightness-90",children:["← Back to ",t]}),g.jsxs("h1",{className:"text-3xl font-bold text-white mb-4",children:['Quiz Results for "',t,'"']}),g.jsx(Je,{children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-lg text-[rgb(var(--color-text-secondary))]",children:"Your Score"}),g.jsxs("p",{className:"text-6xl font-bold text-[rgb(var(--color-accent))] my-2",children:[de," ",g.jsxs("span",{className:"text-3xl text-[rgb(var(--color-text-secondary))]",children:["/ ",u.length]})]}),g.jsxs("p",{className:"text-lg text-[rgb(var(--color-text-secondary))]",children:["Accuracy: ",(de/u.length*100).toFixed(2),"%"]})]})}),g.jsx("div",{className:"mt-6 space-y-4",children:u.map((oe,U)=>{const G=y[U],fe=G===oe.correctAnswerIndex;return g.jsxs(Je,{children:[g.jsxs("p",{className:"font-semibold mb-2",children:[U+1,". ",oe.question]}),g.jsx("div",{className:"space-y-2",children:oe.options.map((ge,R)=>{let K="border-[rgb(var(--color-border))]";return R===oe.correctAnswerIndex?K="border-green-500 bg-green-500/20":R===G&&!fe&&(K="border-red-500 bg-red-500/20"),g.jsx("div",{className:`p-2 rounded-md border ${K}`,children:ge},R)})}),g.jsxs("p",{className:`mt-3 text-sm ${fe?"text-green-400":"text-red-400"}`,children:["Your answer: ",G!==null?oe.options[G]:"Not answered",!fe&&g.jsxs("span",{className:"block",children:["Correct answer: ",oe.options[oe.correctAnswerIndex]]})]}),g.jsxs("div",{className:"mt-2 text-xs text-[rgb(var(--color-text-secondary))] bg-[rgb(var(--color-input))] p-2 rounded-md",children:[g.jsx("p",{className:"font-semibold mb-1 text-slate-300",children:"Explanation:"}),g.jsx($n,{content:oe.explanation,className:"prose-sm"})]})]},U)})}),g.jsx("button",{onClick:Y,className:"mt-6 w-full px-6 py-3 bg-[rgb(var(--color-primary))] text-white font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-hover))] transition-colors",children:"Take Another Test"})]})}):g.jsx("div",{className:"p-6 h-full overflow-y-auto",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("button",{onClick:e,className:"mb-4 text-[rgb(var(--color-accent))] hover:brightness-90",children:["← Back to ",t]}),g.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Subject Test: ",t]}),u.length===0?g.jsxs(Je,{children:[g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"numQuestions",className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-2",children:"Number of Questions"}),g.jsxs("select",{id:"numQuestions",value:n,onChange:oe=>i(Number(oe.target.value)),disabled:_,className:"w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-3 text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgb(var(--color-primary))]",children:[g.jsx("option",{value:5,children:"5"}),g.jsx("option",{value:10,children:"10"}),g.jsx("option",{value:25,children:"25"}),g.jsx("option",{value:50,children:"50"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"difficulty",className:"block text-sm font-medium text-[rgb(var(--color-text-secondary))] mb-2",children:"Difficulty"}),g.jsxs("select",{id:"difficulty",value:o,onChange:oe=>a(oe.target.value),disabled:_,className:"w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-3 text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgb(var(--color-primary))]",children:[g.jsx("option",{value:"Easy",children:"Easy"}),g.jsx("option",{value:"Medium",children:"Medium"}),g.jsx("option",{value:"Hard",children:"Hard"})]})]})]}),g.jsx("button",{onClick:ye,disabled:_,className:"w-full px-6 py-3 text-lg bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] text-white font-semibold rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity duration-200 animated-gradient-bg",children:_?g.jsx(qt,{}):`Start ${t} Test`})]}),N&&g.jsx(Je,{className:"mt-4",children:g.jsx("p",{className:"text-red-400",children:N})}),_&&!N&&g.jsx(Je,{className:"mt-4",children:g.jsxs("div",{className:"flex justify-center items-center gap-3",children:[g.jsx(qt,{}),g.jsxs("p",{children:["Generating ",n," questions... This may take a moment."]})]})}),!_&&!N&&g.jsxs("div",{className:"text-center text-[rgb(var(--color-text-secondary))] py-16",children:[g.jsx(Ta,{className:"mx-auto w-12 h-12 mb-4"}),g.jsx("p",{children:"Configure and start your test above."})]})]}):g.jsxs("div",{children:[g.jsx(Je,{className:"sticky top-0 z-10 mb-4",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h2",{className:"text-xl font-bold text-[rgb(var(--color-accent))]",children:['Test on "',t,'"']}),g.jsx("div",{className:"text-lg font-mono bg-slate-700 text-white px-3 py-1 rounded-md",children:IO(M)})]})}),g.jsxs(Je,{children:[g.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-2",children:["Question ",p+1,"/",u.length]}),g.jsx("p",{className:"text-lg text-white mb-4 font-semibold",children:u[p].question}),g.jsx("div",{className:"space-y-3",children:u[p].options.map((oe,U)=>g.jsx("button",{onClick:()=>ce(U),className:`w-full text-left p-3 rounded-lg border-2 transition-colors ${y[p]===U?"border-[rgb(var(--color-accent))] bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] animated-gradient-bg text-white":"bg-[rgb(var(--color-input))] border-[rgb(var(--color-border))] hover:border-[rgb(var(--color-accent))]"}`,children:oe},U))})]}),g.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[g.jsxs("div",{className:"text-[rgb(var(--color-text-secondary))]",children:["Question ",p+1," of ",u.length]}),g.jsx("button",{onClick:ie,disabled:y[p]===null,className:"px-6 py-3 bg-[rgb(var(--color-primary))] text-white font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-hover))] disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors",children:p<u.length-1?"Next Question":"Show Results"})]})]})]})})},LO=["Indian Polity & Governance","Modern Indian History","Ancient & Medieval History","Geography (India & World)","Indian Economy","Environment and Ecology","Science and Technology","Art and Culture","International Relations","Internal Security","Ethics, Integrity & Aptitude","Social Justice"],Ob={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Mf={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},UO=({setActiveSubject:t})=>{const[e,n]=A.useState(null),[i,o]=A.useState("list");A.useEffect(()=>(t(e),()=>t(null)),[e,t]);const a=p=>{n(p),o("list")},u=()=>{n(null),o("list")},h=()=>{o("list")};return e?i==="chat"?g.jsx(RO,{subject:e,onBack:h}):i==="test"?g.jsx(PO,{subject:e,onBack:h}):g.jsx("div",{className:"p-6 h-full overflow-y-auto",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsx("button",{onClick:u,className:"mb-4 text-[rgb(var(--color-accent))] hover:brightness-90",children:"← Back to All Subjects"}),g.jsxs("h2",{className:"text-2xl font-bold text-[rgb(var(--color-text-primary))] mb-6",children:["Subject: ",e]}),g.jsxs(Fe.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",variants:Ob,initial:"hidden",animate:"visible",children:[g.jsx(Fe.div,{variants:Mf,children:g.jsx(Je,{onClick:()=>o("chat"),className:"cursor-pointer hover:border-[rgb(var(--color-accent))] transition-colors h-full",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(Pu,{className:"w-8 h-8 text-[rgb(var(--color-accent))]"}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold",children:"Chat with Expert"}),g.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"Ask questions and get detailed explanations."})]})]})})}),g.jsx(Fe.div,{variants:Mf,children:g.jsx(Je,{onClick:()=>o("test"),className:"cursor-pointer hover:border-[rgb(var(--color-accent))] transition-colors h-full",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(Ta,{className:"w-8 h-8 text-[rgb(var(--color-accent))]"}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold",children:"Take Subject Test"}),g.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"Customizable, timed tests."})]})]})})})]})]})}):g.jsx("div",{className:"p-6 h-full overflow-y-auto",children:g.jsx("div",{className:"max-w-5xl mx-auto",children:g.jsx(Fe.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:Ob,initial:"hidden",animate:"visible",children:LO.map(p=>g.jsx(Fe.div,{variants:Mf,children:g.jsx(Je,{onClick:()=>a(p),className:"cursor-pointer hover:border-[rgb(var(--color-accent))] transition-colors h-full flex flex-col justify-center",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx(ep,{className:"w-8 h-8 text-[rgb(var(--color-accent))] flex-shrink-0"}),g.jsx("h2",{className:"text-lg font-bold",children:p})]})})},p))})})})},VO=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"})}),jO=({className:t="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),qb="easyway-planner-tasks",BO="easyway-study-plans",OO="easyway-active-plan-id",qO=()=>new Date().toISOString().split("T")[0],zO=({onDateSelect:t,selectedDate:e,tasks:n})=>{const[i,o]=A.useState(new Date(e)),a=(y,x)=>new Date(y,x+1,0).getDate(),u=(y,x)=>new Date(y,x,1).getDay(),h=A.useMemo(()=>new Set(n.map(y=>y.date)),[n]),p=()=>{const y=i.getMonth(),x=i.getFullYear(),T=a(x,y),w=u(x,y),_=[];for(let E=0;E<w;E++)_.push(g.jsx("div",{className:"p-2"},`empty-${E}`));for(let E=1;E<=T;E++){const I=new Date(x,y,E).toISOString().split("T")[0],M=e===I,D=h.has(I),j=`p-2 text-center rounded-full cursor-pointer transition-colors relative ${M?"bg-[rgb(var(--color-primary))] text-white font-bold":"text-[rgb(var(--color-text-primary))] hover:bg-[rgb(var(--color-input))]"}`;_.push(g.jsxs("div",{className:j,onClick:()=>t(I),children:[E,D&&g.jsx("div",{className:`absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full ${M?"bg-white":"bg-[rgb(var(--color-accent))]"}`})]},E))}return _},m=y=>{o(x=>new Date(x.getFullYear(),x.getMonth()+y,1))};return g.jsxs(Je,{className:"mb-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("button",{onClick:()=>m(-1),className:"p-2 rounded-full hover:bg-[rgb(var(--color-input))]",children:"<"}),g.jsx("h2",{className:"font-bold text-lg",children:i.toLocaleString("default",{month:"long",year:"numeric"})}),g.jsx("button",{onClick:()=>m(1),className:"p-2 rounded-full hover:bg-[rgb(var(--color-input))]",children:">"})]}),g.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-[rgb(var(--color-text-secondary))] text-sm",children:[g.jsx("div",{children:"Sun"}),g.jsx("div",{children:"Mon"}),g.jsx("div",{children:"Tue"}),g.jsx("div",{children:"Wed"}),g.jsx("div",{children:"Thu"}),g.jsx("div",{children:"Fri"}),g.jsx("div",{children:"Sat"})]}),g.jsx("div",{className:"grid grid-cols-7 gap-1 mt-2",children:p()})]})},GO=()=>{const[t,e]=Pn(BO,[]),[n,i]=Pn(OO,null),[o,a]=A.useState(qO()),[u,h]=A.useState(""),[p,m]=A.useState(""),[y,x]=A.useState(!1),[T,w]=A.useState(null),[_,E]=A.useState(null),[N,I]=A.useState(null),[M,D]=A.useState(!0),[j,P]=A.useState(null),[z,ee]=A.useState(""),[Z,re]=A.useState(!1),ye=A.useMemo(()=>new vi,[]);A.useEffect(()=>{const J=localStorage.getItem(qb);if(J&&t.length===0)try{const B=JSON.parse(J);if(Array.isArray(B)&&B.length>0){const me={id:`plan-${Date.now()}`,name:"My Study Plan",tasks:B,createdAt:Date.now()};e([me]),i(me.id),localStorage.removeItem(qb)}}catch(B){console.error("Failed to migrate old tasks",B)}else if(t.length===0){const B={id:`plan-${Date.now()}`,name:"ALL GOV Prelims 2025",tasks:[],createdAt:Date.now()};e([B]),i(B.id)}!n&&t.length>0&&i(t.sort((B,me)=>B.createdAt-me.createdAt)[0].id)},[]);const ce=A.useMemo(()=>t.find(J=>J.id===n),[t,n]),ie=(J,B)=>{e(me=>me.map(Le=>Le.id===J?B(Le):Le))},Y=()=>{if(u.trim()===""||!n)return;const J={id:`task-${Date.now()}`,title:u.trim(),date:o,completed:!1};ie(n,B=>({...B,tasks:[...B.tasks,J]})),h("")},de=J=>{n&&ie(n,B=>({...B,tasks:B.tasks.map(me=>me.id===J?{...me,completed:!me.completed}:me)}))},oe=J=>{n&&ie(n,B=>({...B,tasks:B.tasks.filter(me=>me.id!==J)}))},U=A.useCallback(async()=>{if(p.trim()!==""){x(!0),E(null),w(null);try{const B=(await ye.generateStudyPlan(p)).map(me=>({...me,id:`task-${Date.now()}-${Math.random()}`,completed:!1}));w(B)}catch(J){console.error("Failed to generate study plan:",J),E("Sorry, an error occurred while generating the plan. Please try again.")}finally{x(!1)}}},[p,ye]),G=()=>{!T||!n||(ie(n,J=>({...J,tasks:[...J.tasks,...T]})),w(null),m(""))},fe=()=>{const J={id:`plan-${Date.now()}`,name:`New Plan ${t.length+1}`,tasks:[],createdAt:Date.now()};e(B=>[...B,J]),i(J.id)},ge=J=>{if(e(B=>B.filter(me=>me.id!==J)),n===J){const B=t.filter(me=>me.id!==J);i(B.length>0?B[0].id:null)}},R=J=>{P(J.id),ee(J.name)},K=()=>{j&&ie(j,J=>({...J,name:z.trim()||"Untitled Plan"})),P(null)},pe=(ce==null?void 0:ce.tasks.filter(J=>J.date===o))||[],he=new Date(o+"T12:00:00Z").toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),ae="w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-lg p-2 text-[rgb(var(--color-text-primary))] placeholder-[rgb(var(--color-text-secondary))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--color-background-start))] focus-visible:ring-[rgb(var(--color-primary))] transition-all duration-200",W=({plan:J})=>{const B=J.tasks.filter(se=>se.completed).length,me=J.tasks.length,Le=me>0?B/me*100:0;return g.jsxs("div",{className:`p-3 rounded-lg group transition-colors ${n===J.id?"bg-[rgb(var(--color-input))] border border-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-input))]"}`,children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[j===J.id?g.jsx("input",{type:"text",value:z,onChange:se=>ee(se.target.value),onBlur:K,onKeyDown:se=>se.key==="Enter"&&K(),className:`${ae} text-sm p-1 flex-1`,autoFocus:!0}):g.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>i(J.id),children:[g.jsx("p",{className:"font-semibold text-sm truncate",children:J.name}),g.jsxs("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:[B," / ",me," tasks completed"]})]}),g.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>R(J),className:"p-1 hover:text-white",children:g.jsx(hp,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>ge(J.id),className:"p-1 hover:text-red-500",children:g.jsx(fp,{className:"w-4 h-4"})})]})]}),g.jsx("div",{className:"w-full bg-slate-700 rounded-full h-1 mt-2",children:g.jsx("div",{className:"bg-[rgb(var(--color-primary))] h-1 rounded-full transition-all",style:{width:`${Le}%`}})})]})},le=({task:J})=>g.jsx(Fe.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-20,transition:{duration:.2}},transition:{type:"spring",stiffness:300,damping:25},children:g.jsxs("div",{className:"flex items-center justify-between bg-[rgb(var(--color-input))] p-3 rounded-lg group",children:[g.jsxs("div",{className:"flex items-center gap-3 flex-1 overflow-hidden",children:[g.jsx("input",{type:"checkbox",checked:J.completed,onChange:()=>de(J.id),className:"w-5 h-5 accent-[rgb(var(--color-primary))] bg-[rgb(var(--color-sidebar))] rounded border-[rgb(var(--color-border))] flex-shrink-0"}),g.jsx("span",{className:`truncate ${J.completed?"line-through text-slate-500":""}`,children:J.title}),J.notes&&g.jsx("button",{onClick:()=>I(J),className:"text-[rgb(var(--color-text-secondary))] hover:text-white transition-colors",children:g.jsx(Jf,{className:"w-4 h-4"})})]}),g.jsx("button",{onClick:()=>oe(J.id),className:"text-slate-500 hover:text-red-500 text-xl font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:"×"})]})},J.id);return g.jsxs("div",{className:"p-6 h-full overflow-y-auto",children:[g.jsx("div",{className:"max-w-7xl mx-auto",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 relative",children:[g.jsx("button",{onClick:()=>re(J=>!J),className:"absolute -left-4 top-2 z-10 lg:hidden p-2 bg-[rgb(var(--color-card))] rounded-full border border-[rgb(var(--color-border))]",children:Z?g.jsx(Ho,{}):g.jsx(Go,{})}),g.jsxs("div",{className:`lg:col-span-1 flex-col gap-6 transition-all duration-300 ${Z?"hidden lg:flex":"flex"}`,children:[g.jsxs(Je,{children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{onClick:()=>D(J=>!J),className:"flex-1 flex justify-between items-center cursor-pointer",children:[g.jsx("h2",{className:"text-xl font-bold",children:"Study Plans"}),M?g.jsx(VO,{}):g.jsx(jO,{})]}),g.jsx("button",{onClick:()=>re(J=>!J),className:"hidden lg:block p-1 ml-4 text-[rgb(var(--color-text-secondary))] hover:text-white",children:g.jsx(Go,{})})]}),g.jsx(di,{children:M&&g.jsxs(Fe.div,{initial:{height:0,opacity:0,marginTop:0},animate:{height:"auto",opacity:1,marginTop:"1rem"},exit:{height:0,opacity:0,marginTop:0},className:"overflow-hidden",children:[g.jsx("div",{className:"space-y-3",children:t.map(J=>g.jsx(W,{plan:J},J.id))}),g.jsxs("button",{onClick:fe,className:"w-full mt-4 flex items-center justify-center gap-2 text-sm p-2 rounded-lg bg-[rgb(var(--color-input))] hover:bg-slate-700 text-[rgb(var(--color-text-secondary))] hover:text-white transition-colors",children:[g.jsx(Bu,{className:"w-4 h-4"})," Create New Plan"]})]})})]}),g.jsx(zO,{onDateSelect:a,selectedDate:o,tasks:(ce==null?void 0:ce.tasks)||[]}),g.jsxs(Je,{children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:"AI Plan Generator"}),g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-4",children:"Describe your goal, and the AI will create a dated study plan with notes for you."}),g.jsx("textarea",{value:p,onChange:J=>m(J.target.value),placeholder:"e.g., 'A 2-week plan for Modern History, focusing on the freedom struggle.'",className:`${ae} mb-3 min-h-[80px]`,disabled:y}),g.jsx("button",{onClick:U,disabled:y||p.trim()==="",className:"w-full p-2 bg-[rgb(var(--color-primary))] text-white font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-hover))] disabled:bg-slate-600",children:y?g.jsx(qt,{}):"Generate Plan"})]})]}),g.jsxs("div",{className:`${Z?"lg:col-span-3":"lg:col-span-2"}`,children:[Z&&g.jsx("button",{onClick:()=>re(!1),className:"hidden lg:block absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 z-10 p-2 bg-[rgb(var(--color-card))] rounded-full border border-[rgb(var(--color-border))]",children:g.jsx(Ho,{})}),g.jsxs(Je,{children:[g.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Tasks for ",he]}),g.jsxs("div",{className:"flex gap-2 mb-4",children:[g.jsx("input",{type:"text",value:u,onChange:J=>h(J.target.value),onKeyDown:J=>J.key==="Enter"&&Y(),placeholder:"Add new task manually...",className:`flex-1 ${ae}`,disabled:!ce}),g.jsx("button",{onClick:Y,disabled:!ce,className:"p-2 px-4 bg-[rgb(var(--color-primary))] text-white font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-hover))] disabled:bg-slate-600",children:"Add"})]}),g.jsx("div",{className:"space-y-3",children:g.jsx(di,{children:pe.length>0?pe.map(J=>g.jsx(le,{task:J},J.id)):g.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:g.jsxs("div",{className:"text-center text-[rgb(var(--color-text-secondary))] py-8",children:[g.jsx(SS,{className:"mx-auto w-12 h-12 mb-4"}),g.jsx("p",{children:ce?"No tasks for this day. Add one above!":"Select a study plan to view tasks."})]})})})})]})]})]})}),g.jsxs(di,{children:[T&&g.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-md z-40 flex items-center justify-center p-4",children:g.jsxs(Fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[rgb(var(--color-card))] w-full max-w-2xl rounded-xl border border-[rgb(var(--color-border))] shadow-2xl flex flex-col max-h-[90vh]",children:[g.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))]",children:[g.jsx("h2",{className:"text-lg font-bold",children:"AI Generated Plan"}),g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Review the generated tasks and add them to your plan."})]}),g.jsx("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:T.map(J=>g.jsxs("div",{className:"p-3 rounded-lg bg-[rgb(var(--color-input))]",children:[g.jsxs("p",{className:"font-bold",children:[J.title," ",g.jsxs("span",{className:"font-normal text-sm text-[rgb(var(--color-text-secondary))]",children:["(",J.date,")"]})]}),g.jsx($n,{content:J.notes||"",className:"prose-sm mt-2"})]},J.id))}),g.jsxs("div",{className:"p-4 border-t border-[rgb(var(--color-border))] flex justify-end gap-3",children:[g.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 bg-slate-700 rounded-lg hover:bg-slate-600",children:"Cancel"}),g.jsxs("button",{onClick:G,className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-white rounded-lg hover:bg-[rgb(var(--color-primary-hover))]",disabled:!ce,children:['Add to "',ce==null?void 0:ce.name,'"']})]})]})}),_&&g.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-md z-40 flex items-center justify-center p-4",onClick:()=>E(null),children:g.jsx(Fe.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-[rgb(var(--color-card))] p-6 rounded-lg border border-red-500/50",children:g.jsx("p",{className:"text-red-400",children:_})})})]}),g.jsx(di,{children:N&&g.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-md z-40 flex items-center justify-center p-4",onClick:()=>I(null),children:g.jsxs(Fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[rgb(var(--color-card))] w-full max-w-2xl rounded-xl border border-[rgb(var(--color-border))] shadow-2xl flex flex-col max-h-[80vh]",onClick:J=>J.stopPropagation(),children:[g.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-[rgb(var(--color-border))]",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-bold",children:N.title}),g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:new Date(N.date+"T12:00:00Z").toLocaleDateString()})]}),g.jsx("button",{onClick:()=>I(null),className:"p-2 rounded-full hover:bg-[rgb(var(--color-input))]",children:g.jsx(qu,{})})]}),g.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:g.jsx($n,{content:N.notes||""})})]})})})]})},zb="easyway-tutor-global-assistant-sessions",HO=()=>{const[t,e]=A.useState(!1),[n,i]=A.useState(!1),[o,a]=A.useState([]),[u,h]=A.useState(null),[p,m]=A.useState(""),[y,x]=A.useState(!1),[T,w]=A.useState(null),{activeView:_,activeSubject:E,apiKeys:N,setActiveView:I,setExplainerPrefillTopic:M}=Fn(),{user:D,signInWithGoogle:j}=hn(),P=A.useMemo(()=>new vi,[]),z=A.useMemo(()=>N.openai?new ww(N.openai):null,[N.openai]),ee=A.useRef(null),Z=A.useRef(null),re=A.useRef(null),ye=A.useRef(null),[ce,ie]=A.useState(!1),Y=A.useRef(null),de=A.useRef(null),oe=A.useRef(null);A.useEffect(()=>{const F=window.matchMedia("(prefers-reduced-motion: reduce)"),te=()=>i(F.matches);return te(),F.addEventListener?(F.addEventListener("change",te),()=>F.removeEventListener("change",te)):(F.addListener(te),()=>F.removeListener(te))},[]);const[U,G]=Pn("easyway-global-assistant-position",{x:20,y:200}),fe=A.useCallback(()=>{if(!ye.current)return;const F=ye.current.getBoundingClientRect(),te=8,Ce=Math.max(te,window.innerWidth-F.width-te),Ee=Math.max(te,window.innerHeight-F.height-te),Se=Math.min(Math.max(F.left,te),Ce),Be=Math.min(Math.max(F.top,te),Ee);G({x:Se,y:Be})},[G]);A.useEffect(()=>{const F=()=>e(te=>!te);return window.addEventListener("toggle-global-assistant",F),()=>window.removeEventListener("toggle-global-assistant",F)},[]),A.useEffect(()=>{const F=()=>{const Se=Math.max(8,window.innerWidth-80-8),Be=Math.max(8,window.innerHeight-80-8);G(pt=>({x:Math.min(Math.max(pt.x??20,8),Se),y:Math.min(Math.max(pt.y??200,8),Be)}))};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[G]),A.useEffect(()=>{const F=te=>{te.altKey&&(te.key==="g"||te.key==="G")&&G({x:20,y:200})};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[G]),A.useEffect(()=>{try{const F=localStorage.getItem(zb),te=F?JSON.parse(F):[];a(te),te.length>0?h(te[0].id):he()}catch(F){console.error("Failed to load global assistant sessions:",F)}},[]),A.useEffect(()=>{const F=setTimeout(()=>{try{localStorage.setItem(zb,JSON.stringify(o))}catch(te){console.error("Failed to save global assistant sessions:",te)}},250);return()=>clearTimeout(F)},[o]);const ge=o.find(F=>F.id===u),R=()=>{const F=re.current;F&&requestAnimationFrame(()=>{F.scrollTop=F.scrollHeight})};A.useEffect(R,[ge==null?void 0:ge.messages]);const K=(F,te)=>{a(Ce=>Ce.map(Ee=>Ee.id===F?te(Ee):Ee))},pe=F=>{u&&K(u,te=>({...te,messages:F(te.messages)}))},he=A.useCallback(()=>{const F={id:`session-${Date.now()}`,name:"New Query",messages:[],createdAt:Date.now(),model:"gemini-2.5-flash"};a(te=>[F,...te]),h(F.id)},[]),ae=()=>{const F=(ge==null?void 0:ge.messages)||[];for(let te=F.length-1;te>=0;te--)if(F[te].sender===Ot.AI&&F[te].text)return F[te].text;return""},W=F=>{const te=F.trim(),Ce=te.match(/^#+\s*(.+)$/m);return Ce?Ce[1].trim().slice(0,120):(te.split(/\n|\.|\!|\?/)[0]||"").trim().slice(0,120)||"General Topic"},le=F=>{I==null||I(F),e(!1)},J=F=>{const te=F&&F.trim()?F.trim():W(ae());if(!te)return alert("No content to send to Explainer. Type /explainer <topic> or get an AI response first.");M==null||M(te),le(xe.EXPLAINER)},B=A.useCallback(async()=>{if(p.trim()===""||y||!ge)return;const F=p.trim();if(F.startsWith("/")){const[Be,...pt]=F.split(" "),mt=pt.join(" ").trim();switch(Be.toLowerCase()){case"/goto":case"/nav":{const ut=mt.toLowerCase(),ct={tutor:xe.TUTOR,explainer:xe.EXPLAINER,quiz:xe.QUIZ,news:xe.NEWS,subjects:xe.SUBJECTS,planner:xe.PLANNER,dashboard:xe.DASHBOARD,notes:xe.NOTES,help:xe.HELP};ct[ut]&&le(ct[ut]),m("");return}case"/explainer":{J(mt),m("");return}case"/notes":{le(xe.NOTES),m("");return}}}const te=ge.model;if(te.startsWith("gpt")&&!z){alert("OpenAI API key is not set. Please add it in settings.");return}let Ce=`[Current View: ${xe[_]}]`;_===xe.SUBJECTS&&E&&(Ce+=` [Subject: ${E}]`);const Ee=`Context: ${Ce}

User query: ${p}`,Se={sender:Ot.USER,text:p};m(""),pe(Be=>[...Be,Se]),x(!0),w(null),pe(Be=>[...Be,{sender:Ot.AI,text:""}]);try{let Be;te.startsWith("gpt")?Be=z.sendMessageStream(te,ge.messages,"You are a helpful AI assistant for a user studying for ALL GOV exams. The user will provide you with their current context (what they are looking at in the app). Use this context to provide relevant and concise help. Be friendly and supportive.",Ee):Be=await P.getGlobalAssistantChat(ge.messages).sendMessageStream({message:Ee});let mt=!1;const ut=setTimeout(()=>{mt||(w("The model is taking too long to respond. Please try again or switch models."),pe(Jt=>{const An=Jt[Jt.length-1],Ki=[...Jt];return Ki[Jt.length-1]={...An,text:"Sorry, the response timed out. Please try again."},Ki}),x(!1))},2e4);let ct="",pn=!1;const zt=()=>{if(!ct)return;const Jt=ct;ct="",pe(An=>{const Ki=An[An.length-1],Qi=[...An];return Qi[An.length-1]={...Ki,text:Ki.text+Jt},Qi}),pn=!1};for await(const Jt of Be){const An=typeof Jt=="string"?Jt:(Jt==null?void 0:Jt.text)??"";An&&(mt=!0,ct+=An,pn||(pn=!0,setTimeout(zt,50)))}ct&&zt(),clearTimeout(ut)}catch(Be){console.error("Error streaming response:",Be),pe(pt=>{const mt=pt[pt.length-1],ut=[...pt];return ut[pt.length-1]={...mt,text:"Sorry, I encountered an error. Please try again."},ut})}finally{x(!1)}},[p,y,ge,_,E,P,z]),me=F=>{if(u){const te=F.target.value;K(u,Ce=>({...Ce,model:te}))}},Le=async F=>{if(F)try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(F);else{const te=document.createElement("textarea");te.value=F,te.style.position="fixed",te.style.left="-9999px",document.body.appendChild(te),te.select(),document.execCommand("copy"),document.body.removeChild(te)}alert("Copied to clipboard")}catch(te){console.error("Copy failed",te),alert("Copy failed. You can select the text and copy manually.")}},se=async F=>{var Se;if(!F)return;if(!Mt){alert("Supabase is not configured. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in .env.local to enable Notes.");return}if(!D){await j();return}const te=((Se=F.split(`
`)[0])==null?void 0:Se.slice(0,60))||"Assistant Note",Ce=window.prompt("Save note title:",te)||te,{error:Ee}=await je.from("notes").insert({user_id:D.id,title:Ce,content:F,source:"assistant"});alert(Ee?"Failed to save note: "+Ee.message:"Saved to Notes")},ke=Th.memo(({message:F,animate:te=!0,streaming:Ce=!1})=>{const Ee=F.sender===Ot.USER,Se=F.sender===Ot.AI&&F.text===""&&y;return g.jsxs("div",{className:`flex items-start gap-3 my-2 ${Ee?"flex-row-reverse":""}`,style:{willChange:"transform",backfaceVisibility:"hidden"},children:[g.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${Ee?"bg-[rgb(var(--color-primary))]":"bg-[rgb(var(--color-input))]"}`,children:Ee?g.jsx(cp,{className:"w-5 h-5"}):g.jsx(wa,{className:"w-5 h-5"})}),g.jsx("div",{className:`p-3 rounded-lg max-w-md ${Ee?"bg-[rgb(var(--color-primary))] text-white":"bg-[rgb(var(--color-input))] text-[rgb(var(--color-text-primary))]"}`,children:Se?g.jsx(qt,{}):Ee?g.jsx("div",{className:"whitespace-pre-wrap",children:F.text}):Ce?g.jsx("div",{className:"whitespace-pre-wrap",children:F.text}):g.jsxs("div",{children:[g.jsx($n,{content:F.text,className:"prose-sm"}),g.jsxs("div",{className:"mt-2 flex gap-2 justify-end",children:[g.jsx("button",{onClick:()=>Le(F.text),className:"px-2 py-1 text-xs rounded bg-[rgb(var(--color-card))] hover:bg-slate-600",title:"Copy this message to clipboard",children:"Copy"}),g.jsx("button",{onClick:()=>{if(!Mt){alert("Notes requires Supabase configuration. Add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in .env.local and restart.");return}D||alert("Please sign in to save notes. You will be prompted to sign in."),se(F.text)},className:`px-2 py-1 text-xs rounded text-white ${!Mt||!D?"bg-slate-600 cursor-not-allowed":"bg-[rgb(var(--color-primary))]"}`,title:Mt?D?"Save to Notes":"Sign in to save notes":"Supabase not configured","aria-disabled":!Mt||!D,children:"Save to Notes"})]})]})})]})},(F,te)=>F.message===te.message&&F.animate===te.animate&&F.streaming===te.streaming),He=F=>{if(F instanceof MouseEvent)return{x:F.clientX,y:F.clientY};const te=F.touches[0]??F.changedTouches[0];return{x:te.clientX,y:te.clientY}},De=(F,te,Ce)=>Math.max(te,Math.min(Ce,F)),ue=F=>{if(!Y.current||!de.current)return;const{x:te,y:Ce}=He(F),Ee=te-de.current.x,Se=Ce-de.current.y,Be={x:Y.current.x+Ee,y:Y.current.y+Se};oe.current&&cancelAnimationFrame(oe.current),oe.current=requestAnimationFrame(()=>{const pt=window.innerWidth,mt=window.innerHeight,ut=64;G({x:De(Be.x,8,pt-ut-8),y:De(Be.y,8,mt-ut-8)})})},Te=F=>{ie(!1),Y.current=null,de.current=null,oe.current&&cancelAnimationFrame(oe.current),oe.current=null,window.removeEventListener("mousemove",ue),window.removeEventListener("mouseup",Te),window.removeEventListener("touchmove",ue),window.removeEventListener("touchend",Te);try{fe&&fe()}catch{}},we=F=>{ie(!0),Y.current={...U};const Ce="touches"in F?{x:F.touches[0].clientX,y:F.touches[0].clientY}:{x:F.clientX,y:F.clientY};de.current=Ce,window.addEventListener("mousemove",ue,{passive:!0}),window.addEventListener("mouseup",Te),window.addEventListener("touchmove",ue,{passive:!0}),window.addEventListener("touchend",Te)};return g.jsx(g.Fragment,{children:g.jsxs("div",{ref:ye,className:"fixed z-30",style:{left:U.x,top:U.y,willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},onMouseUp:Te,children:[g.jsx("button",{onClick:()=>e(!t),className:"w-16 h-16 bg-[rgb(var(--color-primary))] rounded-full text-white flex items-center justify-center shadow-lg hover:opacity-90",onMouseDown:we,onTouchStart:we,style:{cursor:ce?"grabbing":"grab"},"aria-label":"Toggle Global Assistant",children:t?g.jsx(qu,{className:"w-8 h-8"}):g.jsx(Pu,{className:"w-8 h-8"})}),t&&g.jsxs("div",{ref:Z,className:"absolute right-full mr-4 bottom-0 w-[500px] max-h-[85vh] bg-[rgb(var(--color-card))] rounded-2xl shadow-2xl border border-[rgb(var(--color-border))] flex flex-col",style:{willChange:"transform, opacity",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[g.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center sticky top-0 bg-[rgb(var(--color-card))] z-10",children:[g.jsx("h2",{className:"text-lg font-bold",children:"Global Assistant"}),g.jsxs("button",{onClick:he,className:"flex items-center justify-center gap-1 text-xs p-1 px-2 bg-[rgb(var(--color-primary))] text-white rounded-md hover:bg-[rgb(var(--color-primary-hover))] transition-colors",children:[g.jsx(Bu,{className:"w-4 h-4"})," New"]})]}),g.jsxs("div",{className:"flex flex-col flex-1 p-3",children:[g.jsx("div",{ref:re,className:"flex-1 overflow-y-auto global-assistant-scrollbar",style:{contain:"content"},children:!ge||ge.messages.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[rgb(var(--color-text-secondary))] text-center px-4",children:[g.jsx(wa,{className:"w-12 h-12 mb-4"}),g.jsx("p",{children:"I can see what you're doing. Ask me for help!"})]}):ge.messages.map((F,te)=>{const Ee=te===ge.messages.length-1&&y&&F.sender===Ot.AI;return g.jsx(ke,{message:F,animate:!Ee,streaming:Ee},te)})}),g.jsxs("div",{className:"mt-2",ref:ee,children:[g.jsxs("div",{className:"flex items-center bg-[rgb(var(--color-input))] rounded-lg p-1 border border-[rgb(var(--color-border))] focus-within:ring-2 focus-within:ring-[rgb(var(--color-primary))] gap-1",children:[g.jsxs("select",{"aria-label":"Select model",className:"bg-transparent text-sm p-2 rounded-md text-[rgb(var(--color-text-primary))]",value:ge==null?void 0:ge.model,onChange:me,children:[g.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),g.jsx("option",{value:"gpt-4o",disabled:!z,children:"OpenAI GPT-4o"}),g.jsx("option",{value:"gpt-3.5-turbo",disabled:!z,children:"OpenAI GPT-3.5"})]}),g.jsx("input",{type:"text",value:p,onChange:F=>m(F.target.value),onKeyDown:F=>F.key==="Enter"&&B(),placeholder:"Ask for help... (try /goto notes or /explainer <topic>)",className:"flex-1 bg-transparent border-none focus:ring-0 text-[rgb(var(--color-text-primary))] placeholder-[rgb(var(--color-text-secondary))] text-sm",disabled:y}),g.jsx("button",{onClick:B,disabled:y||p.trim()==="",className:"p-2 rounded-md bg-[rgb(var(--color-primary))] text-white disabled:bg-slate-600 disabled:cursor-not-allowed hover:bg-[rgb(var(--color-primary-hover))]","aria-label":"Send message",children:y?g.jsx(qt,{className:"w-4 h-4"}):g.jsx(dp,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-xs",children:[g.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Actions:"}),g.jsx("button",{onClick:()=>le(xe.DASHBOARD),className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] hover:bg-slate-600",children:"Dashboard"}),g.jsx("button",{onClick:()=>le(xe.NOTES),className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] hover:bg-slate-600",children:"Notes"}),g.jsx("button",{onClick:()=>le(xe.PLANNER),className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] hover:bg-slate-600",children:"Planner"}),g.jsx("button",{onClick:()=>le(xe.EXPLAINER),className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] hover:bg-slate-600",children:"Explainer"}),g.jsx("button",{onClick:()=>J(),className:"px-2 py-1 rounded bg-[rgb(var(--color-primary))] text-white",children:"Send last AI → Explainer"})]})]})]})]})]})})},$O=[{id:"default",name:"Cyberpunk Neon"},{id:"solaris",name:"Solaris Orange"},{id:"galaxy",name:"Galaxy Purple"},{id:"midnight",name:"Midnight Dusk"},{id:"crimson",name:"Crimson Code"},{id:"forest",name:"Forest Tech"},{id:"ivory",name:"Classic Ivory"}],FO=()=>{const{isSettingsOpen:t,setIsSettingsOpen:e,theme:n,setTheme:i,profile:o,setProfile:a,apiKeys:u,setApiKeys:h}=Fn(),[p,m]=A.useState("account"),y=_=>{a(E=>({...E,[_.target.name]:_.target.value}))},x=_=>{h(E=>({...E,[_.target.name]:_.target.value}))};if(!t)return null;const T=()=>{const _="w-full bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))] rounded-md p-2 text-[rgb(var(--color-text-primary))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--color-card))] focus-visible:ring-[rgb(var(--color-primary))] transition-all duration-200";switch(p){case"account":return g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account Information"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"name",className:"block text-sm text-[rgb(var(--color-text-secondary))] mb-1",children:"Full Name"}),g.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:y,className:_})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm text-[rgb(var(--color-text-secondary))] mb-1",children:"Email Address"}),g.jsx("input",{type:"email",name:"email",id:"email",value:o.email,onChange:y,className:_})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"country",className:"block text-sm text-[rgb(var(--color-text-secondary))] mb-1",children:"Country"}),g.jsx("input",{type:"text",name:"country",id:"country",value:o.country,onChange:y,className:_})]})]})]});case"theme":return g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Theme Settings"}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:$O.map(E=>g.jsxs(Fe.div,{onClick:()=>i(E.id),className:`p-3 border-2 rounded-lg cursor-pointer transition-all ${n===E.id?"border-[rgb(var(--color-primary))]":"border-[rgb(var(--color-border))] hover:border-slate-500"}`,whileHover:{scale:1.05},animate:{scale:n===E.id?1.05:1},children:[g.jsx("div",{className:`theme-${E.id} w-full h-12 rounded-md bg-gradient-to-br from-[rgb(var(--color-background-start))] to-[rgb(var(--color-background-end))] border border-[rgb(var(--color-border))]`}),g.jsx("p",{className:"mt-2 text-sm text-center font-medium text-[rgb(var(--color-text-secondary))]",children:E.name})]},E.id))})]});case"apikeys":return g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"API Keys (Bring Your Own Key)"}),g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-4",children:"The Gemini API is configured globally. Optionally provide your own API keys for other services. Keys are stored securely in your browser's local storage."}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"openai",className:"block text-sm text-[rgb(var(--color-text-secondary))] mb-1",children:"OpenAI API Key"}),g.jsx("input",{type:"password",name:"openai",id:"openai",value:u.openai,onChange:x,className:_}),g.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[rgb(var(--color-accent))] hover:underline",children:"Get an OpenAI key"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"perplexity",className:"block text-sm text-[rgb(var(--color-text-secondary))] mb-1",children:"Perplexity API Key"}),g.jsx("input",{type:"password",name:"perplexity",id:"perplexity",value:u.perplexity,onChange:x,className:_}),g.jsx("a",{href:"https://docs.perplexity.ai/docs/getting-started",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[rgb(var(--color-accent))] hover:underline",children:"Get a Perplexity key"})]})]})]})}},w=({id:_,children:E})=>g.jsx("button",{onClick:()=>m(_),className:`p-2 text-left rounded-md text-sm w-full font-medium transition-colors ${p===_?"bg-[rgb(var(--color-primary))] text-white":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-input))] hover:text-[rgb(var(--color-text-primary))]"}`,children:E});return g.jsx(di,{children:g.jsx(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-md z-40 flex items-center justify-center p-4",onClick:()=>e(!1),children:g.jsxs(Fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-[rgb(var(--color-card))] w-full max-w-2xl rounded-xl border border-[rgb(var(--color-border))] shadow-2xl flex flex-col max-h-[90vh]",onClick:_=>_.stopPropagation(),children:[g.jsx("div",{className:"p-6 border-b border-[rgb(var(--color-border))]",children:g.jsx("h2",{className:"text-xl font-bold text-[rgb(var(--color-text-primary))]",children:"Profile & Settings"})}),g.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[g.jsx("div",{className:"w-48 border-r border-[rgb(var(--color-border))] p-4 bg-[rgb(var(--color-sidebar))]/50",children:g.jsxs("nav",{className:"flex flex-col gap-2",children:[g.jsx(w,{id:"account",children:"Account"}),g.jsx(w,{id:"theme",children:"Theme"}),g.jsx(w,{id:"apikeys",children:"API Keys"})]})}),g.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:T()})]}),g.jsx("div",{className:"p-4 border-t border-[rgb(var(--color-border))] text-right bg-[rgb(var(--color-sidebar))] rounded-b-xl",children:g.jsx("button",{onClick:()=>e(!1),className:"px-4 py-2 bg-slate-700 text-[rgb(var(--color-text-primary))] rounded-lg hover:bg-slate-600 transition-colors",children:"Close"})})]})})})},YO={[xe.TUTOR]:"AI Tutor",[xe.SUBJECTS]:"Subjects",[xe.EXPLAINER]:"Topic Explainer",[xe.QUIZ]:"Quiz Generator",[xe.NEWS]:"Current Affairs",[xe.PLANNER]:"Study Planner",[xe.DASHBOARD]:"Dashboard",[xe.NOTES]:"Notes",[xe.HELP]:"Help"},JO=()=>{const{activeView:t,activeSubject:e}=Fn(),n=YO[t]||"Dashboard",i=()=>{window.dispatchEvent(new CustomEvent("toggle-global-assistant"))};return g.jsx("header",{className:"flex-shrink-0 bg-[rgb(var(--color-card))]/50 border-b border-[rgb(var(--color-border))] px-6 py-4",children:g.jsxs("div",{className:"flex items-start justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h1",{className:"text-2xl font-bold text-white",children:[n,t===xe.SUBJECTS&&e&&g.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))]",children:[": ",e]})]}),t===xe.TUTOR&&g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Your personal AI assistant for ALL GOV preparation."}),t===xe.NEWS&&g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Get daily news summaries powered by AI search."}),t===xe.PLANNER&&g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Organize your study schedule and generate AI-powered guides."}),t===xe.DASHBOARD&&g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"View subject-wise performance and track progress over time."}),t===xe.NOTES&&g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Create, manage, and review your saved notes."}),t===xe.HELP&&g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"How to use EASYWAY Tutor and its features."})]}),g.jsx("div",{className:"pt-1",children:g.jsx("button",{onClick:i,className:"text-sm px-3 py-2 rounded-md border border-[rgb(var(--color-border))] bg-[rgb(var(--color-input))] text-white hover:bg-[rgb(var(--color-input-hover))]","aria-label":"Toggle Global Assistant",children:"Global Assistant"})})]})})},KO=({children:t})=>g.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[g.jsx(JO,{}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:t})]}),QO=()=>{const{user:t,loading:e,signInWithGoogle:n}=hn(),{setActiveView:i,setExplainerPrefillTopic:o}=Fn(),[a,u]=A.useState([]),[h,p]=A.useState([]),[m,y]=A.useState(null),[x,T]=A.useState(!1),[w,_]=A.useState(null),[E,N]=A.useState(null),[I,M]=A.useState(null),[D,j]=A.useState(null),[P,z]=A.useState({}),[ee,Z]=A.useState("week"),[re,ye]=A.useState([]),[ce,ie]=A.useState(null),[Y,de]=A.useState(!1),[oe,U]=A.useState(!1),[G,fe]=A.useState(null),[ge,R]=A.useState(!1),[K,pe]=A.useState(!1),[he,ae]=A.useState(!1),[W,le]=A.useState("avg");if(A.useEffect(()=>{(async()=>{if(t){T(!0),_(null);try{const[{data:me,error:Le},{data:se,error:ke},{data:He,error:De},{data:ue,error:Te},{data:we,error:F},{data:te,error:Ce}]=await Promise.all([je.rpc("subject_analytics_combined"),je.rpc("recent_tests",{limit_n:20}),je.rpc("subject_strengths_weaknesses",{top_n:3}),je.rpc("common_mistakes",{limit_n:5}),je.rpc("open_quizzes_now"),je.from("competitive_quiz_attempts").select("quiz_id, score, accuracy, submitted_at").eq("user_id",t.id).order("submitted_at",{ascending:!1}).limit(1).maybeSingle()]);if(Le)throw Le;if(ke)throw ke;if(De)throw De;if(Te)throw Te;if(F)throw F;if(Ce)throw Ce;u(me||[]),p(se||[]);const Ee=Array.isArray(He)?He[0]:He,Se=Ee?{top_subjects:Array.isArray(Ee.top_subjects)?Ee.top_subjects:[],weak_subjects:Array.isArray(Ee.weak_subjects)?Ee.weak_subjects:[]}:null;y(Se),ye(Array.isArray(ue)?ue:[]),ie(te||null);const Be=Array.isArray(we)?we:[],pt=Date.now(),mt=Be.filter(ut=>new Date(ut.start_at).getTime()>pt).sort((ut,ct)=>new Date(ut.start_at).getTime()-new Date(ct.start_at).getTime())[0];fe(mt?{id:mt.id,title:mt.title,subject:mt.subject,start_at:mt.start_at,end_at:mt.end_at}:null)}catch(me){_(me.message||"Failed to load analytics")}finally{T(!1)}}})()},[t]),A.useEffect(()=>{try{const B=localStorage.getItem("dashShowAllSubjects"),me=localStorage.getItem("dashShowAllRecent"),Le=localStorage.getItem("dashShowAllSubjectsMini"),se=localStorage.getItem("dashMiniSortMetric");B!==null&&de(B==="1"),me!==null&&U(me==="1"),Le!==null&&ae(Le==="1"),(se==="avg"||se==="attempts")&&le(se)}catch{}},[]),A.useEffect(()=>{try{localStorage.setItem("dashShowAllSubjects",Y?"1":"0")}catch{}},[Y]),A.useEffect(()=>{try{localStorage.setItem("dashShowAllRecent",oe?"1":"0")}catch{}},[oe]),A.useEffect(()=>{try{localStorage.setItem("dashShowAllSubjectsMini",he?"1":"0")}catch{}},[he]),A.useEffect(()=>{try{localStorage.setItem("dashMiniSortMetric",W)}catch{}},[W]),A.useEffect(()=>{(async()=>{if(!(!t||!E))try{const me=ee==="month"?je.rpc("subject_trend_monthly",{subject_name:E,buckets:12}):je.rpc("subject_trend",{subject_name:E,buckets:12}),[{data:Le,error:se},{data:ke,error:He},{data:De,error:ue}]=await Promise.all([je.rpc("subject_topic_analytics",{subject_name:E}),me,je.rpc("tracked_topics_for_user")]);if(se||M(Le??[]),He||j(ke??[]),!ue){const Te=Array.isArray(De)?De.reduce((we,F)=>(we[F.topic]=!0,we),{}):{};z(Te)}if(t&&Array.isArray(Le)){const Te=Le.filter(we=>(we.accuracy??100)<60&&(we.attempts??0)>=3&&!P[we.topic]);if(Te.length){for(const te of Te)await je.from("tracked_topics").upsert({user_id:t.id,topic:te.topic,subject:E});const{data:we}=await je.rpc("tracked_topics_for_user"),F=Array.isArray(we)?we.reduce((te,Ce)=>(te[Ce.topic]=!0,te),{}):{};z(F)}}}catch{}})()},[t,E,ee]),e)return g.jsx("div",{className:"p-6",children:"Loading..."});if(!t)return g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Dashboard"}),g.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"Sign in to view your analytics."}),g.jsx("button",{onClick:n,className:"px-4 py-2 rounded-md bg-[rgb(var(--color-primary))] text-white",children:"Sign in with Google"})]});const J=A.useMemo(()=>Math.max(1,...a.map(B=>B.avg_score||0)),[a]);return g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Dashboard"}),w&&g.jsx("div",{className:"p-3 rounded-md bg-red-900/30 border border-red-800 text-red-200",children:w}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"p-4 rounded-lg border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsx("h3",{className:"font-medium mb-3",children:"Subject-wise Performance"}),x?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Loading..."}):a.length===0?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No data yet. Take a quiz to see analytics."}):g.jsxs("div",{className:"space-y-2",children:[(()=>{const B=a.slice().sort((Le,se)=>W==="avg"?(se.avg_score||0)-(Le.avg_score||0):(se.tests_count||0)-(Le.tests_count||0));return he?B:B.slice(0,3)})().map(B=>g.jsxs("button",{onClick:()=>N(B.subject),className:"w-full text-left",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[g.jsx("span",{children:B.subject}),g.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))]",children:[Math.round(B.avg_score),"%"]})]}),g.jsxs("div",{className:"p-4 rounded-lg border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsx("h3",{className:"font-medium mb-3",children:"Upcoming Competitive"}),x?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Loading..."}):G?g.jsxs("div",{className:"text-sm",children:[g.jsx("div",{className:"font-semibold truncate",children:G.title}),g.jsx("div",{className:"text-[rgb(var(--color-text-secondary))]",children:G.subject}),g.jsxs("div",{className:"mt-1 text-xs text-[rgb(var(--color-text-secondary))]",children:["Starts: ",new Date(G.start_at).toLocaleString()]}),g.jsx("div",{className:"mt-2",children:g.jsx("button",{className:"px-3 py-1 rounded-md bg-[rgb(var(--color-input))]",onClick:()=>i(xe.COMPETITION),children:"Go to Competitive"})})]}):g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No upcoming quizzes."})]}),g.jsxs("div",{className:"p-4 rounded-lg border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsx("h3",{className:"font-medium mb-1",children:"My Competitive Result"}),x?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Loading..."}):ce?g.jsxs("div",{className:"text-sm",children:[g.jsxs("div",{children:["Score: ",g.jsx("span",{className:"font-semibold",children:ce.score??"-"})]}),g.jsxs("div",{children:["Accuracy: ",g.jsxs("span",{className:"font-semibold",children:[ce.accuracy!==null&&ce.accuracy!==void 0?Number(ce.accuracy).toFixed(2):"-","%"]})]}),g.jsxs("div",{className:"text-[rgb(var(--color-text-secondary))]",children:["Submitted: ",ce.submitted_at?new Date(ce.submitted_at).toLocaleString():"-"]}),ce.quiz_id&&g.jsx("div",{className:"mt-2",children:g.jsx("button",{onClick:()=>{try{localStorage.setItem("openLeaderboardQuiz",ce.quiz_id)}catch{}i(xe.COMPETITION)},className:"px-3 py-1 rounded-md bg-[rgb(var(--color-input))]",children:"View Leaderboard"})})]}):g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No competitive attempt yet."})]}),g.jsx("div",{className:"h-3 bg-slate-800 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-3 bg-[rgb(var(--color-primary))]",style:{width:`${B.avg_score/J*100}%`}})})]},B.subject)),g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[g.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Top by"}),g.jsxs("div",{className:"inline-flex overflow-hidden rounded border border-[rgb(var(--color-border))]",children:[g.jsx("button",{className:`px-2 py-1 ${W==="avg"?"bg-[rgb(var(--color-primary))] text-white":"bg-[rgb(var(--color-input))]"}`,onClick:()=>le("avg"),children:"Avg"}),g.jsx("button",{className:`px-2 py-1 ${W==="attempts"?"bg-[rgb(var(--color-primary))] text-white":"bg-[rgb(var(--color-input))]"}`,onClick:()=>le("attempts"),children:"Attempts"})]})]}),g.jsx("button",{className:"px-3 py-1 text-xs rounded-md bg-[rgb(var(--color-input))]",onClick:()=>ae(B=>!B),children:he?"Collapse":"Show all"})]})]})]}),g.jsxs("div",{className:"p-4 rounded-lg border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsx("h3",{className:"font-medium mb-2",children:"Strengths & Improvements"}),x?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Loading..."}):m?g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold mb-1",children:"Top"}),g.jsx("ul",{className:"text-sm list-disc pl-5 space-y-1",children:(ge?m.top_subjects:(m.top_subjects||[]).slice(0,3)).map(B=>g.jsx("li",{children:B},B))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold mb-1",children:"Needs Improvement"}),g.jsx("ul",{className:"text-sm list-disc pl-5 space-y-1",children:(ge?m.weak_subjects:(m.weak_subjects||[]).slice(0,3)).map(B=>g.jsx("li",{children:B},B))})]})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{className:"px-3 py-1 text-xs rounded-md bg-[rgb(var(--color-input))]",onClick:()=>R(B=>!B),children:ge?"Show less":"Show all"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold mb-1",children:"Frequent Mistakes"}),re.length===0?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No mistakes recorded yet."}):g.jsxs("div",{className:"space-y-1",children:[(K?re:re.slice(0,3)).map((B,me)=>g.jsxs("div",{className:"flex items-center justify-between text-sm p-2 rounded-md border border-[rgb(var(--color-border))]",children:[g.jsxs("div",{className:"min-w-0",children:[g.jsxs("div",{className:"font-medium truncate",children:[B.subject,B.topic?` · ${B.topic}`:""]}),g.jsxs("div",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:["Mistakes: ",B.mistakes,B.last_seen?` • Last seen ${new Date(B.last_seen).toLocaleDateString()}`:""]})]}),g.jsx("button",{className:"px-2 py-1 text-xs rounded-md bg-[rgb(var(--color-input))]",onClick:()=>N(B.subject),children:"Drill down"})]},me)),re.length>3&&g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{className:"px-3 py-1 text-xs rounded-md bg-[rgb(var(--color-input))]",onClick:()=>pe(B=>!B),children:K?"Show less":"Show all"})})]})]})]}):g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No data yet."})]}),g.jsxs("div",{className:"p-4 rounded-lg border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsx("h3",{className:"font-medium mb-3",children:"Subject-wise Performance"}),x?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Loading..."}):a.length===0?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No data yet."}):g.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Attempt Distribution"}),(()=>{const B=Y?a:a.slice(0,3),me=B.reduce((De,ue)=>De+Number(ue.tests_count||0),0),Le=["#60a5fa","#f59e0b","#34d399","#f472b6","#22d3ee","#a78bfa","#f87171"];let se=0;const He=`conic-gradient(${B.map((De,ue)=>{const Te=me>0?Number(De.tests_count)/me:0,we=se*100;se+=Te;const F=se*100;return`${Le[ue%Le.length]} ${we}% ${F}%`}).join(", ")})`;return g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-32 h-32 rounded-full",style:{backgroundImage:He}}),g.jsx("div",{className:`space-y-1 ${Y?"":"max-h-40 overflow-y-auto pr-2"}`,children:B.map((De,ue)=>g.jsxs("button",{onClick:()=>N(De.subject),className:"flex items-center gap-2 text-sm w-full text-left hover:bg-[rgb(var(--color-input))] px-1 py-0.5 rounded",children:[g.jsx("span",{className:"inline-block w-3 h-3 rounded-sm",style:{backgroundColor:Le[ue%Le.length]}}),g.jsx("span",{className:"truncate max-w-[140px]",children:De.subject}),g.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))]",children:["(",De.tests_count,")"]})]},De.subject))})]})})()]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Average Score by Subject"}),g.jsx("div",{className:`space-y-2 ${Y?"":"max-h-56 overflow-y-auto pr-2"}`,children:(Y?a:a.slice(0,3)).map(B=>{const me=Math.max(0,Math.min(100,Number(B.avg_score)));return g.jsxs("button",{onClick:()=>N(B.subject),className:"w-full text-left",children:[g.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[g.jsx("span",{className:"truncate max-w-[160px]",children:B.subject}),g.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))]",children:[me,"%"]})]}),g.jsx("div",{className:"w-full h-3 bg-[rgb(var(--color-input))] rounded",children:g.jsx("div",{className:"h-3 rounded bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))]",style:{width:`${me}%`}})})]},B.subject)})})]}),g.jsx("div",{className:"md:col-span-2 flex justify-end",children:g.jsx("button",{className:"px-3 py-1 text-xs rounded-md bg-[rgb(var(--color-input))]",onClick:()=>de(B=>!B),children:Y?"Collapse":"Show all"})})]})]}),g.jsxs("div",{className:"md:col-span-2 p-4 rounded-lg border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsx("h3",{className:"font-medium mb-3",children:"Recent Tests"}),x?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"Loading..."}):h.length===0?g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No recent tests."}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`overflow-x-auto ${oe?"":"max-h-72 overflow-y-auto pr-2"}`,children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"text-left text-[rgb(var(--color-text-secondary))]",children:[g.jsx("th",{className:"py-2",children:"Date"}),g.jsx("th",{children:"Subject"}),g.jsx("th",{children:"Score"})]})}),g.jsx("tbody",{children:h.map(B=>g.jsxs("tr",{className:"border-t border-[rgb(var(--color-border))]",children:[g.jsx("td",{className:"py-2",children:new Date(B.taken_at).toLocaleString()}),g.jsx("td",{children:B.subject}),g.jsxs("td",{children:[B.score,"%"]})]},B.id))})]})}),g.jsx("div",{className:"mt-2 flex justify-end",children:g.jsx("button",{className:"px-3 py-1 text-xs rounded-md bg-[rgb(var(--color-input))]",onClick:()=>U(B=>!B),children:oe?"Collapse":"Show all"})})]})]})]}),E&&g.jsxs("div",{className:"p-4 rounded-lg border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("h3",{className:"font-medium",children:["Details: ",E]}),g.jsx("button",{className:"px-3 py-1 text-sm rounded-md bg-[rgb(var(--color-input))]",onClick:()=>N(null),children:"Close"})]}),g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:"Trend:"}),g.jsxs("div",{className:"inline-flex rounded-md overflow-hidden border border-[rgb(var(--color-border))]",children:[g.jsx("button",{className:`px-3 py-1 text-xs ${ee==="week"?"bg-[rgb(var(--color-primary))] text-white":"bg-[rgb(var(--color-input))]"}`,onClick:()=>Z("week"),children:"Weekly"}),g.jsx("button",{className:`px-3 py-1 text-xs ${ee==="month"?"bg-[rgb(var(--color-primary))] text-white":"bg-[rgb(var(--color-input))]"}`,onClick:()=>Z("month"),children:"Monthly"})]})]}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-2",children:"Recent attempts:"}),g.jsx("ul",{className:"text-sm list-disc pl-5 space-y-1",children:h.filter(B=>B.subject===E).slice(0,12).map(B=>g.jsxs("li",{children:[new Date(B.taken_at).toLocaleString()," — ",B.score,"%"]},B.id))})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-2",children:"Trend (last 12):"}),D&&D.length>0?g.jsx("div",{className:"space-y-2",children:D.map((B,me)=>g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[g.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:B.bucket}),g.jsxs("span",{children:[Math.round(B.avg_score),"%"]})]}),g.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-2 bg-emerald-500",style:{width:`${Math.min(100,Math.max(0,B.avg_score))}%`}})})]},me))}):g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No trend yet."})]})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx("h4",{className:"font-medium mb-2",children:"Topics to improve"}),I&&I.length>0?g.jsx("div",{className:"space-y-2",children:I.slice().sort((B,me)=>B.accuracy-me.accuracy||me.attempts-B.attempts).map(B=>g.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 rounded-md border border-[rgb(var(--color-border))]",children:[g.jsxs("div",{className:"min-w-0",children:[g.jsxs("div",{className:"text-sm font-medium truncate flex items-center gap-2",children:[g.jsx("span",{children:B.topic}),P[B.topic]&&B.accuracy>=75&&B.attempts>=5&&g.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-emerald-700/30 text-emerald-300 border border-emerald-600",children:"Improved"})]}),g.jsxs("div",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:["Accuracy ",Math.round(B.accuracy),"% • Attempts ",B.attempts,B.last_seen?` • Last seen ${new Date(B.last_seen).toLocaleDateString()}`:""]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{className:`px-2 py-1 text-xs rounded-md ${P[B.topic]?"bg-amber-500/20 text-amber-300":"bg-[rgb(var(--color-input))]"}`,onClick:async()=>{try{P[B.topic]?(await je.from("tracked_topics").delete().match({user_id:t.id,topic:B.topic}),z(me=>({...me,[B.topic]:!1}))):(await je.from("tracked_topics").upsert({user_id:t.id,topic:B.topic,subject:E}),z(me=>({...me,[B.topic]:!0})))}catch{}},children:P[B.topic]?"Tracking":"Track"}),g.jsx("button",{className:"px-2 py-1 text-xs rounded-md bg-[rgb(var(--color-primary))] text-white",onClick:()=>{o(`${E}: ${B.topic}`),i(xe.EXPLAINER)},children:"Practice"})]})]},B.topic))}):g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:"No topic analytics found."})]})]})]})},WO=()=>{const{user:t,loading:e,signInWithGoogle:n}=hn(),[i,o]=A.useState([]),[a,u]=A.useState(!1),[h,p]=A.useState(null);return A.useEffect(()=>{(async()=>{if(!t)return;u(!0);const{data:y,error:x}=await je.from("notes").select("id, title, content, created_at, updated_at, source").order("updated_at",{ascending:!1});x||o(y||[]),u(!1)})()},[t]),e?g.jsx("div",{className:"p-6",children:"Loading..."}):t?g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Notes"}),g.jsx("button",{className:"px-3 py-2 text-sm rounded-md border border-[rgb(var(--color-border))] bg-[rgb(var(--color-input))] text-white",children:"New Note"})]}),a?g.jsx("div",{children:"Loading notes…"}):i.length===0?g.jsx("div",{className:"text-[rgb(var(--color-text-secondary))]",children:"No notes yet. Save from Global Assistant or Topic Explainer."}):g.jsx("div",{className:"grid md:grid-cols-2 xl:grid-cols-3 gap-4",children:i.map(m=>g.jsxs("button",{onClick:()=>p(m),className:"text-left p-4 rounded-lg border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50 hover:bg-[rgb(var(--color-card))] transition-colors focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-primary))]",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("h3",{className:"font-medium truncate",children:m.title}),g.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))] capitalize",children:m.source})]}),g.jsx("div",{className:"text-sm text-[rgb(var(--color-text-secondary))] line-clamp-5 whitespace-pre-wrap",children:m.content})]},m.id))}),h&&g.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[g.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>p(null)}),g.jsxs("div",{className:"relative z-10 w-full max-w-3xl max-h-[85vh] overflow-hidden rounded-xl border border-[rgb(var(--color-border))] bg-[rgb(var(--color-sidebar))] shadow-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-[rgb(var(--color-border))]",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold truncate",children:h.title}),g.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:new Date(h.updated_at).toLocaleString()})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))] capitalize px-2 py-1 rounded bg-[rgb(var(--color-card))]",children:h.source}),g.jsx("button",{onClick:()=>p(null),className:"px-3 py-1.5 text-xs rounded-md bg-[rgb(var(--color-input))] hover:bg-slate-600",children:"Close"})]})]}),g.jsx("div",{className:"px-4 py-3 overflow-y-auto max-h-[calc(85vh-56px)]",children:g.jsx($n,{content:h.content})})]})]})]}):g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Notes"}),g.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"Sign in to manage your notes."}),g.jsx("button",{onClick:n,className:"px-4 py-2 rounded-md bg-[rgb(var(--color-primary))] text-white",children:"Sign in with Google"})]})},XO=()=>g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Help & How to Use"}),g.jsxs("div",{className:"space-y-4 text-[rgb(var(--color-text-secondary))]",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white mb-2",children:"Global Assistant"}),g.jsxs("ul",{className:"list-disc ml-6 space-y-1",children:[g.jsx("li",{children:'Use the header button "Global Assistant" to toggle it.'}),g.jsx("li",{children:"Drag it anywhere on screen; position is saved. Press Alt+G to reset."}),g.jsx("li",{children:"Save helpful responses to Notes (button will appear in future update)."})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white mb-2",children:"AI Tutor & Subjects"}),g.jsxs("ul",{className:"list-disc ml-6 space-y-1",children:[g.jsx("li",{children:"Ask questions in the Tutor view."}),g.jsx("li",{children:"Pick a subject in Subjects to focus your practice."})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white mb-2",children:"Topic Explainer"}),g.jsxs("ul",{className:"list-disc ml-6 space-y-1",children:[g.jsx("li",{children:"Generate an explanation; it will render on-page."}),g.jsx("li",{children:'Use "Save to Notes" to keep the explanation (coming in update).'})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white mb-2",children:"Quiz Generator"}),g.jsxs("ul",{className:"list-disc ml-6 space-y-1",children:[g.jsx("li",{children:"Configure topic and difficulty and start a quiz."}),g.jsx("li",{children:"Your test results will be saved to Supabase and appear in Dashboard (after integration step)."})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white mb-2",children:"Notes"}),g.jsxs("ul",{className:"list-disc ml-6 space-y-1",children:[g.jsx("li",{children:"View notes saved from the Assistant or Explainer."}),g.jsx("li",{children:"Create, edit, and delete notes (CRUD coming in update)."})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-white mb-2",children:"Auth & Sync"}),g.jsxs("ul",{className:"list-disc ml-6 space-y-1",children:[g.jsx("li",{children:"Sign in with Google to sync data to Supabase."}),g.jsx("li",{children:"Make sure you configured Google provider and redirect URL in Supabase."})]})]})]})]}),ZO=()=>{const{signInWithGoogle:t,loading:e}=hn();return g.jsx("div",{className:"flex items-center justify-center h-full w-full",children:g.jsxs("div",{className:"max-w-md w-full p-8 rounded-xl border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50 text-center",children:[g.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Welcome to EASYWAY Tutor"}),g.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] mb-6",children:"Sign in to get personalized analytics, save notes, and more."}),g.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-lg bg-[rgb(var(--color-primary))] text-white hover:bg-[rgb(var(--color-primary-hover))] disabled:bg-slate-600",disabled:e,children:"Continue with Google"})]})})},Vw=t=>{const[e,n]=A.useState(null),[i,o]=A.useState(!!t),[a,u]=A.useState(null),h=A.useCallback(async()=>{if(!t||!Mt)return;o(!0),u(null);const{data:m,error:y}=await je.from("profiles").select("*").eq("user_id",t).maybeSingle();y&&u(y.message),n(m??null),o(!1)},[t]);A.useEffect(()=>{h()},[h]);const p=A.useCallback(async m=>{if(!t||!Mt)return{error:new Error("Supabase disabled")};const y={user_id:t,full_name:m.full_name??null,study_goal:m.study_goal??null},{error:x}=await je.from("profiles").upsert(y,{onConflict:"user_id"});return x||await h(),{error:x}},[t,h]);return{profile:e,loading:i,error:a,refresh:h,upsertProfile:p}},e4=({onDone:t})=>{const{user:e}=hn(),{upsertProfile:n}=Vw((e==null?void 0:e.id)??null),[i,o]=A.useState(""),[a,u]=A.useState(""),[h,p]=A.useState(!1),m=async y=>{y.preventDefault(),p(!0);const{error:x}=await n({full_name:i,study_goal:a});p(!1),x?alert("Failed to save profile: "+x.message):t()};return g.jsx("div",{className:"flex items-center justify-center h-full w-full",children:g.jsxs("form",{onSubmit:m,className:"max-w-lg w-full p-8 rounded-xl border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Complete your profile"}),g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-6",children:"Tell us a bit about you to personalize analytics."}),g.jsx("label",{className:"block text-sm mb-1",children:"Full name"}),g.jsx("input",{className:"w-full mb-4 p-2 rounded-md bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))]",value:i,onChange:y=>o(y.target.value),required:!0}),g.jsx("label",{className:"block text-sm mb-1",children:"Study goal"}),g.jsx("input",{className:"w-full mb-6 p-2 rounded-md bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))]",value:a,onChange:y=>u(y.target.value),placeholder:"e.g., Crack UPSC Prelims 2025"}),g.jsx("button",{type:"submit",className:"w-full px-4 py-3 rounded-lg bg-[rgb(var(--color-primary))] text-white hover:bg-[rgb(var(--color-primary-hover))] disabled:bg-slate-600",disabled:h,children:h?"Saving...":"Continue"})]})})},t4=()=>{const{user:t,signInWithGoogle:e}=hn(),[n,i]=A.useState(!1),[o,a]=A.useState(null),[u,h]=A.useState([]),[p,m]=A.useState([]),[y,x]=A.useState(null),[T,w]=A.useState(null),[_,E]=A.useState({}),[N,I]=A.useState(null),[M,D]=A.useState(!1),[j,P]=A.useState(null),[z,ee]=A.useState(null),[Z,re]=A.useState(null),[ye,ce]=A.useState(!1),[ie,Y]=A.useState({}),[de,oe]=A.useState(null),[U,G]=A.useState(Date.now()),[fe,ge]=A.useState("live"),[R,K]=A.useState("all"),[pe,he]=A.useState(""),[ae,W]=A.useState("newest"),[le,J]=A.useState(1),B=10,me=ue=>{const Te=Date.now();return Te>=new Date(ue.start_at).getTime()&&Te<=new Date(ue.end_at).getTime()},Le=ue=>Date.now()<new Date(ue.start_at).getTime();A.useEffect(()=>{const ue=setInterval(()=>G(Date.now()),1e3);return()=>clearInterval(ue)},[]);const se=A.useCallback(async ue=>{try{ce(!0),ee(ue),re(null);const{data:Te,error:we}=await je.rpc("leaderboard",{p_quiz_id:ue.id,p_limit:100});if(we)throw we;re(Array.isArray(Te)?Te:[])}catch(Te){re([]),alert(Te.message||"Failed to load leaderboard (may be unpublished).")}finally{ce(!1)}},[]),ke=A.useCallback(async()=>{if(!Mt)return;i(!0),a(null);const{data:ue,error:Te}=await je.rpc("open_quizzes_now");Te&&a(Te.message);const we=Array.isArray(ue)?ue:[];if(h(we),t&&we.length>0){const F=we.map(Ee=>Ee.id),{data:te,error:Ce}=await je.from("competitive_quiz_attempts").select("quiz_id").in("quiz_id",F).eq("user_id",t.id);if(!Ce&&Array.isArray(te)){const Ee={};F.forEach(Se=>{Ee[Se]=!1}),te.forEach(Se=>{Ee[Se.quiz_id]=!0}),Y(Ee)}else Y({})}if(t){const{data:F}=await je.from("competitive_quiz_attempts").select("quiz_id, submitted_at").eq("user_id",t.id).order("submitted_at",{ascending:!1}),te=(F||[]).map(Ce=>Ce.quiz_id);if(te.length>0){const{data:Ce}=await je.from("competitive_quizzes").select("id, title, subject, description, start_at, end_at, duration_seconds, published_leaderboard, quiz_focus").in("id",te).lt("end_at",new Date().toISOString()).order("start_at",{ascending:!1}),Ee={};(F||[]).forEach(Be=>{Ee[Be.quiz_id]=Be.submitted_at});const Se=(Ce||[]).map(Be=>({...Be,submitted_at:Ee[Be.id]||null}));m(Se)}else m([])}i(!1)},[t]);A.useEffect(()=>{ke()},[ke]),A.useEffect(()=>{try{const ue=localStorage.getItem("openLeaderboardQuiz");if(ue&&u.length>0){const Te=u.find(we=>we.id===ue);Te&&(se(Te),localStorage.removeItem("openLeaderboardQuiz"))}}catch{}},[u,se]);const He=async ue=>{if(!t){await e();return}if(!Mt){alert("Supabase not configured");return}if(ie[ue.id]){alert("You have already submitted this quiz. Please wait for results.");return}try{i(!0),a(null);const{data:Te,error:we}=await je.rpc("quiz_payload",{p_quiz_id:ue.id});if(we)throw we;const F=Te||[];x(ue),w(F);const te={};F.forEach(Ce=>{te[Ce.question_id]=null}),E(te),I(ue.duration_seconds)}catch(Te){a(Te.message||"Failed to load quiz")}finally{i(!1)}};A.useEffect(()=>{if(y&&N!==null){if(N<=0){De();return}const ue=setTimeout(()=>I(Te=>Te!==null?Te-1:Te),1e3);return()=>clearTimeout(ue)}},[y,N]);const De=A.useCallback(async()=>{var ue,Te;if(!(!y||!T)){if(!t){await e();return}D(!0),P(null);try{const we=Object.keys(_).map(Se=>({question_id:Se,chosen_index:_[Se]})),{data:F,error:te}=await je.rpc("submit_competitive_attempt",{p_quiz_id:y.id,p_answers:we});if(te)throw te;const Ce=Array.isArray(F)?F[0]:F;P(`Submitted! Score ${(Ce==null?void 0:Ce.score)??0}, Accuracy ${((Te=(ue=Ce==null?void 0:Ce.accuracy)==null?void 0:ue.toFixed)==null?void 0:Te.call(ue,2))??(Ce==null?void 0:Ce.accuracy)}%`),oe("Submission received!"),setTimeout(()=>oe(null),3e3);const Ee=y;x(null),w(null),E({}),I(null),await ke(),Ee!=null&&Ee.published_leaderboard&&await se(Ee)}catch(we){P(`Submit failed: ${we.message||we}`)}finally{D(!1)}}},[y,T,_,t,e,ke]);return t?y&&T?g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h2",{className:"text-xl font-semibold",children:[y.title," — ",y.subject]}),g.jsxs("div",{className:"text-sm bg-[rgb(var(--color-input))] px-3 py-1 rounded-md",children:["Time left: ",N??0,"s"]})]}),j&&g.jsx("div",{className:"p-3 rounded bg-[rgb(var(--color-input))]",children:j}),g.jsx("div",{className:"space-y-3",children:T.map((ue,Te)=>{var we;return g.jsxs(Je,{children:[g.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-1",children:["Question ",Te+1]}),g.jsx("div",{className:"font-medium mb-2",children:ue.question}),g.jsx("div",{className:"space-y-2",children:(Array.isArray(ue.options)?ue.options:((we=ue.options)==null?void 0:we.options)||[]).map((F,te)=>g.jsx("button",{className:`w-full text-left p-2 rounded-md border ${_[ue.question_id]===te?"border-[rgb(var(--color-accent))]":"border-[rgb(var(--color-border))]"}`,onClick:()=>E(Ce=>({...Ce,[ue.question_id]:te})),children:F},te))})]},ue.question_id)})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{disabled:M,onClick:De,className:"px-4 py-2 rounded-md bg-[rgb(var(--color-primary))] text-white disabled:bg-slate-600",children:"Submit"}),g.jsx("button",{onClick:()=>{x(null),w(null),E({}),I(null),P(null)},className:"px-4 py-2 rounded-md bg-[rgb(var(--color-input))]",children:"Cancel"})]})]}):g.jsxs("div",{className:"p-6 space-y-4",children:[de&&g.jsx("div",{className:"fixed top-4 right-4 z-40 px-4 py-2 rounded-md bg-emerald-600 text-white shadow-lg",children:de}),g.jsx("h2",{className:"text-xl font-semibold",children:"Competitive Quizzes"}),g.jsxs("div",{className:"flex items-center gap-2",children:[["live","upcoming","past"].map(ue=>g.jsx("button",{className:`px-3 py-1 rounded-md ${fe===ue?"bg-[rgb(var(--color-primary))] text-white":"bg-[rgb(var(--color-input))]"}`,onClick:()=>{ge(ue),J(1)},children:ue.charAt(0).toUpperCase()+ue.slice(1)},ue)),g.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[g.jsx("input",{value:pe,onChange:ue=>{he(ue.target.value),J(1)},placeholder:"Search title/desc",className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))]"}),g.jsxs("select",{value:R,onChange:ue=>{K(ue.target.value),J(1)},className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))]",children:[g.jsx("option",{value:"all",children:"All subjects"}),Array.from(new Set((fe==="past"?p:u).map(ue=>ue.subject))).map(ue=>g.jsx("option",{value:ue,children:ue},ue))]}),g.jsxs("select",{value:ae,onChange:ue=>W(ue.target.value),className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] border border-[rgb(var(--color-border))]",children:[g.jsx("option",{value:"newest",children:"Newest"}),g.jsx("option",{value:"oldest",children:"Oldest"})]})]})]}),n&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(qt,{})," Loading…"]}),o&&g.jsx("div",{className:"p-3 rounded bg-red-900/30 border border-red-800 text-red-200",children:o}),(()=>{let ue=[];fe==="live"?ue=u.filter(Se=>me(Se)):fe==="upcoming"?ue=u.filter(Se=>Le(Se)):ue=p;const Te=ue.filter(Se=>(R==="all"||Se.subject===R)&&(Se.title+" "+(Se.description||"")).toLowerCase().includes(pe.toLowerCase()));Te.sort((Se,Be)=>ae==="newest"?new Date(Be.start_at).getTime()-new Date(Se.start_at).getTime():new Date(Se.start_at).getTime()-new Date(Be.start_at).getTime());const we=Te.length,F=Math.max(1,Math.ceil(we/B)),te=Math.min(le,F),Ce=(te-1)*B,Ee=Te.slice(Ce,Ce+B);return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Ee.length===0&&!n?g.jsx("div",{className:"text-[rgb(var(--color-text-secondary))]",children:"No quizzes."}):Ee.map(Se=>g.jsxs(Je,{children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-semibold",children:Se.title}),g.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:[Se.subject," • ",new Date(Se.start_at).toLocaleString()," → ",new Date(Se.end_at).toLocaleString()]})]}),me(Se)?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>He(Se),className:"px-3 py-1 rounded-md bg-[rgb(var(--color-primary))] text-white",children:"Start"}),g.jsx("span",{className:"px-3 py-1 rounded-md bg-[rgb(var(--color-input))]",children:(()=>{const Be=new Date(Se.end_at).getTime()-U,pt=Math.max(0,Math.floor(Be/1e3)),mt=Math.floor(pt/60),ut=pt%60;return`Ends in ${mt}m ${ut}s`})()})]}):Le(Se)?g.jsx("span",{className:"px-3 py-1 rounded-md bg-[rgb(var(--color-input))]",children:(()=>{const Be=new Date(Se.start_at).getTime()-U,pt=Math.max(0,Math.floor(Be/1e3)),mt=Math.floor(pt/60),ut=pt%60;return`Starts in ${mt}m ${ut}s`})()}):g.jsx("span",{className:"px-3 py-1 rounded-md bg-[rgb(var(--color-input))]",children:"Closed"})]}),Se.description&&g.jsx("p",{className:"mt-2 text-sm text-[rgb(var(--color-text-secondary))]",children:Se.description}),Se.quiz_focus&&g.jsxs("p",{className:"mt-1 text-xs text-[rgb(var(--color-text-secondary))]",children:[g.jsx("span",{className:"font-semibold",children:"Focus:"})," ",Se.quiz_focus]}),ie[Se.id]&&g.jsx("p",{className:"mt-2 text-xs text-amber-300",children:"You have already taken this quiz. You can\\'t retake it."}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("button",{className:"px-3 py-1 rounded-md bg-[rgb(var(--color-input))]",onClick:()=>se(Se),children:"View Leaderboard"}),Se.published_leaderboard?g.jsx("span",{className:"text-xs text-emerald-300",children:"Published"}):g.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:"Unpublished"})]})]},Se.id))}),g.jsxs("div",{className:"flex items-center justify-between mt-3",children:[g.jsxs("div",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:["Page ",te," of ",F]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{disabled:te<=1,onClick:()=>J(Se=>Math.max(1,Se-1)),className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] disabled:opacity-50",children:"Prev"}),g.jsx("button",{disabled:te>=F,onClick:()=>J(Se=>Math.min(F,Se+1)),className:"px-2 py-1 rounded bg-[rgb(var(--color-input))] disabled:opacity-50",children:"Next"})]})]})]})})(),g.jsx("div",{className:"mt-3",children:g.jsx("button",{onClick:ke,className:"px-3 py-1 rounded-md bg-[rgb(var(--color-input))]",children:"Refresh"})}),z&&g.jsxs(Je,{children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h3",{className:"font-semibold",children:["Leaderboard — ",z.title]}),g.jsx("button",{className:"px-2 py-1 text-xs rounded bg-[rgb(var(--color-input))]",onClick:()=>{ee(null),re(null)},children:"Close"})]}),ye?g.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[g.jsx(qt,{})," Loading…"]}):Z&&Z.length>0?g.jsx("div",{className:"mt-2 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"text-left text-[rgb(var(--color-text-secondary))]",children:[g.jsx("th",{className:"py-2",children:"Rank"}),g.jsx("th",{children:"User"}),g.jsx("th",{children:"Score"}),g.jsx("th",{children:"Time (s)"}),g.jsx("th",{children:"Submitted"})]})}),g.jsx("tbody",{children:Z.map((ue,Te)=>g.jsxs("tr",{className:`border-t border-[rgb(var(--color-border))] ${ue.user_id===(t==null?void 0:t.id)?"bg-[rgb(var(--color-input))]":""}`,children:[g.jsx("td",{className:"py-2",children:ue.rank}),g.jsx("td",{className:"truncate max-w-[180px]",children:ue.user_id===(t==null?void 0:t.id)?"You":ue.user_id}),g.jsx("td",{children:ue.score??"-"}),g.jsx("td",{children:ue.time_taken_seconds??"-"}),g.jsx("td",{children:ue.submitted_at?new Date(ue.submitted_at).toLocaleString():"-"})]},Te))})]})}):g.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mt-2",children:"No leaderboard yet or not published."})]})]}):g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Competitive Quizzes"}),g.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] mb-3",children:"Sign in to participate in competitive quizzes."}),g.jsx("button",{className:"px-4 py-2 rounded-md bg-[rgb(var(--color-primary))] text-white",onClick:()=>e(),children:"Sign in with Google"})]})},n4=()=>{const{user:t}=hn(),e=((t==null?void 0:t.email)||"").toLowerCase()==="info.edensnews@gmail.com",[n,i]=A.useState(!1),[o,a]=A.useState(null),[u,h]=A.useState([]),[p,m]=A.useState([]),[y,x]=A.useState(""),[T,w]=A.useState("all"),[_,E]=A.useState([]),[N,I]=A.useState(""),[M,D]=A.useState("all"),[j,P]=A.useState(""),[z,ee]=A.useState(""),[Z,re]=A.useState(""),[ye,ce]=A.useState(""),[ie,Y]=A.useState(""),[de,oe]=A.useState(600),[U,G]=A.useState([{question:"",options:["","","",""],correct_index:0,points:1}]),[fe,ge]=A.useState(10),[R,K]=A.useState("Medium"),pe=A.useMemo(()=>p.filter(se=>{const ke=se.email.toLowerCase().includes(y.toLowerCase()),He=se.last_sign_in_at!==null;return ke&&(T==="all"||T==="active"&&He||T==="inactive"&&!He)}),[p,y,T]),he=A.useMemo(()=>new vi,[]),ae=A.useCallback(()=>G(se=>[...se,{question:"",options:["","","",""],correct_index:0,points:1}]),[G]),W=A.useCallback(se=>G(ke=>ke.filter((He,De)=>De!==se)),[G]),le=A.useCallback(async()=>{if(!Mt)return;i(!0),a(null);const{data:se,error:ke}=await je.from("competitive_quizzes").select("id, title, subject, description, start_at, end_at, duration_seconds, published_leaderboard").order("start_at",{ascending:!1});ke&&a(ke.message),h(Array.isArray(se)?se:[]),i(!1)},[]),J=A.useCallback(async()=>{if(!Mt)return;i(!0),a(null);const{data:se,error:ke}=await je.rpc("admin_get_all_users");ke&&a(ke.message),m(Array.isArray(se)?se:[]),i(!1)},[]);A.useEffect(()=>{e&&(le(),J())},[e,le,J]);const B=async()=>{if(e){if(!j||!z||!ie){alert("Please fill title, subject, and start time");return}try{i(!0),a(null);const se=new Date(ie).toISOString(),ke=new Date(new Date(ie).getTime()+de*1e3).toISOString(),{data:He,error:De}=await je.from("competitive_quizzes").insert({title:j,subject:z,description:Z||null,quiz_focus:ye||null,start_at:se,end_at:ke,duration_seconds:de}).select("id").single();if(De)throw De;const ue=He==null?void 0:He.id;if(ue&&U.length>0){const Te=U.map((F,te)=>({quiz_id:ue,question:F.question,options:F.options,correct_index:F.correct_index,points:F.points||1,order_index:te})),{error:we}=await je.from("competitive_quiz_questions").insert(Te);if(we)throw we}P(""),ee(""),re(""),ce(""),Y(""),oe(600),G([{question:"",options:["","","",""],correct_index:0,points:1}]),await le(),alert("Quiz created")}catch(se){a(se.message||"Failed to create quiz")}finally{i(!1)}}},me=async()=>{if(!z){alert("Please set subject");return}try{i(!0),a(null);const se=ye?`${z} — Focus: ${ye}`:z,He=(await he.generateSubjectQuiz(se,fe,R)).map(De=>({question:De.question,options:De.options,correct_index:De.correctAnswerIndex,points:1}));G(He)}catch(se){a(se.message||"Failed to generate questions")}finally{i(!1)}},Le=async se=>{if(e)try{const{error:ke}=await je.from("competitive_quizzes").update({published_leaderboard:!se.published_leaderboard}).eq("id",se.id);if(ke)throw ke;await le()}catch(ke){alert(ke.message||"Failed to toggle leaderboard")}};return e?g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Admin — Competitive Quizzes"}),n&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(qt,{})," Working…"]}),o&&g.jsx("div",{className:"p-3 rounded bg-red-900/30 border border-red-800 text-red-200",children:o}),g.jsxs(Je,{children:[g.jsx("h3",{className:"font-semibold mb-3",children:"Create Quiz"}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",placeholder:"Title",value:j,onChange:se=>P(se.target.value)}),g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",placeholder:"Subject",value:z,onChange:se=>ee(se.target.value)}),g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",placeholder:"Description (optional)",value:Z,onChange:se=>re(se.target.value)}),g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",placeholder:"Focus (how the quiz should be focused)",value:ye,onChange:se=>ce(se.target.value)}),g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",type:"datetime-local",value:ie,onChange:se=>Y(se.target.value)}),g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",type:"number",min:60,step:30,value:de,onChange:se=>oe(parseInt(se.target.value||"600",10)),placeholder:"Duration seconds"})]}),g.jsx("div",{className:"mt-3 grid md:grid-cols-3 gap-3",children:g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm mb-1 text-[rgb(var(--color-text-secondary))]",children:"Auto-generate"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))] w-24",type:"number",min:1,max:50,value:fe,onChange:se=>ge(parseInt(se.target.value||"10",10))}),g.jsxs("select",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",value:R,onChange:se=>K(se.target.value),children:[g.jsx("option",{value:"Easy",children:"Easy"}),g.jsx("option",{value:"Medium",children:"Medium"}),g.jsx("option",{value:"Hard",children:"Hard"})]}),g.jsx("button",{className:"px-3 py-2 rounded bg-[rgb(var(--color-input))]",onClick:me,children:"Generate"})]})]})}),g.jsxs("div",{className:"mt-4 space-y-3",children:[g.jsx("div",{className:"text-sm font-semibold",children:"Questions"}),U.map((se,ke)=>g.jsxs("div",{className:"p-3 rounded border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["Question ",ke+1]}),U.length>1&&g.jsx("button",{className:"px-2 py-1 text-xs rounded bg-[rgb(var(--color-input))]",onClick:()=>W(ke),children:"Remove"})]}),g.jsx("input",{className:"w-full bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))] mb-2",placeholder:"Question text",value:se.question,onChange:He=>G(De=>De.map((ue,Te)=>Te===ke?{...ue,question:He.target.value}:ue))}),g.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:se.options.map((He,De)=>g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",placeholder:`Option ${De+1}`,value:He,onChange:ue=>G(Te=>Te.map((we,F)=>F===ke?{...we,options:we.options.map((te,Ce)=>Ce===De?ue.target.value:te)}:we))},De))}),g.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[g.jsx("label",{className:"text-sm",children:"Correct index"}),g.jsxs("select",{className:"bg-[rgb(var(--color-input))] p-1 rounded border border-[rgb(var(--color-border))]",value:se.correct_index,onChange:He=>G(De=>De.map((ue,Te)=>Te===ke?{...ue,correct_index:parseInt(He.target.value,10)}:ue)),children:[g.jsx("option",{value:0,children:"0"}),g.jsx("option",{value:1,children:"1"}),g.jsx("option",{value:2,children:"2"}),g.jsx("option",{value:3,children:"3"})]}),g.jsx("label",{className:"text-sm",children:"Points"}),g.jsx("input",{className:"bg-[rgb(var(--color-input))] p-1 rounded border border-[rgb(var(--color-border))] w-20",type:"number",min:1,value:se.points,onChange:He=>G(De=>De.map((ue,Te)=>Te===ke?{...ue,points:parseInt(He.target.value||"1",10)}:ue))})]})]},ke)),g.jsx("button",{className:"px-3 py-1 rounded bg-[rgb(var(--color-input))]",onClick:ae,children:"Add Question"})]}),g.jsx("div",{className:"mt-4",children:g.jsx("button",{className:"px-4 py-2 rounded-md bg-[rgb(var(--color-primary))] text-white",onClick:B,children:"Create Quiz"})})]}),g.jsxs(Je,{children:[g.jsx("h3",{className:"font-semibold mb-3",children:"Manage Quizzes"}),u.length===0?g.jsx("div",{className:"text-[rgb(var(--color-text-secondary))]",children:"No quizzes yet."}):g.jsx("div",{className:"space-y-2",children:u.map(se=>g.jsxs("div",{className:"p-3 rounded border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50 flex items-center justify-between",children:[g.jsxs("div",{className:"min-w-0",children:[g.jsxs("div",{className:"font-semibold truncate",children:[se.title," — ",se.subject]}),g.jsxs("div",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:[new Date(se.start_at).toLocaleString()," → ",new Date(se.end_at).toLocaleString()," • Duration ",se.duration_seconds,"s"]})]}),g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("button",{className:"px-3 py-1 text-xs rounded bg-[rgb(var(--color-input))]",onClick:()=>Le(se),children:se.published_leaderboard?"Unpublish Leaderboard":"Publish Leaderboard"})})]},se.id))})]}),g.jsxs(Je,{children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"font-semibold",children:"User Management"}),g.jsx("button",{className:"px-3 py-1 text-sm rounded bg-[rgb(var(--color-input))] hover:bg-[rgb(var(--color-input-hover))]",onClick:J,children:"Refresh"})]}),g.jsxs("div",{className:"mb-4 space-y-3",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{className:"flex-1 bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",placeholder:"Search users by email...",value:y,onChange:se=>x(se.target.value)}),g.jsxs("select",{className:"bg-[rgb(var(--color-input))] p-2 rounded border border-[rgb(var(--color-border))]",value:T,onChange:se=>w(se.target.value),children:[g.jsx("option",{value:"all",children:"All Users"}),g.jsx("option",{value:"active",children:"Active Users"}),g.jsx("option",{value:"inactive",children:"Inactive Users"})]})]}),g.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["Showing ",pe.length," of ",p.length," users"]})]}),pe.length===0?g.jsx("div",{className:"text-[rgb(var(--color-text-secondary))]",children:"No users found."}):g.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:pe.map(se=>g.jsx("div",{className:"p-3 rounded border border-[rgb(var(--color-border))] bg-[rgb(var(--color-card))]/50",children:g.jsx("div",{className:"flex items-start justify-between",children:g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"font-semibold truncate",children:se.email}),g.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))] space-y-1",children:[g.jsxs("div",{children:["Registered: ",new Date(se.created_at).toLocaleString()]}),se.last_sign_in_at&&g.jsxs("div",{children:["Last Sign In: ",new Date(se.last_sign_in_at).toLocaleString()]}),se.email_confirmed_at&&g.jsxs("div",{children:["Email Confirmed: ",new Date(se.email_confirmed_at).toLocaleString()]}),g.jsxs("div",{className:"flex items-center gap-4 pt-1",children:[g.jsxs("span",{children:["Quizzes: ",se.quiz_count]}),g.jsxs("span",{children:["Total Score: ",se.total_score]}),g.jsxs("span",{children:["Avg Accuracy: ",se.avg_accuracy.toFixed(1),"%"]})]})]})]})})},se.id))})]})]}):g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Admin"}),g.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"You don\\'t have access to this page."})]})},i4={initial:{opacity:0,scale:.98},in:{opacity:1,scale:1},out:{opacity:0,scale:1.02}},s4={type:"tween",ease:"easeInOut",duration:.4},o4=()=>{const{activeView:t,setActiveView:e,setActiveSubject:n}=Fn(),{user:i,loading:o}=hn(),{profile:a,loading:u}=Vw((i==null?void 0:i.id)??null),h=()=>{switch(t){case xe.TUTOR:return g.jsx(Bb,{});case xe.EXPLAINER:return g.jsx(bO,{});case xe.QUIZ:return g.jsx(CO,{});case xe.COMPETITION:return g.jsx(t4,{});case xe.NEWS:return g.jsx(MO,{});case xe.SUBJECTS:return g.jsx(UO,{setActiveSubject:n});case xe.PLANNER:return g.jsx(GO,{});case xe.DASHBOARD:return g.jsx(QO,{});case xe.NOTES:return g.jsx(WO,{});case xe.HELP:return g.jsx(XO,{});case xe.ADMIN:return g.jsx(n4,{});default:return g.jsx(Bb,{})}};return g.jsx("div",{className:"flex h-screen bg-[rgb(var(--color-background-start))] text-[rgb(var(--color-text-primary))] font-sans overflow-hidden",children:o?g.jsx("div",{className:"flex-1 flex items-center justify-center",children:"Loading..."}):i?u?g.jsx("div",{className:"flex-1 flex items-center justify-center",children:"Loading profile..."}):a?g.jsxs(g.Fragment,{children:[g.jsx(sD,{}),g.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[g.jsx(KO,{children:g.jsx(di,{mode:"wait",children:g.jsx(Fe.div,{initial:"initial",animate:"in",exit:"out",variants:i4,transition:s4,className:"h-full w-full",children:h()},t)})}),g.jsx(HO,{})]}),g.jsx(FO,{})]}):g.jsx("div",{className:"flex-1",children:g.jsx(e4,{onDone:()=>window.location.reload()})}):g.jsx("div",{className:"flex-1",children:g.jsx(ZO,{})})})},jw=document.getElementById("root");if(!jw)throw new Error("Could not find root element to mount to");const r4=fE.createRoot(jw);r4.render(g.jsx(Th.StrictMode,{children:g.jsx(eD,{children:g.jsx(K1,{children:g.jsx(o4,{})})})}));
